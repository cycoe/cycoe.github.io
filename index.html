<!DOCTYPE html>





<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 3.7.1">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=7.4.1">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=7.4.1">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=7.4.1">
  <link rel="mask-icon" href="/images/logo.svg?v=7.4.1" color="#222">

<link rel="stylesheet" href="/css/main.css?v=7.4.1">


<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css?v=4.7.0">


<script id="hexo-configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Mist',
    version: '7.4.1',
    exturl: false,
    sidebar: {"position":"right","display":"post","offset":12,"onmobile":true},
    copycode: {"enable":false,"show_result":false,"style":null},
    back2top: {"enable":true,"sidebar":false,"scrollpercent":false},
    bookmark: {"enable":false,"color":"#222","save":"auto"},
    fancybox: false,
    mediumzoom: false,
    lazyload: false,
    pangu: false,
    algolia: {
      appID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    },
    localsearch: {"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},
    path: '',
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    translation: {
      copy_button: '复制',
      copy_success: '复制成功',
      copy_failure: '复制失败'
    },
    sidebarPadding: 40
  };
</script>

  <meta name="description" content="Cycoe&apos;s Personal Blog">
<meta name="keywords" content="Python, Linux, 化学">
<meta property="og:type" content="website">
<meta property="og:title" content="Cycoe&#39;s Home Page">
<meta property="og:url" content="http://cycoe.cc/index.html">
<meta property="og:site_name" content="Cycoe&#39;s Home Page">
<meta property="og:description" content="Cycoe&apos;s Personal Blog">
<meta property="og:locale" content="zh-CN">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Cycoe&#39;s Home Page">
<meta name="twitter:description" content="Cycoe&apos;s Personal Blog">
  <link rel="canonical" href="http://cycoe.cc/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome: true,
    isPost: false,
    isPage: false,
    isArchive: false
  };
</script>

  <title>Cycoe's Home Page</title>
  








  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-meta">

    <div>
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Cycoe's Home Page</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
        <p class="site-subtitle">Simple is better than complex. Complex is better than complicated.</p>
      
  </div>

  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>
</div>


<nav class="site-nav">
  
  <ul id="menu" class="menu">
      
      
        
        
        <li class="menu-item menu-item-home">
      
    

    <a href="/" rel="section"><i class="fa fa-fw fa-home"></i>首页</a>

  </li>
      
    
      
      
        
        
        <li class="menu-item menu-item-tags">
      
    

    <a href="/tags/" rel="section"><i class="fa fa-fw fa-tags"></i>标签</a>

  </li>
      
    
      
      
        
        
        <li class="menu-item menu-item-categories">
      
    

    <a href="/categories/" rel="section"><i class="fa fa-fw fa-th"></i>分类</a>

  </li>
      
    
      
      
        
        
        <li class="menu-item menu-item-archives">
      
    

    <a href="/archives/" rel="section"><i class="fa fa-fw fa-archive"></i>归档</a>

  </li>
      
    
      
      
        
        
        <li class="menu-item menu-item-about">
      
    

    <a href="/about/" rel="section"><i class="fa fa-fw fa-user"></i>关于</a>

  </li>
      
    
  </ul>

    

</nav>
</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div class="content">
            

  <div class="posts-expand">
        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://cycoe.cc/2019/11/17/fcitx-输入法配置/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Cycoe">
      <meta itemprop="description" content="Cycoe's Personal Blog">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Cycoe's Home Page">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            
            <a href="/2019/11/17/fcitx-输入法配置/" class="post-title-link" itemprop="url">fcitx 输入法配置</a>
          
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              
                
              

              <time title="创建时间：2019-11-17 11:54:30 / 修改时间：12:49:04" itemprop="dateCreated datePublished" datetime="2019-11-17T11:54:30+08:00">2019-11-17</time>
            </span>
          
            

            
          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Linux/" itemprop="url" rel="index">
                    <span itemprop="name">Linux</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="fa fa-comment-o"></i>
      </span>
        
      
      <span class="post-meta-item-text">Valine：</span>
    
    <a title="valine" href="/2019/11/17/fcitx-输入法配置/#comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2019/11/17/fcitx-输入法配置/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>fcitx 是 Linux 下最常用的输入法框架之一，另一个是 ibus。这两个框架的关 系，就好像 KDE 与 Gnome 的关系一般。因为在早些年，ibus 是作为 Gnome 的 依赖项被默认安装的，而 fcitx 被认为与 KDE 共同工作的更好。</p>
<p>fcitx 的安装非常简单，但是想让她在非桌面环境下正常运行，还是需要一番配置的。</p>
<h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><p>安装 fcitx 只需要安装以下几个包即可<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">sudo pacman -S fcitx fcitx-rime fcitx-gtk3 fcitx-qt5 fcitx-configtool</span><br><span class="line"></span><br><span class="line"><span class="comment"># fcitx: fcitx 可执行主程序</span></span><br><span class="line"><span class="comment"># fcitx-rime: fcitx 中的 rime 输入法实现，可根据喜好换为其他输入法</span></span><br><span class="line"><span class="comment"># fcitx-gtk3: 使 fcitx 能够在 gtk3 程序中使用</span></span><br><span class="line"><span class="comment"># fcitx-qt5: 使 fcitx 能够在 qt5 程序中使用</span></span><br><span class="line"><span class="comment"># fcitx-configtool: fcitx 配置工具界面</span></span><br></pre></td></tr></table></figure></p>
<h2 id="配置环境变量"><a href="#配置环境变量" class="headerlink" title="配置环境变量"></a>配置环境变量</h2><p>在 <code>.xprofile</code> 文件中加入以下行，使得在 X 启动时，可以自动设置 fcitx 相关的环境变量。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># export for fcitx</span></span><br><span class="line"><span class="built_in">export</span> XMODIFIERS=<span class="string">"@im=fcitx"</span></span><br><span class="line"><span class="built_in">export</span> XIM=fcitx</span><br><span class="line"><span class="built_in">export</span> XIM_PROGRAM=fcitx</span><br><span class="line"><span class="built_in">export</span> GTK_IM_MODULE=fcitx</span><br><span class="line"><span class="built_in">export</span> QT_IM_MODULE=fcitx</span><br></pre></td></tr></table></figure></p>
<p>如果 fcitx 在 gtk 或者 qt 其中一个图形库的程序中无法使用时，很有可能是相对应的环境变量没有设置，或者没有安装对应图形库的 fcitx 支持。</p>
<h2 id="fcitx-无法在-Emacs-中使用"><a href="#fcitx-无法在-Emacs-中使用" class="headerlink" title="fcitx 无法在 Emacs 中使用"></a>fcitx 无法在 Emacs 中使用</h2><p>前段时间开始使用 Emacs，但发现 fcitx 在 gtk 和 qt 程序下都没有问题，唯独在 Emacs 下无法使用。在网上搜索了很久找不到答案，最后看到一个看起来不那么靠谱的答案，抱着试一试的心态，没想到竟真的解决了。解决办法就是安装 <code>terminus-font</code>，真的不可思议是什么原理。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo pacman -S terminus-font</span><br></pre></td></tr></table></figure></p>

        
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

    
        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://cycoe.cc/2019/11/09/窗口管理器在高分屏中的设置/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Cycoe">
      <meta itemprop="description" content="Cycoe's Personal Blog">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Cycoe's Home Page">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            
            <a href="/2019/11/09/窗口管理器在高分屏中的设置/" class="post-title-link" itemprop="url">窗口管理器在高分屏中的设置</a>
          
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              
                
              

              <time title="创建时间：2019-11-09 22:18:55" itemprop="dateCreated datePublished" datetime="2019-11-09T22:18:55+08:00">2019-11-09</time>
            </span>
          
            

            
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2019-11-26 13:31:12" itemprop="dateModified" datetime="2019-11-26T13:31:12+08:00">2019-11-26</time>
              </span>
            
          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Archlinux/" itemprop="url" rel="index">
                    <span itemprop="name">Archlinux</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="fa fa-comment-o"></i>
      </span>
        
      
      <span class="post-meta-item-text">Valine：</span>
    
    <a title="valine" href="/2019/11/09/窗口管理器在高分屏中的设置/#comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2019/11/09/窗口管理器在高分屏中的设置/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>前几天换了新机器，也算是让贫穷的我第一次体验到了高分屏。13.3 寸的 2K 屏，用默认的缩放比例，字比蚂蚁大不了多少。为了保护视力，我决定将调整屏幕缩放提到最高优先级，摸索一阵后，得到了比较完美的配置方案。</p>
<p>在 Linux 中（此处特指 X.org 显示服务器，Wayland 不了解），传统的 X Clients 的缩放由 xrandr 控制，GTK 的 QT 程序的缩放由它们自己的环境变量控制。因此想要完美调整所有界面的缩放比例需要一番摸索。当然，Gnome、KDE 之类的桌面环境除外，桌面环境设置中一般都自带缩放设置。</p>
<h2 id="降低分辨率"><a href="#降低分辨率" class="headerlink" title="降低分辨率"></a>降低分辨率</h2><p>直接通过 xrandr 降低显示器的分辨率是最简单粗暴的办法，但这样高分屏就相当于废了，不推荐。</p>
<h2 id="调整-Scale"><a href="#调整-Scale" class="headerlink" title="调整 Scale"></a>调整 Scale</h2><p>通过 xrandr 调整显示界面的 Scale，这种方法相当于用放大镜将屏幕上的内容放大，会使内容严重模糊，同样不推荐。</p>
<h2 id="通过-xrandr-设置-DPI"><a href="#通过-xrandr-设置-DPI" class="headerlink" title="通过 xrandr 设置 DPI"></a>通过 xrandr 设置 DPI</h2><p>通过设置 DPI，其实就是告诉程序我的屏幕的细腻程度如何。如设置 DPI 为 144，就是告诉程序我的屏幕一英寸长度上有 144 个像素点。但此处也有技巧，第一种方法是直接使用 xrandr 设置 DPI，在 <code>.xinitrc</code> 或 <code>.xprofile</code> 中加入 <code>xrandr --dpi 144</code>，使得每次登录 X Server 时都会自动设置 DPI。但此方法对 GTK 程序无效，需要继续在文件中加入<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> GDK_SCALE=2</span><br><span class="line"><span class="built_in">export</span> GDK_DPI_SCALE=0.5</span><br></pre></td></tr></table></figure></p>
<p>使得 GTK 程序支持缩放，但你应该也注意到了此处的两个问题。一是此处仍然使用的是缩放而非 DPI，会导致 GTK 程序界面模糊；二是 <code>GDK_SCALE</code> 只支持整数倍缩放。</p>
<h2 id="通过-xft-设置-DPI"><a href="#通过-xft-设置-DPI" class="headerlink" title="通过 xft 设置 DPI"></a>通过 xft 设置 DPI</h2><p>这是我目前找到的完美的方法，还未遇到什么问题。在 <code>.Xresources</code> 文件中加入<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Xft.dpi: 144</span><br><span class="line">Xft.autohint: 0</span><br><span class="line">Xft.lcdfilter:  lcddefault</span><br><span class="line">Xft.hintstyle:  hintfull</span><br><span class="line">Xft.hinting: 1</span><br><span class="line">Xft.antialias: 1</span><br><span class="line">Xft.rgba: rgb</span><br></pre></td></tr></table></figure></p>
<p>并在 <code>.xinitrc</code> 或 <code>.xprofile</code> 中加入 <code>xrdb -merge &quot;.Xresources&quot;</code> 使得每次登录时都会使 <code>.Xresources</code> 生效。<code>xrdb</code> 命令需要首先安装 <code>xorg-xrdb</code> 包。至此，终于拥有了一个比较舒适的 DPI。</p>

        
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

    
        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://cycoe.cc/2019/11/09/Archlinux-无法通过亮度调节按键调节亮度的解决办法/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Cycoe">
      <meta itemprop="description" content="Cycoe's Personal Blog">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Cycoe's Home Page">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            
            <a href="/2019/11/09/Archlinux-无法通过亮度调节按键调节亮度的解决办法/" class="post-title-link" itemprop="url">Archlinux 无法通过亮度调节按键调节亮度的解决办法</a>
          
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              
                
              

              <time title="创建时间：2019-11-09 01:50:02" itemprop="dateCreated datePublished" datetime="2019-11-09T01:50:02+08:00">2019-11-09</time>
            </span>
          
            

            
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2019-11-26 13:29:43" itemprop="dateModified" datetime="2019-11-26T13:29:43+08:00">2019-11-26</time>
              </span>
            
          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Linux/" itemprop="url" rel="index">
                    <span itemprop="name">Linux</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="fa fa-comment-o"></i>
      </span>
        
      
      <span class="post-meta-item-text">Valine：</span>
    
    <a title="valine" href="/2019/11/09/Archlinux-无法通过亮度调节按键调节亮度的解决办法/#comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2019/11/09/Archlinux-无法通过亮度调节按键调节亮度的解决办法/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>最近买了一个新机器小新 Pro13，买来的第一天当然是先装上 Archlinux。装上 之后发现无法通过键盘上的亮度调节按钮调节屏幕亮度，机器是 AMD 处理器加 AMD 核显。刚开始以为是 AMD 版本特有的问题，但在网上查了相关的问题后， 发现许多 Intel 核显的机器也有类似问题。</p>
<p>首先排除按键问题，通过 <code>xev</code> 命令可以监测到亮度调节按钮被按下，说明按键本身没有问题。通过向 <code>/etc/default/grub</code> 中加入 <code>GRUB_CMDLINE_LINUX_DEFAULT=&quot;loglevel=3 acpi_osi=! acpi=&quot;Linux&quot; quiet splash&quot;</code> 没有效果，并且反而使得亮度调节按钮失效了。</p>
<p>安装 <code>xorg-xbacklight</code> 包，但 <code>xbacklight</code> 命令提示 <code>No outputs have backlight property</code>。是因为 <code>xorg-xbacklight</code> 包中提供的 <code>xbacklight</code> 命令默认只对 Intel 核显有效，在 AMD 核显上会提示 <code>No outputs have backlight property</code> 错误。因此需要通过 ACPI 通道对亮度进行控制。</p>
<p><strong>解决方法如下：</strong><br>安装 ACPI 的亮度控制，替换原 <code>xbacklight</code> 命令<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo pacman -S acpilight</span><br></pre></td></tr></table></figure></p>
<p>将当前用户加入 video 组，实现免 root 控制亮度<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo gpasswd video -a cycoe</span><br></pre></td></tr></table></figure></p>
<p>acpilight 兼容 xbacklight 重启之后就可以通过下面命令控制亮度了<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Get backlight brightness</span></span><br><span class="line">xbacklight -get</span><br><span class="line"><span class="comment"># Set brightness</span></span><br><span class="line">xbacklight -<span class="built_in">set</span> 70</span><br><span class="line"><span class="comment"># Increase brightness</span></span><br><span class="line">xbacklight -inc 10</span><br><span class="line"><span class="comment"># Decrease brightness</span></span><br><span class="line">xbacklight -dec 10</span><br></pre></td></tr></table></figure></p>
<h2 id="使用-light-替代-acpilight"><a href="#使用-light-替代-acpilight" class="headerlink" title="使用 light 替代 acpilight"></a>使用 light 替代 acpilight</h2><p>acpilight 是用 Python 写的脚本工具，由于我对于系统工具的洁癖，还是考虑找个 C 语言的替代品，也就找到了 light 这个工具，并且其可以自动检测到亮度调节接口。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Install light</span></span><br><span class="line">sudo pacman -S light</span><br><span class="line"><span class="comment"># Increase brightness</span></span><br><span class="line">light -A 10</span><br><span class="line"><span class="comment"># Decrease brightness</span></span><br><span class="line">light -U 10</span><br></pre></td></tr></table></figure></p>
<h2 id="使用-clight-利用摄像头自动调节亮度"><a href="#使用-clight-利用摄像头自动调节亮度" class="headerlink" title="使用 clight 利用摄像头自动调节亮度"></a>使用 clight 利用摄像头自动调节亮度</h2><blockquote>
<p>Clight is a C user daemon utility that aims to fully manage your display. It will automagically change screen backlight level to match ambient brightness, as computed by capturing frames from webcam. Moreover, it can manage your screen temperature, just like redshift does. Finally, it can dim your screen after a timeout.</p>
</blockquote>
<p>简而言之，clight 能够自动控制屏幕亮度、gamma 值、自动变暗、自动熄屏等。通过 AUR 安装。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yay -S clight</span><br></pre></td></tr></table></figure></p>
<p>官方 Wiki 建议安装完成后启用 clightd 服务，虽然并不知道有什么用。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Remember to enable Clightd systemd unit!</span></span><br><span class="line">sudo systemctl <span class="built_in">enable</span> clightd.service</span><br></pre></td></tr></table></figure></p>
<p>拷贝配置文件。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cp /etc/default/clight.conf ~/.config/</span><br></pre></td></tr></table></figure></p>
<p>配置文件中的 <code>gamma_temp</code> 取消注释会提示参数个数不对，设置一个或者三个参数也没有用，因此直接禁用 gamma 值调节。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## Gamma temperature during day and night</span></span><br><span class="line"><span class="comment"># gamma_temp = [ 6500, 6500 ];</span></span><br><span class="line">...</span><br><span class="line"><span class="comment">## Uncomment to disable gamma support</span></span><br><span class="line">no_gamma = <span class="literal">true</span>;</span><br></pre></td></tr></table></figure></p>
<p>将 <code>clight</code> 加入到自启动脚本中。</p>

        
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

    
        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://cycoe.cc/2019/08/13/使用-PIL-与-numpy-进行图像处理/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Cycoe">
      <meta itemprop="description" content="Cycoe's Personal Blog">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Cycoe's Home Page">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            
            <a href="/2019/08/13/使用-PIL-与-numpy-进行图像处理/" class="post-title-link" itemprop="url">使用 PIL 与 numpy 进行图像处理</a>
          
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              
                
              

              <time title="创建时间：2019-08-13 22:35:51 / 修改时间：22:37:16" itemprop="dateCreated datePublished" datetime="2019-08-13T22:35:51+08:00">2019-08-13</time>
            </span>
          
            

            
          

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="fa fa-comment-o"></i>
      </span>
        
      
      <span class="post-meta-item-text">Valine：</span>
    
    <a title="valine" href="/2019/08/13/使用-PIL-与-numpy-进行图像处理/#comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2019/08/13/使用-PIL-与-numpy-进行图像处理/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          
        
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

    
        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://cycoe.cc/2019/08/09/Construct-Dwarf-Fortress-Lazy-Newbee-Package-in-ArchLinux/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Cycoe">
      <meta itemprop="description" content="Cycoe's Personal Blog">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Cycoe's Home Page">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            
            <a href="/2019/08/09/Construct-Dwarf-Fortress-Lazy-Newbee-Package-in-ArchLinux/" class="post-title-link" itemprop="url">Construct Dwarf Fortress Lazy Newbee Package in ArchLinux</a>
          
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              
                
              

              <time title="创建时间：2019-08-09 13:36:01 / 修改时间：13:56:20" itemprop="dateCreated datePublished" datetime="2019-08-09T13:36:01+08:00">2019-08-09</time>
            </span>
          
            

            
          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Games/" itemprop="url" rel="index">
                    <span itemprop="name">Games</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="fa fa-comment-o"></i>
      </span>
        
      
      <span class="post-meta-item-text">Valine：</span>
    
    <a title="valine" href="/2019/08/09/Construct-Dwarf-Fortress-Lazy-Newbee-Package-in-ArchLinux/#comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2019/08/09/Construct-Dwarf-Fortress-Lazy-Newbee-Package-in-ArchLinux/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="Included-With-This-Package"><a href="#Included-With-This-Package" class="headerlink" title="Included With This Package:"></a>Included With This Package:</h2><p>DwarfFortress-LNP 也就是我们常说的懒人包，由游戏本体、工具包和图形包组成。在 archlinux 上，我们无法通过 aur 简单地安装懒人包，因此我们需要分别安装懒人包中的各个部分来达到同样的效果。</p>
<ul>
<li><a href="http://www.bay12forums.com/smf/index.php?topic=140808.0" target="_blank" rel="noopener">Pidgeot’s PyLNP 0.13 Lazy Newb Pack Python interface</a><ul>
<li>Utilities:<ul>
<li><a href="http://www.bay12forums.com/smf/index.php?topic=139553.0" target="_blank" rel="noopener">DFHack Linux V0.44.09-r1 (gcc 5.4.0)</a></li>
<li><a href="http://www.bay12forums.com/smf/index.php?topic=138754.0" target="_blank" rel="noopener">TWBT 6.41</a></li>
<li><a href="https://github.com/Dwarf-Therapist/Dwarf-Therapist" target="_blank" rel="noopener">Dwarf Therapist v39.3.1</a> (<strong>compiled with qt5.5.1</strong>)</li>
<li><a href="http://df.zweistein.cz/soundsense/" target="_blank" rel="noopener">Soundsense r2016-1</a></li>
<li><a href="http://www.bay12forums.com/smf/index.php?topic=159567.0" target="_blank" rel="noopener">SoundCenSe GTK 1.4.2</a> (<strong>Requires Mono, go <a href="http://www.mono-project.com/download/#download-lin" target="_blank" rel="noopener">HERE</a> for install instructions</strong>)</li>
<li><a href="http://www.joelpt.net/quickfort/" target="_blank" rel="noopener">qfconvert 2.04</a> (<strong>See ./LNP/about/qfconvert.md for usage instructions</strong>)</li>
<li><a href="http://www.bay12forums.com/smf/index.php?topic=130030.0" target="_blank" rel="noopener">DF Announcement Filter 1.01</a> (<strong>Requires Java</strong>)</li>
<li><a href="http://www.bay12forums.com/smf/index.php?topic=155307.0" target="_blank" rel="noopener">Legends Browser 1.17.1</a> (<strong>Requires Java 8</strong>)</li>
<li><a href="http://www.bay12forums.com/smf/index.php?topic=146473.0" target="_blank" rel="noopener">Armok Vision 0.19.1</a></li>
</ul>
</li>
<li>Graphics (Now using <a href="http://www.bay12forums.com/smf/index.php?topic=155882" target="_blank" rel="noopener">fricy’s Updated tilesets</a>!)<ul>
<li>[16x16] ASCII</li>
<li>[16x16] <a href="https://github.com/DFgraphics/Afro-Graphics" target="_blank" rel="noopener">Afro</a></li>
<li>[20x20] <a href="https://github.com/DFgraphics/AutoReiv" target="_blank" rel="noopener">AutoReiv</a></li>
<li>[18x18] <a href="https://github.com/DFgraphics/CLA" target="_blank" rel="noopener">CLA</a></li>
<li>[24x24] <a href="https://github.com/DFgraphics/GemSet" target="_blank" rel="noopener">GemSet</a></li>
<li>[16x16] <a href="https://github.com/DFgraphics/Ironhand" target="_blank" rel="noopener">Ironhand</a></li>
<li>[12x12] <a href="https://github.com/DFgraphics/Jolly-Bastion" target="_blank" rel="noopener">Jolly Bastion</a></li>
<li>[16x16] <a href="https://github.com/DFgraphics/Mayday" target="_blank" rel="noopener">Mayday</a></li>
<li>[32x32] <a href="https://github.com/jecowa/Meph" target="_blank" rel="noopener">Meph-lite</a></li>
<li>[16x16] <a href="https://github.com/DFgraphics/Obsidian" target="_blank" rel="noopener">Obsidian</a></li>
<li>[16x16] <a href="https://github.com/DFgraphics/Phoebus" target="_blank" rel="noopener">Phoebus</a></li>
<li>[16x16] <a href="https://github.com/DFgraphics/Rally-Ho" target="_blank" rel="noopener">Rally Ho</a></li>
<li>[16x16] <a href="https://github.com/DFgraphics/Spacefox" target="_blank" rel="noopener">Spacefox</a></li>
<li>[20x20] <a href="https://github.com/DFgraphics/Taffer" target="_blank" rel="noopener">Taffer</a></li>
<li>[16x16] <a href="https://github.com/DFgraphics/Tergel" target="_blank" rel="noopener">Tergel</a></li>
<li>[16x16] <a href="https://github.com/DFgraphics/Wanderlust" target="_blank" rel="noopener">Wanderlust</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="Utilities"><a href="#Utilities" class="headerlink" title="Utilities"></a>Utilities</h2><h3 id="DFHack-Linux-V0-44-09-r1-gcc-5-4-0"><a href="#DFHack-Linux-V0-44-09-r1-gcc-5-4-0" class="headerlink" title="DFHack Linux V0.44.09-r1 (gcc 5.4.0)"></a><a href="http://www.bay12forums.com/smf/index.php?topic=139553.0" target="_blank" rel="noopener">DFHack Linux V0.44.09-r1 (gcc 5.4.0)</a></h3><p>DfHack is an attempt to unite the various ways hack tools access DF memory and allow for easier development of new tools (and of course, make the game more enjoyable for players).</p>
<p>In archlinux, we can get DfHack by install it with yay:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yay -S dfhack-twbt-bin</span><br></pre></td></tr></table></figure></p>
<p>As we can see, we installed a DfHack version integrated with TWBT. That means we don’t need to install TWBT again. What’s more, package ‘dfhack-twbt-bin’ depends on the package ‘dwarffortress’ in community repository. </p>
<p>But as default, the ‘PKGBIULD’ file of ‘dfhack-twbt-bin’ will download the dfhack binary compiled with gcc-4.8, which provide an out-of-date version of remotefortressreader plugin. To avoid this, you can command the PKGBIULD to download dfhack compiled with gcc-7. To get this magic as below, edit PKGBIULD with editor:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line"><span class="comment"># https://github.com/DFHack/dfhack/releases/download/$_pkgver/dfhack-$_pkgver-Linux-64-gcc-4.8.tar.bz2</span></span><br><span class="line">https://github.com/DFHack/dfhack/releases/download/<span class="variable">$_pkgver</span>/dfhack-<span class="variable">$_pkgver</span>-Linux-64-gcc-7.tar.bz2</span><br><span class="line">...</span><br><span class="line">md5sums=(<span class="string">'e630ae2fc93c6c7b55552336da2b6c07'</span></span><br><span class="line">         <span class="string">'3853c6f890d3541f710f2c4833a9e696'</span></span><br><span class="line">         <span class="string">'6730da5fec400ece9102552e77996fcb'</span></span><br><span class="line">         <span class="string">'052a58e7f5f1af8be3ddefe9677b8fc6'</span></span><br><span class="line">         <span class="comment"># 'e200a6225dcf285e2eac19c1d1e118ea'</span></span><br><span class="line">         <span class="string">'bdbe256099ec9ffd90f391f0d069742f'</span></span><br><span class="line">         <span class="string">'8eac5ae59dad0397090c4f50d50ef841'</span>)</span><br><span class="line">...</span><br></pre></td></tr></table></figure></p>
<p>Then run <code>makepkg</code> to download lacking files.</p>
<h3 id="TWBT-6-41"><a href="#TWBT-6-41" class="headerlink" title="TWBT 6.41"></a><a href="http://www.bay12forums.com/smf/index.php?topic=138754.0" target="_blank" rel="noopener">TWBT 6.41</a></h3><p>This plugin improves various aspects the game interface.</p>
<p>Originally I wrote a small plugin because I was tired seeing coffins instead of zeroes and all that stuff. It has greately evolved since then. Some functions may not work or have issues in Adventurer Mode. See readme for all details.</p>
<ol>
<li>Main function is to use separate fonts (tilesets) for map tiles and for text. Text and map font may also have different sizes. Map tiles can have any size, no requirement to have at least 80x25 grid anymore.</li>
<li>Multi-level rendering.</li>
<li>Allows to override tile numbers for buildings, items and various tile types.</li>
<li><code>mapshot</code> command saves image of the entire map in full size.</li>
<li>“Multilayered” rendering where floor is visible behind buildings and items. (see here for details)</li>
<li>Tiles can have parts that will and parts that will not be affected by material colour. (see here for details)</li>
<li>“Multilayered” rendering for units too. (see here for details)</li>
<li>An option to hide stockpiles (background, not items of course) unless in [q], [p] and [k] modes. (see here for details)</li>
</ol>
<p>To make a long story short, TWBT can greately improve the graphics.</p>
<h3 id="Dwarf-Therapist-v39-3-1-compiled-with-qt5-5-1"><a href="#Dwarf-Therapist-v39-3-1-compiled-with-qt5-5-1" class="headerlink" title="Dwarf Therapist v39.3.1 (compiled with qt5.5.1)"></a><a href="https://github.com/Dwarf-Therapist/Dwarf-Therapist" target="_blank" rel="noopener">Dwarf Therapist v39.3.1</a> (<strong>compiled with qt5.5.1</strong>)</h3><p>Another life-change utility, as it can access memory when df is running, then you can manage then labor of dwarves with it. (Conflict with auto-labor in DfHack)</p>
<p>You can install it with <code>yay -S dwarftherapist-git</code>. It’s a GUI program written with Qt. Open it after you opened a map in df, then you can see the labor informations organized in table.</p>
<h3 id="Soundsense-r2016-1"><a href="#Soundsense-r2016-1" class="headerlink" title="Soundsense r2016-1"></a><a href="http://df.zweistein.cz/soundsense/" target="_blank" rel="noopener">Soundsense r2016-1</a></h3><p>Sound package for df that can be installed with <code>yay -S soundsense</code>. It provide sounds by parsing event changes in <code>~/.dwarffortress/gamelog.txt</code>.</p>
<h3 id="SoundCenSe-GTK-1-4-2-Requires-Mono-go-HERE-for-install-instructions"><a href="#SoundCenSe-GTK-1-4-2-Requires-Mono-go-HERE-for-install-instructions" class="headerlink" title="SoundCenSe GTK 1.4.2 (Requires Mono, go HERE for install instructions)"></a><a href="http://www.bay12forums.com/smf/index.php?topic=159567.0" target="_blank" rel="noopener">SoundCenSe GTK 1.4.2</a> (<strong>Requires Mono, go <a href="http://www.mono-project.com/download/#download-lin" target="_blank" rel="noopener">HERE</a> for install instructions</strong>)</h3><p>Maybe a fork of Soundsense written by c# and GTK2, by I never run successfully.</p>
<h3 id="qfconvert-2-04-See-LNP-about-qfconvert-md-for-usage-instructions"><a href="#qfconvert-2-04-See-LNP-about-qfconvert-md-for-usage-instructions" class="headerlink" title="qfconvert 2.04 (See ./LNP/about/qfconvert.md for usage instructions)"></a><a href="http://www.joelpt.net/quickfort/" target="_blank" rel="noopener">qfconvert 2.04</a> (<strong>See ./LNP/about/qfconvert.md for usage instructions</strong>)</h3><p>Quickfort 2 is a utility for Dwarf Fortress that helps you build fortresses from “blueprint” .CSV, .XLS, and .XLSX files.</p>
<h3 id="DF-Announcement-Filter-1-01-Requires-Java"><a href="#DF-Announcement-Filter-1-01-Requires-Java" class="headerlink" title="DF Announcement Filter 1.01 (Requires Java)"></a><a href="http://www.bay12forums.com/smf/index.php?topic=130030.0" target="_blank" rel="noopener">DF Announcement Filter 1.01</a> (<strong>Requires Java</strong>)</h3><p>This utility gives you a live feed of announcements without having to pause the game to check the announcement page. It’s configurable, allowing you to only see the announcements you’re actually interested in, and you can also have combat announcements show up in the feed rather than checking the reports screen.</p>
<h3 id="Legends-Browser-1-17-1-Requires-Java-8"><a href="#Legends-Browser-1-17-1-Requires-Java-8" class="headerlink" title="Legends Browser 1.17.1 (Requires Java 8)"></a><a href="http://www.bay12forums.com/smf/index.php?topic=155307.0" target="_blank" rel="noopener">Legends Browser 1.17.1</a> (<strong>Requires Java 8</strong>)</h3><p>Legends Browser is an multi-platform, open source, java-based legends viewer for dwarf fortress 0.44. You can read about the legends and stories in browser interactively. You can download the latest release version in <a href="https://github.com/robertjanetzko/LegendsBrowser/releases" target="_blank" rel="noopener">this page</a>, then run it with <code>java -jar legendsbrowser-1.17.1.jar</code>. Before that, you should export a xml file in legend mode.</p>
<h3 id="Armok-Vision-0-19-1"><a href="#Armok-Vision-0-19-1" class="headerlink" title="Armok Vision 0.19.1"></a><a href="http://www.bay12forums.com/smf/index.php?topic=146473.0" target="_blank" rel="noopener">Armok Vision 0.19.1</a></h3><p>A 3d realtime visualizer for Dwarf Fortress rendering with unity, similar with stonesense, but can run independent with df.</p>
<h2 id="Graphics"><a href="#Graphics" class="headerlink" title="Graphics"></a>Graphics</h2><p>I prefer the Spacefox graphics pack. <a href="https://github.com/cycoe/Spacefox" target="_blank" rel="noopener">This is a fork</a> with installation script.</p>

        
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

    
        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://cycoe.cc/2019/05/09/常用粤语语气词发音与含义/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Cycoe">
      <meta itemprop="description" content="Cycoe's Personal Blog">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Cycoe's Home Page">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            
            <a href="/2019/05/09/常用粤语语气词发音与含义/" class="post-title-link" itemprop="url">常用粤语语气词发音与含义</a>
          
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              
                
              

              <time title="创建时间：2019-05-09 18:32:59 / 修改时间：19:21:35" itemprop="dateCreated datePublished" datetime="2019-05-09T18:32:59+08:00">2019-05-09</time>
            </span>
          
            

            
          

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="fa fa-comment-o"></i>
      </span>
        
      
      <span class="post-meta-item-text">Valine：</span>
    
    <a title="valine" href="/2019/05/09/常用粤语语气词发音与含义/#comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2019/05/09/常用粤语语气词发音与含义/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>最近发现粤语的语气词使用的非常多，这一点与温州话比较相似，因此特地总结了如下一些常用的粤语语气词的发音与用法。</p>
<h2 id="的、地、得"><a href="#的、地、得" class="headerlink" title="的、地、得"></a>的、地、得</h2><p>在普通话中，的、地、得都发音为 de，而在粤语中三个“的” 的发音都不相同。</p>
<div class="table-container">
<table>
<thead>
<tr>
<th>字</th>
<th>发音</th>
<th>含义</th>
<th>用法</th>
</tr>
</thead>
<tbody>
<tr>
<td>嘅</td>
<td>ge3</td>
<td>类似于普通话的“的”</td>
<td>小明嘅書包</td>
</tr>
<tr>
<td>咁</td>
<td>gam3</td>
<td>这样，这么，如此，可替换普通话的“地”</td>
<td>佢狼吞虎咽咁食</td>
</tr>
<tr>
<td>得</td>
<td>dak1</td>
<td>类似于普通话的“得”</td>
<td>佢写得一手好文章</td>
</tr>
<tr>
<td>到</td>
<td>dou3</td>
<td>类似于“得”，可表示程度</td>
<td>食得（到）一干二净</td>
</tr>
</tbody>
</table>
</div>
<h2 id="语气词"><a href="#语气词" class="headerlink" title="语气词"></a>语气词</h2><div class="table-container">
<table>
<thead>
<tr>
<th>字</th>
<th>发音</th>
<th>含义</th>
<th>用法</th>
</tr>
</thead>
<tbody>
<tr>
<td>哋</td>
<td>dei2</td>
<td>用於人稱代詞後，相當於“們”</td>
<td>我哋；佢哋</td>
</tr>
<tr>
<td>呃</td>
<td>ak1</td>
<td>騙</td>
<td>你成日呃我！</td>
</tr>
<tr>
<td>咁</td>
<td>gam3</td>
<td>这样，这么，如此</td>
<td>件衫咁貴</td>
</tr>
<tr>
<td>噉</td>
<td>gam2</td>
<td>這樣，那樣</td>
<td>噉都得？</td>
</tr>
<tr>
<td>咩</td>
<td>me1</td>
<td>表疑问，什么</td>
<td>做咩啊？</td>
</tr>
<tr>
<td>唔</td>
<td>m4</td>
<td>不</td>
<td>唔好</td>
</tr>
<tr>
<td>咗</td>
<td>zo2</td>
<td>了</td>
<td>我食咗飯了</td>
</tr>
<tr>
<td>唧</td>
<td>zik1</td>
<td>用水射击</td>
<td>唧水</td>
</tr>
<tr>
<td>喎</td>
<td>wo5</td>
<td>语气词，常用在表达别人的吩咐</td>
<td>佢叫你今日去開會喎</td>
</tr>
<tr>
<td>啲</td>
<td>di1</td>
<td>表數量，若幹；少許；一點（大致有個確定數量）</td>
<td>畀啲錢佢；落啲胡椒粉</td>
</tr>
<tr>
<td>啩</td>
<td>gwaa5</td>
<td>語氣詞，相當於“吧”</td>
<td>你唔走啩</td>
</tr>
<tr>
<td>啱</td>
<td>ngaam1</td>
<td>合；合適；對；行；可以</td>
<td>呢種款式～心水；你講得～</td>
</tr>
<tr>
<td>喺</td>
<td>hai2</td>
<td>在</td>
<td>你喺邊度等我</td>
</tr>
<tr>
<td>嚟</td>
<td>lai4</td>
<td>來，起來</td>
<td>過嚟</td>
</tr>
<tr>
<td>嘢</td>
<td>je5</td>
<td>東西</td>
<td>有嘢食</td>
</tr>
<tr>
<td>嘥</td>
<td>saai1</td>
<td>浪費；糟蹋</td>
<td>返一次工就嘥好多錢</td>
</tr>
<tr>
<td>嗮</td>
<td>saai3</td>
<td>完全</td>
<td>啲飯倒嗮</td>
</tr>
<tr>
<td>嗌</td>
<td>aai3</td>
<td>咽喉窒塞；叫</td>
<td>嗌救命</td>
</tr>
<tr>
<td>嗰</td>
<td>go3</td>
<td>指示代詞，那</td>
<td>嗰個；嗰啲（那些）</td>
</tr>
<tr>
<td>叻</td>
<td>lek1</td>
<td>能幹</td>
<td>叻仔</td>
</tr>
<tr>
<td>喇</td>
<td>laa1</td>
<td>了</td>
<td>走得喇</td>
</tr>
</tbody>
</table>
</div>

        
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

    
        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://cycoe.cc/2019/04/30/反向SSH实现内网穿透/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Cycoe">
      <meta itemprop="description" content="Cycoe's Personal Blog">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Cycoe's Home Page">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            
            <a href="/2019/04/30/反向SSH实现内网穿透/" class="post-title-link" itemprop="url">反向SSH实现内网穿透</a>
          
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              
                
              

              <time title="创建时间：2019-04-30 23:42:57" itemprop="dateCreated datePublished" datetime="2019-04-30T23:42:57+08:00">2019-04-30</time>
            </span>
          
            

            
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2019-05-03 22:07:52" itemprop="dateModified" datetime="2019-05-03T22:07:52+08:00">2019-05-03</time>
              </span>
            
          

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="fa fa-comment-o"></i>
      </span>
        
      
      <span class="post-meta-item-text">Valine：</span>
    
    <a title="valine" href="/2019/04/30/反向SSH实现内网穿透/#comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2019/04/30/反向SSH实现内网穿透/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>最近实验室又配置了一台新的计算平台，噪声堪比飞机起飞，再加上本校区不允许实验过夜，只能将其安置在学校外面。但从学校到计算平台车程 40Km，每次都过去做计算显然不现实，如果能从学校直接远程连接是最好的。</p>
<p>通过相关资料的查询及对专业人士的请教，找到如下几种解决方法:</p>
<ol>
<li>联系网络运营商将动态 IP 转为静态的公网 IP，这样就可以直接从学校的内网连接到计算平台，是最完美的解决方案。但是查询资费后发现，价钱不那么完美，一个月 6000 块大洋怎么负担得起啊！</li>
<li>主机 A 使用 TeamViewer 连接至计算平台局域网下的另一台主机 B，再控制 B 使用 SSH 连接至计算平台。这种方法包含几个明显的弊端：<ol>
<li>操作麻烦，需要经过两层的文件传输及控制；</li>
<li>虽然 TeamViewer 有个人的免费使用许可，但最近审查日益严格，经常使用几分钟就被强制下线；</li>
<li>TeamViewer 基于 GUI 远程控制，对网络要求很高；</li>
<li>最重要的一点，一个好的解决方案应该形成一个“黑箱”，而不应该把内部细节暴露给用户；</li>
</ol>
</li>
<li>从计算平台使用反向 SSH 连接到云服务器，从而建立起从云服务器到计算平台的隧道连接。这种方法传输的速度上限在于云服务器的带宽，最大的优点在于实现了一个“鸭子类型”，使用 SSH 连接计算平台与连接局域网内的主机无异。</li>
</ol>
<h2 id="SSH-协议与应用"><a href="#SSH-协议与应用" class="headerlink" title="SSH 协议与应用"></a>SSH 协议与应用</h2><blockquote>
<p>SSH 为 Secure Shell 的缩写，由 IETF 的网络小组（Network Working Group）所制定；SSH 为建立在应用层基础上的安全协议。SSH 是目前较可靠，专为远程登录会话和其他网络服务提供安全性的协议。利用 SSH 协议可以有效防止远程管理过程中的信息泄露问题。SSH 最初是 UNIX 系统上的一个程序，后来又迅速扩展到其他操作平台。SSH 在正确使用时可弥补网络中的漏洞。SSH 客户端适用于多种平台。几乎所有 UNIX 平台—包括 HP-UX、Linux、AIX、Solaris、Digital UNIX、Irix，以及其他平台，都可运行 SSH。</p>
</blockquote>
<p>以上对 SSH 的解释来自<a href="https://baike.baidu.com/item/ssh/10407?fr=aladdin" target="_blank" rel="noopener">百度百科</a>，别问我为什么不用 Wikipedia。从中我们看到，SSH 是建立在应用层基础上的一种安全协议，可以用来进行远程控制，或在计算机之间传送文件，比传统的 telnet 或 ftp 协议要更安全。Linux 下最常使用的就是 OpenSSH。OpenSSH 是 SSH 协议的免费开源实现，提供了服务端后台程序（SSH Daemon）和客户端工具(SSH Client)。主机可以通过 SSH 客户端连接运行了 SSH 服务端的主机。</p>
<h2 id="网络拓扑分析"><a href="#网络拓扑分析" class="headerlink" title="网络拓扑分析"></a>网络拓扑分析</h2><p>互联网是一张巨大的网，其中所有的主机都由有线或无线的方式相连，但并不代表任意两台主机都能互相可见。网络是有方向的，与其说是网我觉得更像一棵树。网络在向下进行传输时，会经过 NAT（Network Address Translation 网络地址转换），因此外网的主机无法直接访问内网的主机。</p>
<p>在我们本次遇到的问题中，网络连接可表示为如下的拓扑结构。<br><img src="/2019/04/30/反向SSH实现内网穿透/topology.png" title="网络拓扑结构"></p>
<p>各个主机的 IP 地址如下表所示</p>
<div class="table-container">
<table>
<thead>
<tr>
<th>主机名</th>
<th>IP</th>
<th>用户名</th>
<th>备注</th>
</tr>
</thead>
<tbody>
<tr>
<td>计算平台 A</td>
<td>10.0.0.100</td>
<td>cal</td>
<td>目标主机，处于内网</td>
</tr>
<tr>
<td>控制端 B</td>
<td>192.168.1.100</td>
<td>client</td>
<td>控制主机，处于内网</td>
</tr>
<tr>
<td>云服务器 O</td>
<td>123.123.123.123</td>
<td>server</td>
<td>公网服务器，起桥梁作用</td>
</tr>
</tbody>
</table>
</div>
<p>其中 A、B 能够访问 O，但 O 不能访问 A、B，并且 A、B 之间不能直接互相访问。我们最后要实现的目标就是使用 B 访问 A。</p>
<h2 id="解决方法"><a href="#解决方法" class="headerlink" title="解决方法"></a>解决方法</h2><p>通俗地说：就是在主机 A 上做到 O 的反向代理；然后在 O 上做正向的代理实现本地端口的转发。</p>
<h3 id="准备工作"><a href="#准备工作" class="headerlink" title="准备工作"></a>准备工作</h3><p>A、B、O 上都要安装 SSH Client，A、O 上需要安装 SSH Daemon。</p>
<p>需要用到的 ssh 参数<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">反向代理</span><br><span class="line">ssh -fCNR</span><br></pre></td></tr></table></figure></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">正向代理</span><br><span class="line">ssh -fCNL</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">-f 后台执行 ssh 指令</span><br><span class="line">-C 允许压缩数据</span><br><span class="line">-N 不执行远程指令</span><br><span class="line">-R 将远程主机（服务器）的某个端口转发到本地端指定主机的指定端口</span><br><span class="line">-L 将本地机（客户机）的某个端口转发到远端指定主机的指定端口</span><br><span class="line">-p 指定远程主机的端口</span><br></pre></td></tr></table></figure>
<h3 id="反向代理"><a href="#反向代理" class="headerlink" title="反向代理"></a>反向代理</h3><p>首先在 A 主机上操作，建立 A 到 O 的反向代理，具体命令为<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh -fCNR [O 主机 IP 或省略]:[O 主机端口]:[A 主机 IP ]:[A 主机端口] [O 主机的用户名@O 主机 IP]</span><br></pre></td></tr></table></figure></p>
<p>在这里我使用了 O 主机的 3333 端口，以及 A 主机的 22 端口，按照以上命令即为<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh -fCNR 3333:localhost:22 server@123.123.123.123</span><br></pre></td></tr></table></figure></p>
<p>此时我们就将 O 的 3333 端口映射到了 A 的 22 端口，也就是说访问 O 的 3333 端口与访问 A 的 22 端口效果相同。</p>
<p>使用 <code>ps aux | grep 3333</code> 命令来查看反向代理是否运行成功。</p>
<h3 id="正向代理"><a href="#正向代理" class="headerlink" title="正向代理"></a>正向代理</h3><p>接下来在 O 主机上操作。完成上一步的反向代理后，在主机 O 上运行如下命令应该就可以登陆 A 主机。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh -p 3333 cal@localhost</span><br></pre></td></tr></table></figure></p>
<p>该命令的含义为，使用 cal 用户登陆本机的 3333 端口。上面已经说过，访问 O 的 3333 端口与访问 A 的 22 端口效果相同，那么我们就成功从  O 主机登陆了 A 主机。</p>
<p>但此时我们仍只能从 O 主机本机上登陆 A 主机，无法从其他主机登陆，因此需要再对 3333 端口进行一次端口转发，使其他主机可以访问。具体命令为<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh -fCNL [O 主机 IP 或省略]:[转发端口]:[O 主机 IP]:[被转发端口] [登陆 O 主机的用户名@O 主机的 IP]</span><br></pre></td></tr></table></figure></p>
<p>此处我们想要将 3333 端口转发到 2222 端口，因此转发端口为 2222，被转发端口为 3333。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh -fCNL *:2222:localhost:3333 localhost</span><br></pre></td></tr></table></figure></p>
<p>此处 <code>*</code> 表示允许任意其他主机访问，本机的用户名可省略。使用 <code>ps aux | grep 2222</code> 命令来查看正向代理是否运行成功。此处 2222 端口为本地转发端口，负责与外网进行通信，并将数据转发到 3333 端口，实现了可以从其他主机访问的功能。</p>
<h3 id="展现奇迹的时候到了"><a href="#展现奇迹的时候到了" class="headerlink" title="展现奇迹的时候到了"></a>展现奇迹的时候到了</h3><p>到次为至，我们已经配置好了 AO 主机，那么我们可以从任意可联网的设备登录到计算平台中去啦。指令为<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh -p 2222 cal@123.123.123.123</span><br></pre></td></tr></table></figure></p>
<p>我们实现了从任意地方连入内网计算平台的连接！</p>
<h3 id="这种反向代理是不稳定的"><a href="#这种反向代理是不稳定的" class="headerlink" title="这种反向代理是不稳定的"></a>这种反向代理是不稳定的</h3><p>不幸的是这种 ssh 连接会因为超时和网络堵塞等原因而关闭，那么从的外网连通内网的通道就无法维持了，为此我们需要维持稳定 ssh 反向代理隧道的方法。</p>
<h4 id="配置-ssh-key-实现免密登陆"><a href="#配置-ssh-key-实现免密登陆" class="headerlink" title="配置 ssh key 实现免密登陆"></a>配置 ssh key 实现免密登陆</h4><p>在使用 ssh 进行连接时，每次都需要输入密码，一方面不安全，另一方面也为我们接下来使用的自动化工具带来了阻碍。</p>
<p>首先登陆 A 主机，并运行如下命令生成公钥私钥对。中间的配置过程一路回车即可。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh-keygen -t rsa -C <span class="string">"youremail@example.com"</span></span><br></pre></td></tr></table></figure></p>
<p>此时就在 A 主机的 <code>~/.ssh/</code> 目录下生成了公钥与私钥对，接下来我们需要将公钥传到 O 主机上作为我们登陆的一个比对凭证<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh-copy-id server@123.123.123.123</span><br></pre></td></tr></table></figure></p>
<p>此时，我们再使用 <code>ssh server@123.123.123.123</code> 登陆路 O 主机就不再需要密码了。</p>
<h4 id="用-autossh-建立稳定隧道"><a href="#用-autossh-建立稳定隧道" class="headerlink" title="用 autossh 建立稳定隧道"></a>用 autossh 建立稳定隧道</h4><p>从 A 主机到 O 主机的反向代理连接是不稳定的，也就是说，我们需要一个工具来时刻监听着这个连接。一但断开，再次自动重新建立连接即可。幸运的是，已经有人写出了这个工具，那就是 autossh！感谢开源！</p>
<p>CentOS 的官方仓库中并没有这个软件包，我们需要从源码编译安装<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">sudo yum install wget gcc make</span><br><span class="line">wget http://www.harding.motd.ca/autossh/autossh-1.4e.tgz</span><br><span class="line">tar -xf autossh-1.4e.tgz</span><br><span class="line"><span class="built_in">cd</span> autossh-1.4e</span><br><span class="line">./configure</span><br><span class="line">make</span><br><span class="line">sudo make install</span><br></pre></td></tr></table></figure></p>
<p>至此我们已经安装好了 autossh，利用下面的命令来启动守护进程。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">autossh -M 7200 -fCNR 3333:localhost:22 server@123.123.123.123</span><br></pre></td></tr></table></figure></p>
<p>autossh 命令的参数与 ssh 一致，不同的是我们需要指出的 <code>-M`` </code>参数，这个参数指定一个端口，这个端口是外网的 O 主机用来接收内网 A 主机的信息，如果隧道不正常而返回给 A 主机让它实现重新连接。</p>
<h4 id="配置自动启动"><a href="#配置自动启动" class="headerlink" title="配置自动启动"></a>配置自动启动</h4><p>我们需要将 autossh 命令配置在开机自动启动脚本中，免去了每次开机都需要重新运行脚本的麻烦。</p>
<p>我们需要在 A 主机的 <code>/etc/rc.d/rc.local</code> 文件中添加如下内容<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/bin/su -c <span class="string">'/usr/local/bin/autossh -M 7200 -fCNR 3333:localhost:22 server@123.123.123.123'</span> - cal</span><br></pre></td></tr></table></figure></p>
<p>此命令表示，以 cal 用户运行 autossh 命令，这样我们就能够使用 cal 用户反向连接到 A 主机。</p>
<p>为了保险起见，我们需要为自启动脚本添加执行权限<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo chmod +x /etc/rc.d/rc.local</span><br></pre></td></tr></table></figure></p>
<p>至此我们就建立好了稳定的连接隧道。</p>
<h3 id="进一步优化"><a href="#进一步优化" class="headerlink" title="进一步优化"></a>进一步优化</h3><h4 id="保持活连接"><a href="#保持活连接" class="headerlink" title="保持活连接"></a>保持活连接</h4><p>在测试中发现，如果一个连接长时间空置，那么就会冻结。反向代理连接也是一样，此时便只能通过重启 A 主机使连接重置。为保持一个活连接（Keep alive），需要服务端或客户端定时发送心跳包来确保连接活跃，此处我们选择配置服务端的心跳。</p>
<p>在 A 和 O 的 <code>/etc/ssh/sshd_config</code> 文件中添加如下内容<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># server 每隔 60 秒发送一次请求给 client，然后 client 响应，从而保持连接</span></span><br><span class="line">ClientAliveInterval 60</span><br><span class="line"><span class="comment"># server 发出请求后，客户端没有响应得次数达到 3，就自动断开连接，正常情况下，client 不会不响应</span></span><br><span class="line">ClientAliveCountMax 3</span><br></pre></td></tr></table></figure></p>
<h4 id="Windows-SSH-Client-连接提示错误"><a href="#Windows-SSH-Client-连接提示错误" class="headerlink" title="Windows SSH Client 连接提示错误"></a>Windows SSH Client 连接提示错误</h4><p>使用 Windows 的 SSH Client 连接 Linux 运行的 SSH 服务端时，会提示“ssh algorithm negotiation failed”错误，导致此问题的原因是 ssh 升级后，为了安全，默认不再采用原来一些加密算法，我们手工添加进去即可。</p>
<p>在 O 主机的 <code>/etc/ssh/sshd_config</code> 文件中添加如下内容<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># add crypt format for window ssh client</span></span><br><span class="line">Ciphers aes128-cbc,aes192-cbc,aes256-cbc,aes128-ctr,aes192-ctr,aes256-ctr,3des-cbc,arcfour128,arcfour256,arcfour,blowfish-cbc,cast128-cbc</span><br><span class="line">MACs hmac-md5,hmac-sha1,umac-64@openssh.com,hmac-ripemd160,hmac-sha1-96,hmac-md5-96</span><br><span class="line">KexAlgorithms diffie-hellman-group1-sha1,diffie-hellman-group14-sha1,diffie-hellman-group-exchange-sha1,diffie-hellman-group-exchange-sha256,ecdh-sha2-nistp256,ecdh-sha2-nistp384,ecdh-sha2-nistp521,diffie-hellman-group1-sha1,curve25519-sha256@libssh.org</span><br></pre></td></tr></table></figure></p>
<h2 id="参考文献"><a href="#参考文献" class="headerlink" title="参考文献"></a>参考文献</h2><p> <a href="https://www.cnblogs.com/zjutlitao/p/6223486.html" target="_blank" rel="noopener">Windows SSH Client 报 Algorithm negotiation failed 的解决方法之一</a><br> <a href="https://blog.csdn.net/jiangbenchu/article/details/84438959" target="_blank" rel="noopener">使用SSH反向隧道进行内网穿透</a></p>

        
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

    
        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://cycoe.cc/2019/04/30/路由器配置教程/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Cycoe">
      <meta itemprop="description" content="Cycoe's Personal Blog">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Cycoe's Home Page">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            
            <a href="/2019/04/30/路由器配置教程/" class="post-title-link" itemprop="url">路由器配置教程</a>
          
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              
                
              

              <time title="创建时间：2019-04-30 21:19:49 / 修改时间：23:31:55" itemprop="dateCreated datePublished" datetime="2019-04-30T21:19:49+08:00">2019-04-30</time>
            </span>
          
            

            
          

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="fa fa-comment-o"></i>
      </span>
        
      
      <span class="post-meta-item-text">Valine：</span>
    
    <a title="valine" href="/2019/04/30/路由器配置教程/#comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2019/04/30/路由器配置教程/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="初次使用"><a href="#初次使用" class="headerlink" title="初次使用"></a>初次使用</h2><p>拿到新的路由器之后，首先检查外包装是否有破损、路由器是否有划痕、插头是否有使用痕迹、插上电源后指示灯是否正常亮起，以此初步判断路由器是否是全新的，在某东平台上买电子产品要尤其注意。。。</p>
<p>好吧扯远了。。。路由器其实可以算作是一台独立的微型计算机，运行着定制的操作系统（针对路由器我们叫固件）。但路由器又与我们平常见到的电脑不同，因为它没有标准输入输出设备，也就是键盘鼠标和显示器。那我们要怎么对路由器进行控制呢，其实有很多种方式，但无论的使用哪种方式，我们都需要首先连接上路由器。</p>
<ol>
<li>为路由器插上电</li>
<li>连接路由器的方式有两种——有线和无线连接。任选其一即可。<ol>
<li>有线连接：使用网线一头连接路由器的 LAN（Local Area Network）口，一头连接电脑的网线口</li>
<li>无线连接：打开 Wi-Fi 并连接路由器，一般初始名字为 “TP-LINK_XXX”</li>
</ol>
</li>
<li>在浏览器中输入 <code>192.168.1.1</code> 打开路由器管理界面（也可能是其他 IP 地址，一般在路由器底部的标签上可以看到）</li>
<li>这个时候，根据配置向导对路由器进行配置即可。需要注意的是对于校园网，在 WAN 口连接方式中，选择“动态IP”选项。其他的 SSID 名（也就是平常说的 Wi-Fi 名）及密码等根据需要进行配置即可</li>
</ol>
<h2 id="高级配置"><a href="#高级配置" class="headerlink" title="高级配置"></a>高级配置</h2><p>在路由器管理页面中，我们可以看到非常多的配置选项。虽然平常在家庭使用中我们只会用到其中的几个选项，但对于实验室这样一个需要对几十台设备进行管理的场景，里面的一些选项就会非常有用了。</p>
<h3 id="静态-IP-地址绑定"><a href="#静态-IP-地址绑定" class="headerlink" title="静态 IP 地址绑定"></a>静态 IP 地址绑定</h3><p>这是我最常用到的一个功能，通俗的讲就是将一个设备的 IP 的地址固定下来。一个设备在通过路由器连入互联网时，路由器会通过 DHCP（Dynamic Host Configuration Protocol 动态主机设置协议）服务为每个设备随机分配 IP 地址，并且每过一段时间就会改变。那么我们想在局域网中找到另一台设备就需要通过 IP 地址，而静态 IP 地址绑定就是要告诉路由器，我想为一台特定设备分配一个固定的 IP 地址，那么我以后就可以通过这个固定的 IP 地址来找到这台设备。</p>
<p>现在的路由器几乎都有这个功能，一般是在基本设置-LAN 设置-静态地址分配中进行设置。其中“MAC 地址”是设备的硬件地址，是一串唯一的 12 位的十六进制数，在设备出厂时就确定好了。可通过我写的小程序获得。“IP 地址”是你希望该设备使用的 IP 地址。</p>
<h3 id="路由器桥接"><a href="#路由器桥接" class="headerlink" title="路由器桥接"></a>路由器桥接</h3>
        
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

    
        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://cycoe.cc/2019/02/28/从自然数开始/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Cycoe">
      <meta itemprop="description" content="Cycoe's Personal Blog">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Cycoe's Home Page">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            
            <a href="/2019/02/28/从自然数开始/" class="post-title-link" itemprop="url">从自然数开始</a>
          
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              
                
              

              <time title="创建时间：2019-02-28 10:05:58" itemprop="dateCreated datePublished" datetime="2019-02-28T10:05:58+08:00">2019-02-28</time>
            </span>
          
            

            
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2019-08-09 13:58:29" itemprop="dateModified" datetime="2019-08-09T13:58:29+08:00">2019-08-09</time>
              </span>
            
          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Math/" itemprop="url" rel="index">
                    <span itemprop="name">Math</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="fa fa-comment-o"></i>
      </span>
        
      
      <span class="post-meta-item-text">Valine：</span>
    
    <a title="valine" href="/2019/02/28/从自然数开始/#comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2019/02/28/从自然数开始/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="素数（Prime）"><a href="#素数（Prime）" class="headerlink" title="素数（Prime）"></a>素数（Prime）</h2><p>对于一个自然数 $n\in\mathbb{N}$，若其只能被 $1$ 和它本身整除（即只有两个因子），则被称为素数；若其有多于两个因子，则被称为合数。素数是不能够进行质因式分解的最小单元，因此合数具有唯一的质因式分解（质因子不可再分）。</p>
<h3 id="1-的特殊性"><a href="#1-的特殊性" class="headerlink" title="1 的特殊性"></a>1 的特殊性</h3><p>1 能够被 $1$ 及其自身整除，但为了体系的自洽，不认为 $1$ 是素数。有如下两个原因：</p>
<ol>
<li>若 $1$ 是素数，则任意自然数的质因式分解将不是唯一的。$6=2\times 3=1\times 2\times 3$。</li>
<li>任意素数 $p$ 可被分解为 $p=1\times p$，若 $1$ 为素数，则 $p$ 为合数，与 $p$ 为素数相矛盾。</li>
</ol>
<h2 id="寻找素数"><a href="#寻找素数" class="headerlink" title="寻找素数"></a>寻找素数</h2><p>针对素数，我们希望研究：</p>
<ul>
<li>对于任意 $n\in \mathbb{N}$，判断其是否为素数；</li>
<li>对于任意 $n\in \mathbb{N}$，找到所有小于 $n$ 的素数，或等价于求小于 $n$ 的素数的个数；</li>
<li>对于任意 $n\in \mathbb{N}$，求其质因式分解。</li>
</ul>
<h2 id="质因式分解"><a href="#质因式分解" class="headerlink" title="质因式分解"></a>质因式分解</h2><p>前几天，看杂志时发现一个有趣的问题，“对任意一个自然数 $n$，如何求其所有因子的和”。这个问题本身并不困难，但从中可以继续思考质数的相关规律。</p>
<p>既然是要求因子的和，那么我们首先需要用数学语言将因子表示出来。在此之前，我们需要先将这个自然数表示出来。</p>
<p>设 $n$ 有 $m+1$ 个质因子 $p_0 &lt; p_1 &lt; \cdots &lt; p_m$，则存在如下唯一的质因式分解</p>
<script type="math/tex; mode=display">
    n = p_0^{a_0} \times p_1^{a_1} \times \cdots \times p_m^{a_m}</script><p>则 $n$ 的因子 $f$ 满足</p>
<script type="math/tex; mode=display">
    f = p_0^{b_0} \times p_1^{b_1} \times \cdots \times p_m^{b_m}</script><p>其中</p>
<script type="math/tex; mode=display">
    \left\{\begin{array}{c}
        0 \leq b_0 \leq a_0\\
        0 \leq b_1 \leq a_1\\
        \vdots\\
        0 \leq b_m \leq a_m
    \end{array}\right.,\ 
    且\ b_0, b_1, \cdots, b_m \in \mathbb{N}</script><p>记所有质因子之和为 $S(n)$，即为所有满足上式的 $f$ 之和</p>
<script type="math/tex; mode=display">
    \begin{split}
        S(n) &= (p_0^0+p_0^1+\cdots+p_0^{a^0})\times (p_1^0+p_1^1+\cdots+p_1^{a^1})\times \cdots \times (p_m^0+p_m^1+\cdots+p_m^{a^m})\\
        &= \dfrac{p_0^{a_0+1}-1}{p_0-1}\times \dfrac{p_1^{a_1+1}-1}{p_1-1}\times \cdots \times\dfrac{p_m^{a_m+1}-1}{p_m-1}\\
        &= \prod\limits_{i=0}^m \dfrac{p_i^{a_i+1}-1}{p_i-1}
    \end{split}</script><p>至此，我们已经得到已知自然数 $n$ 所有因子和 $S(n)$ 的表达式。接下来验证一下，$24$ 的所有因子有 $1, 2, 3, 4, 6, 8, 12, 24$，求和得 $S_1(24)=60$。$24$ 的质因式分解为 $24=2^3\times3^1$，则 $S_2(24)=(2^0+2^1+2^2+2^3)\times(3^0+3^1)=60$。答案正确！</p>
<hr>
<p>但通过观察发现，表达式的值并不直接与 $n$ 相关，而是与 $n$ 的所有质因子相关。我们知道，因式分解是一个 NPC 问题，我们无法在多项式时间内对 $n$ 进行因式分解。那么，我们有没有办法对 $S(n)$ 进行粗略的估计呢？即有没有办法用 $n$ 来表示 $S(n)$ 的上下界？或者更具体的，$S(n)$ 与 $n$ 是否存在某种倍数关系？</p>
<p>对 $S(n)$ 的表达式进行缩放我们得到</p>
<script type="math/tex; mode=display">
    \begin{split}
        S(n) &= \dfrac{p_0^{a_0+1}-1}{p_0-1}\times \dfrac{p_1^{a_1+1}-1}{p_1-1}\times \cdots \times\dfrac{p_m^{a_m+1}-1}{p_m-1}\\
        &< \dfrac{p_0^{a_0+1}}{p_0-1}\times \dfrac{p_1^{a_1+1}}{p_1-1}\times \cdots \times\dfrac{p_m^{a_m+1}}{p_m-1}\\
        &= \dfrac{p_0}{p_0-1}\times \dfrac{p_1}{p_1-1}\times \cdots \times\dfrac{p_m}{p_m-1}\times n
    \end{split}</script><p>得到</p>
<script type="math/tex; mode=display">
    \dfrac{S(n)}{n} < \dfrac{p_0}{p_0-1}\times \dfrac{p_1}{p_1-1}\times \cdots \times\dfrac{p_m}{p_m-1} = \Pi_p(m)</script><p>接下来，我们希望知道两件事</p>
<ol>
<li>对于任意大的 $m$，$\Pi_p(m)$ 是否存在上界，若 $\Pi_p(m)$ 的上界存在，则 $\dfrac{S(n)}{n}$ 的上界存在。</li>
<li>若$\Pi_p(m)$ 的上界不存在，那么对于确定的 $n$，我们能否得到 $\dfrac{S(n)}{n}$ 的上界。</li>
</ol>
<hr>
<p>首先来解决第一个问题。使用计算机进行计算发现，前 $2^k$ 个质数的 $\Pi_p(2^k)$ 与 $k$ 呈近似线性关系</p>
<script type="math/tex; mode=display">
    \Pi_p(2^k) = ak + b</script><p>另外 $2^k$ 以内的质数的分式乘积 $\Pi_p(\eta)$ 也与 $k$ 呈近似线性关系。</p>
<p>设 $\Pi(n)$ 为前 $n$ 个自然数的类似分式积表达式</p>
<script type="math/tex; mode=display">
    \Pi(n) = \dfrac21 \times \dfrac32 \times \cdots \times \dfrac{n}{n-1} = n</script><p>则前 $n$ 个质数的 $\Pi(n)$ 与 $n$ 呈线性关系。</p>
<p>一个为质数， 一个为自然数，其中必然蕴含着质数分布的某种真理。</p>

        
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

    
        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://cycoe.cc/2018/11/13/正交试验设计/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Cycoe">
      <meta itemprop="description" content="Cycoe's Personal Blog">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Cycoe's Home Page">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            
            <a href="/2018/11/13/正交试验设计/" class="post-title-link" itemprop="url">正交試驗設計</a>
          
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              
                
              

              <time title="创建时间：2018-11-13 08:35:52" itemprop="dateCreated datePublished" datetime="2018-11-13T08:35:52+08:00">2018-11-13</time>
            </span>
          
            

            
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2019-02-28 09:08:30" itemprop="dateModified" datetime="2019-02-28T09:08:30+08:00">2019-02-28</time>
              </span>
            
          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/statistics/" itemprop="url" rel="index">
                    <span itemprop="name">statistics</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="fa fa-comment-o"></i>
      </span>
        
      
      <span class="post-meta-item-text">Valine：</span>
    
    <a title="valine" href="/2018/11/13/正交试验设计/#comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2018/11/13/正交试验设计/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <blockquote>
<p>正交試驗設計是利用正交表來安排與分析多因素試驗的一種設計方法。它是由試驗因素的全部水平組合中，挑選部分有代表性的水平組合進行試驗的，通過對這部分試驗結果的分析瞭解全面試驗的情況，找出最優的水平組合。可以通過代表性很強的少數次試驗，摸清各個因素對試驗指標的影響情況，確定出因素的主次順序，找出較好的生產條件或最佳參數組合。</p>
</blockquote>
<h2 id="正交表的性質"><a href="#正交表的性質" class="headerlink" title="正交表的性質"></a>正交表的性質</h2><h3 id="正交性"><a href="#正交性" class="headerlink" title="正交性"></a>正交性</h3><ol>
<li>均勻分散性：任一列中，不同數字出現的次數相等；</li>
<li>整齊可比性：任兩列中，同一橫行所組成的數字對出現的次數相等；</li>
<li>可置換性：<ol>
<li>正交表各列的地位是平等的，表中各列之間可以相互置換，稱爲列間置換；</li>
<li>正交表各行之間也可相互置換，稱列間置換；</li>
<li>正交表中同一列的水平數字也可以相互置換，稱水平置換。</li>
</ol>
</li>
</ol>
<h3 id="分散均勻性"><a href="#分散均勻性" class="headerlink" title="分散均勻性"></a>分散均勻性</h3><ol>
<li>任一列的各水平都出現，使得部分試驗中包含所有因素的所有水平；</li>
<li>任意兩列間的所有組合全部出現，使任意兩因素間都是全面試驗。</li>
</ol>
<h3 id="綜合可比性"><a href="#綜合可比性" class="headerlink" title="綜合可比性"></a>綜合可比性</h3><ol>
<li>任一列各水平出現的次數都相等；</li>
<li>任兩列間所有可能的組合出現的次數都相等，因此使任一因素各水平的試驗條件相同。</li>
</ol>
<h2 id="拉丁方陣"><a href="#拉丁方陣" class="headerlink" title="拉丁方陣"></a>拉丁方陣</h2><p>拉丁方陣（Latin square）是一種 $n\times n$ 的方陣，在這種 $n\times n$ 的方陣裏，恰有 $n$ 種不同的元素，每一種不同的元素在同一行或同一列裏只出現一次。如下面的三階拉丁方。</p>
<script type="math/tex; mode=display">
\begin{bmatrix}
    1 & 2 & 3\\
    2 & 3 & 1\\
    3 & 1 & 2\\
\end{bmatrix}</script><h3 id="標準型"><a href="#標準型" class="headerlink" title="標準型"></a>標準型</h3><p>當一個拉丁方陣的第一行與第一列的元素按順序排列時，此爲這個拉丁方陣的標準型，英語稱爲 “reduced Latin square, normalized Latin square, or Latin square in standard form”。</p>
<h3 id="構造拉丁方"><a href="#構造拉丁方" class="headerlink" title="構造拉丁方"></a>構造拉丁方</h3><p>同階的拉丁方有多個，構造其中的一個有一種通用的方法。</p>
<p>若 $n$ 爲偶數，則構造第一行爲 $1, 2, n, 3, n-1, 4, n-2, \dots$，之後的每一行都在上一行對應列元素上加一併對 $n$ 取模，即可表示爲如下矩陣。</p>
<script type="math/tex; mode=display">
\begin{bmatrix}
    1 & 2 & n & 3 & n-1 & 4 & n-2 & \cdots\\
    2 & 3 & n+1 & 4 & n & 5 & n-1 & \cdots\\
    \vdots & \vdots & \vdots & \vdots & \vdots & \vdots & \ddots & \vdots\\
    i & i+1 & i+n-1 & i+2 & i+n-2 & i+3 & i+n-3 & \cdots\\
    \vdots & \vdots & \vdots & \vdots & \vdots & \vdots & \ddots & \vdots\\
    n & 1 & n-1 & 2 & n-2 & 3 & n-3 & \cdots\\
\end{bmatrix} \mathrm{mod}\ n</script><p>若 $n$ 爲奇數，則先按偶數法則構造一個拉丁方，然後將上述模式左右對調。</p>
<h3 id="正交拉丁方"><a href="#正交拉丁方" class="headerlink" title="正交拉丁方"></a>正交拉丁方</h3><p>設有兩個階數相同且爲 $n$ 的拉丁方陣$A_1=(a^{(1)}_{i,j})_{n\times n}, A_2=(a^{(2)}_{i,j})_{n\times n}$，其中將所有放置位置相同的元素組合成一個元組，組合成一個新的矩陣 $((a^{(1)}_{i,j}, a^{(2)}_{i,j}))_{n\times n}$。當這個新的矩陣 $((a^{(1)}_{i,j}, a^{(2)}_{i,j}))_{n\times n}$ 中每一個元素互不相同時，拉丁方陣 $A_1$ 和 $A_2$ 是互相正交的。此時，$A_1$ 和 $A_2$ 即爲一對正交拉丁方。 而在階數固定的情況下，所有兩兩正交的拉丁方所成的集合稱爲正交拉丁方族。如下面的兩個 3 階拉丁方。</p>
<script type="math/tex; mode=display">
\begin{matrix}
A = \begin{bmatrix}
    1 & 2 & 3\\
    2 & 3 & 1\\
    3 & 1 & 2\\
\end{bmatrix} &
B = \begin{bmatrix}
    1 & 2 & 3\\
    3 & 1 & 2\\
    2 & 3 & 1\\
\end{bmatrix}
\end{matrix}</script><h3 id="素數階拉丁方"><a href="#素數階拉丁方" class="headerlink" title="素數階拉丁方"></a>素數階拉丁方</h3><p>若 $n$ 階拉丁方存在 $r$ 個兩兩正交的拉丁方，那麼 $r\leq n-1$。素數階拉丁方（以 $3, 5, 7, \dots$ 爲階）是完全的，即 $n$ 階正交拉丁方族中有 $n-1$ 個拉丁方。</p>
<h2 id="構造正交表"><a href="#構造正交表" class="headerlink" title="構造正交表"></a>構造正交表</h2><p>因爲素數階拉丁方都可構造完全的正交拉丁方族，則可繼續構造正交表。若把素數 $n$ 作爲水平數，則以 $n$ 階拉丁方構造的正交拉丁方有 $n-1$ 個。以 $n-1$ 作爲因素數構造正交表。</p>
<p>以 3 階拉丁方爲例，3 階正交拉丁方族包含 2 個正交拉丁方，並將對應位置元素合併成二元有序數對。</p>
<script type="math/tex; mode=display">
\begin{matrix}
\begin{bmatrix}
    1 & 2 & 3\\
    2 & 3 & 1\\
    3 & 1 & 2\\
\end{bmatrix} &
\begin{bmatrix}
    1 & 2 & 3\\
    3 & 1 & 2\\
    2 & 3 & 1\\
\end{bmatrix} & = &
\begin{bmatrix}
    11 & 22 & 33\\
    23 & 31 & 12\\
    32 & 13 & 21\\
\end{bmatrix} &
\end{matrix}</script><p>以第一個元素作爲因素 A，第二個元素作爲因素 B，然後與因素 C、D 均勻搭配，構造 4 因素 3 水平正交表。</p>
<div class="table-container">
<table>
<thead>
<tr>
<th>C, A, B, D</th>
<th>1</th>
<th>2</th>
<th>3</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>11</td>
<td>22</td>
<td>33</td>
</tr>
<tr>
<td>2</td>
<td>23</td>
<td>31</td>
<td>12</td>
</tr>
<tr>
<td>3</td>
<td>32</td>
<td>13</td>
<td>21</td>
</tr>
</tbody>
</table>
</div>
<p>展開後爲</p>
<div class="table-container">
<table>
<thead>
<tr>
<th>試驗號</th>
<th>A</th>
<th>B</th>
<th>C</th>
<th>D</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>1</td>
<td>1</td>
<td>1</td>
<td>1</td>
</tr>
<tr>
<td>2</td>
<td>1</td>
<td>2</td>
<td>2</td>
<td>2</td>
</tr>
<tr>
<td>3</td>
<td>1</td>
<td>3</td>
<td>3</td>
<td>3</td>
</tr>
<tr>
<td>4</td>
<td>2</td>
<td>2</td>
<td>3</td>
<td>1</td>
</tr>
<tr>
<td>5</td>
<td>2</td>
<td>3</td>
<td>1</td>
<td>2</td>
</tr>
<tr>
<td>6</td>
<td>2</td>
<td>1</td>
<td>2</td>
<td>3</td>
</tr>
<tr>
<td>7</td>
<td>3</td>
<td>3</td>
<td>2</td>
<td>1</td>
</tr>
<tr>
<td>8</td>
<td>3</td>
<td>1</td>
<td>3</td>
<td>2</td>
</tr>
<tr>
<td>9</td>
<td>3</td>
<td>2</td>
<td>1</td>
<td>3</td>
</tr>
</tbody>
</table>
</div>
<p>若只與一個因素 C 搭配，則可構造 3 因素 3 水平正交表。</p>
<div class="table-container">
<table>
<thead>
<tr>
<th>C, A, B</th>
<th></th>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>11</td>
<td>22</td>
<td>33</td>
</tr>
<tr>
<td>2</td>
<td>23</td>
<td>31</td>
<td>12</td>
</tr>
<tr>
<td>3</td>
<td>32</td>
<td>13</td>
<td>21</td>
</tr>
</tbody>
</table>
</div>
<p>展開後爲</p>
<div class="table-container">
<table>
<thead>
<tr>
<th>試驗號</th>
<th>A</th>
<th>B</th>
<th>C</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>1</td>
<td>1</td>
<td>1</td>
</tr>
<tr>
<td>2</td>
<td>1</td>
<td>2</td>
<td>2</td>
</tr>
<tr>
<td>3</td>
<td>1</td>
<td>3</td>
<td>3</td>
</tr>
<tr>
<td>4</td>
<td>2</td>
<td>2</td>
<td>3</td>
</tr>
<tr>
<td>5</td>
<td>2</td>
<td>3</td>
<td>1</td>
</tr>
<tr>
<td>6</td>
<td>2</td>
<td>1</td>
<td>2</td>
</tr>
<tr>
<td>7</td>
<td>3</td>
<td>3</td>
<td>2</td>
</tr>
<tr>
<td>8</td>
<td>3</td>
<td>1</td>
<td>3</td>
</tr>
<tr>
<td>9</td>
<td>3</td>
<td>2</td>
<td>1</td>
</tr>
</tbody>
</table>
</div>
<p>由此可見，以素數 $n$ 爲水平數設計正交試驗，可滿足 $[n-1, n+1]$ 個因素的設計，並且總共需要 $n^2$ 次試驗。即對於 3 因素 3 水平與 4 因素 3 水平正交試驗具有相同的試驗組數，同爲 9 組。可類似地構造出 $L_9(3^3)$，$L_9(3^4)$，$L_{25}(5^5)$，$L_{25}(5^6)$，$L_{49}(7^7)$，$L_{49}(7^8)$ 等。</p>
<h2 id="參考資料"><a href="#參考資料" class="headerlink" title="參考資料"></a>參考資料</h2><ul>
<li><a href="https://baike.baidu.com/item/%E6%8B%89%E4%B8%81%E6%96%B9%E9%98%B5/4413910?fromtitle=%E6%8B%89%E4%B8%81%E6%96%B9&amp;fromid=7176085" target="_blank" rel="noopener">百度百科-拉丁方</a></li>
<li><a href="https://bkso.baidu.com/item/%E6%AD%A3%E4%BA%A4%E6%8B%89%E4%B8%81%E6%96%B9" target="_blank" rel="noopener">百度百科-正交拉丁方</a></li>
<li><a href="https://baike.baidu.com/item/%E6%8B%89%E4%B8%81%E6%96%B9%E8%AE%BE%E8%AE%A1" target="_blank" rel="noopener">百度百科-拉丁方設計</a></li>
<li><a href="https://wenku.baidu.com/view/7b9965bcbdeb19e8b8f67c1cfad6195f312be8db.html?re=view" target="_blank" rel="noopener">正交表與正交設計</a></li>
</ul>

        
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

    
  </div>

  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><span class="space">&hellip;</span><a class="page-number" href="/page/4/">4</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>



          </div>
          

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Cycoe</p>
  <div class="site-description" itemprop="description">Cycoe's Personal Blog</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        
          <a href="/archives/">
        
          <span class="site-state-item-count">31</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
    
      
      
      <div class="site-state-item site-state-categories">
        
          
            <a href="/categories/">
          
        
        <span class="site-state-item-count">14</span>
        <span class="site-state-item-name">分类</span>
        </a>
      </div>
    
      
      
      <div class="site-state-item site-state-tags">
        
          
            <a href="/tags/">
          
        
        <span class="site-state-item-count">22</span>
        <span class="site-state-item-name">标签</span>
        </a>
      </div>
    
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
      
      
        
      
      
        
      
        <a href="https://github.com/cycoe" title="GitHub &rarr; https://github.com/cycoe" rel="noopener" target="_blank"><i class="fa fa-fw fa-github"></i>GitHub</a>
      </span>
    
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

<div class="copyright">
  &copy; 
  <span itemprop="copyrightYear">2019</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Cycoe</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io" class="theme-link" rel="noopener" target="_blank">Hexo</a> 强力驱动 v3.7.1
  </div>
  <span class="post-meta-divider">|</span>
  <div class="theme-info">
      
    主题 – <a href="https://mist.theme-next.org" class="theme-link" rel="noopener" target="_blank">NexT.Mist</a> v7.4.1
  </div>

        












        
      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js?v=3.1.0"></script>
  <script src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  <script src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
<script src="/js/utils.js?v=7.4.1"></script><script src="/js/motion.js?v=7.4.1"></script>
<script src="/js/schemes/muse.js?v=7.4.1"></script>

<script src="/js/next-boot.js?v=7.4.1"></script>



  





















  

  
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
        
      
    
      
    
  
    
  

  

  


<script>
NexT.utils.getScript('//unpkg.com/valine/dist/Valine.min.js', () => {
  var GUEST = ['nick', 'mail', 'link'];
  var guest = 'nick,mail,link';
  guest = guest.split(',').filter(item => {
    return GUEST.includes(item);
  });
  new Valine({
    el: '#comments',
    verify: false,
    notify: false,
    appId: 'JMPgCt4i5QXYiepmd7ADdLfm-gzGzoHsz',
    appKey: 'z6zWp6MXVNc4WnbBOCkVw3Ir',
    placeholder: "此处评论",
    avatar: 'mm',
    meta: guest,
    pageSize: '10' || 10,
    visitor: false,
    lang: '' || 'zh-cn',
    path: location.pathname,
    recordIP: false,
    serverURLs: ''
  });
}, window.Valine);
</script>

</body>
</html>
