<!DOCTYPE html>



  


<html class="theme-next mist use-motion" lang="zh-CN">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2"/>
<meta name="theme-color" content="#222">












<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />






















<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=6.1.0" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=6.1.0">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=6.1.0">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=6.1.0">


  <link rel="mask-icon" href="/images/logo.svg?v=6.1.0" color="#222">









<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Mist',
    version: '6.1.0',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: false,
    fastclick: false,
    lazyload: false,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>


  




  <meta name="description" content="Cycoe&apos;s Personal Blog">
<meta name="keywords" content="python, 化学, 渗透测试">
<meta property="og:type" content="website">
<meta property="og:title" content="Cycoe&#39;s Home Page">
<meta property="og:url" content="http://cycoe.cc/index.html">
<meta property="og:site_name" content="Cycoe&#39;s Home Page">
<meta property="og:description" content="Cycoe&apos;s Personal Blog">
<meta property="og:locale" content="zh-CN">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Cycoe&#39;s Home Page">
<meta name="twitter:description" content="Cycoe&apos;s Personal Blog">






  <link rel="canonical" href="http://cycoe.cc/"/>



<script type="text/javascript" id="page.configurations">
  CONFIG.page = {
    sidebar: "",
  };
</script>

  <title>Cycoe's Home Page</title>
  









  <noscript>
  <style type="text/css">
    .use-motion .motion-element,
    .use-motion .brand,
    .use-motion .menu-item,
    .sidebar-inner,
    .use-motion .post-block,
    .use-motion .pagination,
    .use-motion .comments,
    .use-motion .post-header,
    .use-motion .post-body,
    .use-motion .collection-title { opacity: initial; }

    .use-motion .logo,
    .use-motion .site-title,
    .use-motion .site-subtitle {
      opacity: initial;
      top: initial;
    }

    .use-motion {
      .logo-line-before i { left: initial; }
      .logo-line-after i { right: initial; }
    }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-CN">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Cycoe's Home Page</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">Simple is better than complex. Complex is better than complicated.</p>
      
  </div>

  <div class="site-nav-toggle">
    <button aria-label="切换导航栏">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>




<nav class="site-nav">
  
    <ul id="menu" class="menu">
      
        
        
          
  
  <li class="menu-item menu-item-home menu-item-active">
    <a href="/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-home"></i> <br />首页</a>
</li>

      
        
        
          
  
  <li class="menu-item menu-item-tags">
    <a href="/tags/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />标签</a>
</li>

      
        
        
          
  
  <li class="menu-item menu-item-categories">
    <a href="/categories/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-th"></i> <br />分类</a>
</li>

      
        
        
          
  
  <li class="menu-item menu-item-archives">
    <a href="/archives/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />归档</a>
</li>

      
        
        
          
  
  <li class="menu-item menu-item-about">
    <a href="/about/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-user"></i> <br />关于</a>
</li>

      

      
      
    </ul>
  

  
    

  

  
</nav>



  



</div>
    </header>

    


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://cycoe.cc/2019/08/09/Construct-Dwarf-Fortress-Lazy-Newbee-Package-in-ArchLinux/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Cycoe">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Cycoe's Home Page">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/08/09/Construct-Dwarf-Fortress-Lazy-Newbee-Package-in-ArchLinux/" itemprop="url">
                  Construct Dwarf Fortress Lazy Newbee Package in ArchLinux
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
                
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-08-09T13:36:01+08:00">2019-08-09</time>
            

            
            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Games/" itemprop="url" rel="index"><span itemprop="name">Games</span></a></span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2019/08/09/Construct-Dwarf-Fortress-Lazy-Newbee-Package-in-ArchLinux/#comments" itemprop="discussionUrl">
                  <span class="post-meta-item-text">评论数：</span> <span class="post-comments-count valine-comment-count" data-xid="/2019/08/09/Construct-Dwarf-Fortress-Lazy-Newbee-Package-in-ArchLinux/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="Included-With-This-Package"><a href="#Included-With-This-Package" class="headerlink" title="Included With This Package:"></a>Included With This Package:</h2><p>DwarfFortress-LNP 也就是我们常说的懒人包，由游戏本体、工具包和图形包组成。在 archlinux 上，我们无法通过 aur 简单地安装懒人包，因此我们需要分别安装懒人包中的各个部分来达到同样的效果。</p>
<ul>
<li><a href="http://www.bay12forums.com/smf/index.php?topic=140808.0" target="_blank" rel="noopener">Pidgeot’s PyLNP 0.13 Lazy Newb Pack Python interface</a><ul>
<li>Utilities:<ul>
<li><a href="http://www.bay12forums.com/smf/index.php?topic=139553.0" target="_blank" rel="noopener">DFHack Linux V0.44.09-r1 (gcc 5.4.0)</a></li>
<li><a href="http://www.bay12forums.com/smf/index.php?topic=138754.0" target="_blank" rel="noopener">TWBT 6.41</a></li>
<li><a href="https://github.com/Dwarf-Therapist/Dwarf-Therapist" target="_blank" rel="noopener">Dwarf Therapist v39.3.1</a> (<strong>compiled with qt5.5.1</strong>)</li>
<li><a href="http://df.zweistein.cz/soundsense/" target="_blank" rel="noopener">Soundsense r2016-1</a></li>
<li><a href="http://www.bay12forums.com/smf/index.php?topic=159567.0" target="_blank" rel="noopener">SoundCenSe GTK 1.4.2</a> (<strong>Requires Mono, go <a href="http://www.mono-project.com/download/#download-lin" target="_blank" rel="noopener">HERE</a> for install instructions</strong>)</li>
<li><a href="http://www.joelpt.net/quickfort/" target="_blank" rel="noopener">qfconvert 2.04</a> (<strong>See ./LNP/about/qfconvert.md for usage instructions</strong>)</li>
<li><a href="http://www.bay12forums.com/smf/index.php?topic=130030.0" target="_blank" rel="noopener">DF Announcement Filter 1.01</a> (<strong>Requires Java</strong>)</li>
<li><a href="http://www.bay12forums.com/smf/index.php?topic=155307.0" target="_blank" rel="noopener">Legends Browser 1.17.1</a> (<strong>Requires Java 8</strong>)</li>
<li><a href="http://www.bay12forums.com/smf/index.php?topic=146473.0" target="_blank" rel="noopener">Armok Vision 0.19.1</a></li>
</ul>
</li>
<li>Graphics (Now using <a href="http://www.bay12forums.com/smf/index.php?topic=155882" target="_blank" rel="noopener">fricy’s Updated tilesets</a>!)<ul>
<li>[16x16] ASCII</li>
<li>[16x16] <a href="https://github.com/DFgraphics/Afro-Graphics" target="_blank" rel="noopener">Afro</a></li>
<li>[20x20] <a href="https://github.com/DFgraphics/AutoReiv" target="_blank" rel="noopener">AutoReiv</a></li>
<li>[18x18] <a href="https://github.com/DFgraphics/CLA" target="_blank" rel="noopener">CLA</a></li>
<li>[24x24] <a href="https://github.com/DFgraphics/GemSet" target="_blank" rel="noopener">GemSet</a></li>
<li>[16x16] <a href="https://github.com/DFgraphics/Ironhand" target="_blank" rel="noopener">Ironhand</a></li>
<li>[12x12] <a href="https://github.com/DFgraphics/Jolly-Bastion" target="_blank" rel="noopener">Jolly Bastion</a></li>
<li>[16x16] <a href="https://github.com/DFgraphics/Mayday" target="_blank" rel="noopener">Mayday</a></li>
<li>[32x32] <a href="https://github.com/jecowa/Meph" target="_blank" rel="noopener">Meph-lite</a></li>
<li>[16x16] <a href="https://github.com/DFgraphics/Obsidian" target="_blank" rel="noopener">Obsidian</a></li>
<li>[16x16] <a href="https://github.com/DFgraphics/Phoebus" target="_blank" rel="noopener">Phoebus</a></li>
<li>[16x16] <a href="https://github.com/DFgraphics/Rally-Ho" target="_blank" rel="noopener">Rally Ho</a></li>
<li>[16x16] <a href="https://github.com/DFgraphics/Spacefox" target="_blank" rel="noopener">Spacefox</a></li>
<li>[20x20] <a href="https://github.com/DFgraphics/Taffer" target="_blank" rel="noopener">Taffer</a></li>
<li>[16x16] <a href="https://github.com/DFgraphics/Tergel" target="_blank" rel="noopener">Tergel</a></li>
<li>[16x16] <a href="https://github.com/DFgraphics/Wanderlust" target="_blank" rel="noopener">Wanderlust</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="Utilities"><a href="#Utilities" class="headerlink" title="Utilities"></a>Utilities</h2><h3 id="DFHack-Linux-V0-44-09-r1-gcc-5-4-0"><a href="#DFHack-Linux-V0-44-09-r1-gcc-5-4-0" class="headerlink" title="DFHack Linux V0.44.09-r1 (gcc 5.4.0)"></a><a href="http://www.bay12forums.com/smf/index.php?topic=139553.0" target="_blank" rel="noopener">DFHack Linux V0.44.09-r1 (gcc 5.4.0)</a></h3><p>DfHack is an attempt to unite the various ways hack tools access DF memory and allow for easier development of new tools (and of course, make the game more enjoyable for players).</p>
<p>In archlinux, we can get DfHack by install it with yay:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yay -S dfhack-twbt-bin</span><br></pre></td></tr></table></figure></p>
<p>As we can see, we installed a DfHack version integrated with TWBT. That means we don’t need to install TWBT again. What’s more, package ‘dfhack-twbt-bin’ depends on the package ‘dwarffortress’ in community repository. </p>
<p>But as default, the ‘PKGBIULD’ file of ‘dfhack-twbt-bin’ will download the dfhack binary compiled with gcc-4.8, which provide an out-of-date version of remotefortressreader plugin. To avoid this, you can command the PKGBIULD to download dfhack compiled with gcc-7. To get this magic as below, edit PKGBIULD with editor:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line"><span class="comment"># https://github.com/DFHack/dfhack/releases/download/$_pkgver/dfhack-$_pkgver-Linux-64-gcc-4.8.tar.bz2</span></span><br><span class="line">https://github.com/DFHack/dfhack/releases/download/<span class="variable">$_pkgver</span>/dfhack-<span class="variable">$_pkgver</span>-Linux-64-gcc-7.tar.bz2</span><br><span class="line">...</span><br><span class="line">md5sums=(<span class="string">'e630ae2fc93c6c7b55552336da2b6c07'</span></span><br><span class="line">         <span class="string">'3853c6f890d3541f710f2c4833a9e696'</span></span><br><span class="line">         <span class="string">'6730da5fec400ece9102552e77996fcb'</span></span><br><span class="line">         <span class="string">'052a58e7f5f1af8be3ddefe9677b8fc6'</span></span><br><span class="line">         <span class="comment"># 'e200a6225dcf285e2eac19c1d1e118ea'</span></span><br><span class="line">         <span class="string">'bdbe256099ec9ffd90f391f0d069742f'</span></span><br><span class="line">         <span class="string">'8eac5ae59dad0397090c4f50d50ef841'</span>)</span><br><span class="line">...</span><br></pre></td></tr></table></figure></p>
<p>Then run <code>makepkg</code> to download lacking files.</p>
<h3 id="TWBT-6-41"><a href="#TWBT-6-41" class="headerlink" title="TWBT 6.41"></a><a href="http://www.bay12forums.com/smf/index.php?topic=138754.0" target="_blank" rel="noopener">TWBT 6.41</a></h3><p>This plugin improves various aspects the game interface.</p>
<p>Originally I wrote a small plugin because I was tired seeing coffins instead of zeroes and all that stuff. It has greately evolved since then. Some functions may not work or have issues in Adventurer Mode. See readme for all details.</p>
<ol>
<li>Main function is to use separate fonts (tilesets) for map tiles and for text. Text and map font may also have different sizes. Map tiles can have any size, no requirement to have at least 80x25 grid anymore.</li>
<li>Multi-level rendering.</li>
<li>Allows to override tile numbers for buildings, items and various tile types.</li>
<li><code>mapshot</code> command saves image of the entire map in full size.</li>
<li>“Multilayered” rendering where floor is visible behind buildings and items. (see here for details)</li>
<li>Tiles can have parts that will and parts that will not be affected by material colour. (see here for details)</li>
<li>“Multilayered” rendering for units too. (see here for details)</li>
<li>An option to hide stockpiles (background, not items of course) unless in [q], [p] and [k] modes. (see here for details)</li>
</ol>
<p>To make a long story short, TWBT can greately improve the graphics.</p>
<h3 id="Dwarf-Therapist-v39-3-1-compiled-with-qt5-5-1"><a href="#Dwarf-Therapist-v39-3-1-compiled-with-qt5-5-1" class="headerlink" title="Dwarf Therapist v39.3.1 (compiled with qt5.5.1)"></a><a href="https://github.com/Dwarf-Therapist/Dwarf-Therapist" target="_blank" rel="noopener">Dwarf Therapist v39.3.1</a> (<strong>compiled with qt5.5.1</strong>)</h3><p>Another life-change utility, as it can access memory when df is running, then you can manage then labor of dwarves with it. (Conflict with auto-labor in DfHack)</p>
<p>You can install it with <code>yay -S dwarftherapist-git</code>. It’s a GUI program written with Qt. Open it after you opened a map in df, then you can see the labor informations organized in table.</p>
<h3 id="Soundsense-r2016-1"><a href="#Soundsense-r2016-1" class="headerlink" title="Soundsense r2016-1"></a><a href="http://df.zweistein.cz/soundsense/" target="_blank" rel="noopener">Soundsense r2016-1</a></h3><p>Sound package for df that can be installed with <code>yay -S soundsense</code>. It provide sounds by parsing event changes in <code>~/.dwarffortress/gamelog.txt</code>.</p>
<h3 id="SoundCenSe-GTK-1-4-2-Requires-Mono-go-HERE-for-install-instructions"><a href="#SoundCenSe-GTK-1-4-2-Requires-Mono-go-HERE-for-install-instructions" class="headerlink" title="SoundCenSe GTK 1.4.2 (Requires Mono, go HERE for install instructions)"></a><a href="http://www.bay12forums.com/smf/index.php?topic=159567.0" target="_blank" rel="noopener">SoundCenSe GTK 1.4.2</a> (<strong>Requires Mono, go <a href="http://www.mono-project.com/download/#download-lin" target="_blank" rel="noopener">HERE</a> for install instructions</strong>)</h3><p>Maybe a fork of Soundsense written by c# and GTK2, by I never run successfully.</p>
<h3 id="qfconvert-2-04-See-LNP-about-qfconvert-md-for-usage-instructions"><a href="#qfconvert-2-04-See-LNP-about-qfconvert-md-for-usage-instructions" class="headerlink" title="qfconvert 2.04 (See ./LNP/about/qfconvert.md for usage instructions)"></a><a href="http://www.joelpt.net/quickfort/" target="_blank" rel="noopener">qfconvert 2.04</a> (<strong>See ./LNP/about/qfconvert.md for usage instructions</strong>)</h3><p>Quickfort 2 is a utility for Dwarf Fortress that helps you build fortresses from “blueprint” .CSV, .XLS, and .XLSX files.</p>
<h3 id="DF-Announcement-Filter-1-01-Requires-Java"><a href="#DF-Announcement-Filter-1-01-Requires-Java" class="headerlink" title="DF Announcement Filter 1.01 (Requires Java)"></a><a href="http://www.bay12forums.com/smf/index.php?topic=130030.0" target="_blank" rel="noopener">DF Announcement Filter 1.01</a> (<strong>Requires Java</strong>)</h3><p>This utility gives you a live feed of announcements without having to pause the game to check the announcement page. It’s configurable, allowing you to only see the announcements you’re actually interested in, and you can also have combat announcements show up in the feed rather than checking the reports screen.</p>
<h3 id="Legends-Browser-1-17-1-Requires-Java-8"><a href="#Legends-Browser-1-17-1-Requires-Java-8" class="headerlink" title="Legends Browser 1.17.1 (Requires Java 8)"></a><a href="http://www.bay12forums.com/smf/index.php?topic=155307.0" target="_blank" rel="noopener">Legends Browser 1.17.1</a> (<strong>Requires Java 8</strong>)</h3><p>Legends Browser is an multi-platform, open source, java-based legends viewer for dwarf fortress 0.44. You can read about the legends and stories in browser interactively. You can download the latest release version in <a href="https://github.com/robertjanetzko/LegendsBrowser/releases" target="_blank" rel="noopener">this page</a>, then run it with <code>java -jar legendsbrowser-1.17.1.jar</code>. Before that, you should export a xml file in legend mode.</p>
<h3 id="Armok-Vision-0-19-1"><a href="#Armok-Vision-0-19-1" class="headerlink" title="Armok Vision 0.19.1"></a><a href="http://www.bay12forums.com/smf/index.php?topic=146473.0" target="_blank" rel="noopener">Armok Vision 0.19.1</a></h3><p>A 3d realtime visualizer for Dwarf Fortress rendering with unity, similar with stonesense, but can run independent with df.</p>
<h2 id="Graphics"><a href="#Graphics" class="headerlink" title="Graphics"></a>Graphics</h2><p>I prefer the Spacefox graphics pack. <a href="https://github.com/cycoe/Spacefox" target="_blank" rel="noopener">This is a fork</a> with installation script.</p>

          
        
      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://cycoe.cc/2019/05/09/常用粤语语气词发音与含义/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Cycoe">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Cycoe's Home Page">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/05/09/常用粤语语气词发音与含义/" itemprop="url">
                  常用粤语语气词发音与含义
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
                
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-05-09T18:32:59+08:00">2019-05-09</time>
            

            
            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2019/05/09/常用粤语语气词发音与含义/#comments" itemprop="discussionUrl">
                  <span class="post-meta-item-text">评论数：</span> <span class="post-comments-count valine-comment-count" data-xid="/2019/05/09/常用粤语语气词发音与含义/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>最近发现粤语的语气词使用的非常多，这一点与温州话比较相似，因此特地总结了如下一些常用的粤语语气词的发音与用法。</p>
<h2 id="的、地、得"><a href="#的、地、得" class="headerlink" title="的、地、得"></a>的、地、得</h2><p>在普通话中，的、地、得都发音为 de，而在粤语中三个“的” 的发音都不相同。</p>
<div class="table-container">
<table>
<thead>
<tr>
<th>字</th>
<th>发音</th>
<th>含义</th>
<th>用法</th>
</tr>
</thead>
<tbody>
<tr>
<td>嘅</td>
<td>ge3</td>
<td>类似于普通话的“的”</td>
<td>小明嘅書包</td>
</tr>
<tr>
<td>咁</td>
<td>gam3</td>
<td>这样，这么，如此，可替换普通话的“地”</td>
<td>佢狼吞虎咽咁食</td>
</tr>
<tr>
<td>得</td>
<td>dak1</td>
<td>类似于普通话的“得”</td>
<td>佢写得一手好文章</td>
</tr>
<tr>
<td>到</td>
<td>dou3</td>
<td>类似于“得”，可表示程度</td>
<td>食得（到）一干二净</td>
</tr>
</tbody>
</table>
</div>
<h2 id="语气词"><a href="#语气词" class="headerlink" title="语气词"></a>语气词</h2><div class="table-container">
<table>
<thead>
<tr>
<th>字</th>
<th>发音</th>
<th>含义</th>
<th>用法</th>
</tr>
</thead>
<tbody>
<tr>
<td>哋</td>
<td>dei2</td>
<td>用於人稱代詞後，相當於“們”</td>
<td>我哋；佢哋</td>
</tr>
<tr>
<td>呃</td>
<td>ak1</td>
<td>騙</td>
<td>你成日呃我！</td>
</tr>
<tr>
<td>咁</td>
<td>gam3</td>
<td>这样，这么，如此</td>
<td>件衫咁貴</td>
</tr>
<tr>
<td>噉</td>
<td>gam2</td>
<td>這樣，那樣</td>
<td>噉都得？</td>
</tr>
<tr>
<td>咩</td>
<td>me1</td>
<td>表疑问，什么</td>
<td>做咩啊？</td>
</tr>
<tr>
<td>唔</td>
<td>m4</td>
<td>不</td>
<td>唔好</td>
</tr>
<tr>
<td>咗</td>
<td>zo2</td>
<td>了</td>
<td>我食咗飯了</td>
</tr>
<tr>
<td>唧</td>
<td>zik1</td>
<td>用水射击</td>
<td>唧水</td>
</tr>
<tr>
<td>喎</td>
<td>wo5</td>
<td>语气词，常用在表达别人的吩咐</td>
<td>佢叫你今日去開會喎</td>
</tr>
<tr>
<td>啲</td>
<td>di1</td>
<td>表數量，若幹；少許；一點（大致有個確定數量）</td>
<td>畀啲錢佢；落啲胡椒粉</td>
</tr>
<tr>
<td>啩</td>
<td>gwaa5</td>
<td>語氣詞，相當於“吧”</td>
<td>你唔走啩</td>
</tr>
<tr>
<td>啱</td>
<td>ngaam1</td>
<td>合；合適；對；行；可以</td>
<td>呢種款式～心水；你講得～</td>
</tr>
<tr>
<td>喺</td>
<td>hai2</td>
<td>在</td>
<td>你喺邊度等我</td>
</tr>
<tr>
<td>嚟</td>
<td>lai4</td>
<td>來，起來</td>
<td>過嚟</td>
</tr>
<tr>
<td>嘢</td>
<td>je5</td>
<td>東西</td>
<td>有嘢食</td>
</tr>
<tr>
<td>嘥</td>
<td>saai1</td>
<td>浪費；糟蹋</td>
<td>返一次工就嘥好多錢</td>
</tr>
<tr>
<td>嗮</td>
<td>saai3</td>
<td>完全</td>
<td>啲飯倒嗮</td>
</tr>
<tr>
<td>嗌</td>
<td>aai3</td>
<td>咽喉窒塞；叫</td>
<td>嗌救命</td>
</tr>
<tr>
<td>嗰</td>
<td>go3</td>
<td>指示代詞，那</td>
<td>嗰個；嗰啲（那些）</td>
</tr>
<tr>
<td>叻</td>
<td>lek1</td>
<td>能幹</td>
<td>叻仔</td>
</tr>
<tr>
<td>喇</td>
<td>laa1</td>
<td>了</td>
<td>走得喇</td>
</tr>
</tbody>
</table>
</div>

          
        
      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://cycoe.cc/2019/04/30/反向SSH实现内网穿透/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Cycoe">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Cycoe's Home Page">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/04/30/反向SSH实现内网穿透/" itemprop="url">
                  反向SSH实现内网穿透
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
                
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-04-30T23:42:57+08:00">2019-04-30</time>
            

            
            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2019/04/30/反向SSH实现内网穿透/#comments" itemprop="discussionUrl">
                  <span class="post-meta-item-text">评论数：</span> <span class="post-comments-count valine-comment-count" data-xid="/2019/04/30/反向SSH实现内网穿透/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>最近实验室又配置了一台新的计算平台，噪声堪比飞机起飞，再加上本校区不允许实验过夜，只能将其安置在学校外面。但从学校到计算平台车程 40Km，每次都过去做计算显然不现实，如果能从学校直接远程连接是最好的。</p>
<p>通过相关资料的查询及对专业人士的请教，找到如下几种解决方法:</p>
<ol>
<li>联系网络运营商将动态 IP 转为静态的公网 IP，这样就可以直接从学校的内网连接到计算平台，是最完美的解决方案。但是查询资费后发现，价钱不那么完美，一个月 6000 块大洋怎么负担得起啊！</li>
<li>主机 A 使用 TeamViewer 连接至计算平台局域网下的另一台主机 B，再控制 B 使用 SSH 连接至计算平台。这种方法包含几个明显的弊端：<ol>
<li>操作麻烦，需要经过两层的文件传输及控制；</li>
<li>虽然 TeamViewer 有个人的免费使用许可，但最近审查日益严格，经常使用几分钟就被强制下线；</li>
<li>TeamViewer 基于 GUI 远程控制，对网络要求很高；</li>
<li>最重要的一点，一个好的解决方案应该形成一个“黑箱”，而不应该把内部细节暴露给用户；</li>
</ol>
</li>
<li>从计算平台使用反向 SSH 连接到云服务器，从而建立起从云服务器到计算平台的隧道连接。这种方法传输的速度上限在于云服务器的带宽，最大的优点在于实现了一个“鸭子类型”，使用 SSH 连接计算平台与连接局域网内的主机无异。</li>
</ol>
<h2 id="SSH-协议与应用"><a href="#SSH-协议与应用" class="headerlink" title="SSH 协议与应用"></a>SSH 协议与应用</h2><blockquote>
<p>SSH 为 Secure Shell 的缩写，由 IETF 的网络小组（Network Working Group）所制定；SSH 为建立在应用层基础上的安全协议。SSH 是目前较可靠，专为远程登录会话和其他网络服务提供安全性的协议。利用 SSH 协议可以有效防止远程管理过程中的信息泄露问题。SSH 最初是 UNIX 系统上的一个程序，后来又迅速扩展到其他操作平台。SSH 在正确使用时可弥补网络中的漏洞。SSH 客户端适用于多种平台。几乎所有 UNIX 平台—包括 HP-UX、Linux、AIX、Solaris、Digital UNIX、Irix，以及其他平台，都可运行 SSH。</p>
</blockquote>
<p>以上对 SSH 的解释来自<a href="https://baike.baidu.com/item/ssh/10407?fr=aladdin" target="_blank" rel="noopener">百度百科</a>，别问我为什么不用 Wikipedia。从中我们看到，SSH 是建立在应用层基础上的一种安全协议，可以用来进行远程控制，或在计算机之间传送文件，比传统的 telnet 或 ftp 协议要更安全。Linux 下最常使用的就是 OpenSSH。OpenSSH 是 SSH 协议的免费开源实现，提供了服务端后台程序（SSH Daemon）和客户端工具(SSH Client)。主机可以通过 SSH 客户端连接运行了 SSH 服务端的主机。</p>
<h2 id="网络拓扑分析"><a href="#网络拓扑分析" class="headerlink" title="网络拓扑分析"></a>网络拓扑分析</h2><p>互联网是一张巨大的网，其中所有的主机都由有线或无线的方式相连，但并不代表任意两台主机都能互相可见。网络是有方向的，与其说是网我觉得更像一棵树。网络在向下进行传输时，会经过 NAT（Network Address Translation 网络地址转换），因此外网的主机无法直接访问内网的主机。</p>
<p>在我们本次遇到的问题中，网络连接可表示为如下的拓扑结构。<br><img src="/2019/04/30/反向SSH实现内网穿透/topology.png" title="网络拓扑结构"></p>
<p>各个主机的 IP 地址如下表所示</p>
<div class="table-container">
<table>
<thead>
<tr>
<th>主机名</th>
<th>IP</th>
<th>用户名</th>
<th>备注</th>
</tr>
</thead>
<tbody>
<tr>
<td>计算平台 A</td>
<td>10.0.0.100</td>
<td>cal</td>
<td>目标主机，处于内网</td>
</tr>
<tr>
<td>控制端 B</td>
<td>192.168.1.100</td>
<td>client</td>
<td>控制主机，处于内网</td>
</tr>
<tr>
<td>云服务器 O</td>
<td>123.123.123.123</td>
<td>server</td>
<td>公网服务器，起桥梁作用</td>
</tr>
</tbody>
</table>
</div>
<p>其中 A、B 能够访问 O，但 O 不能访问 A、B，并且 A、B 之间不能直接互相访问。我们最后要实现的目标就是使用 B 访问 A。</p>
<h2 id="解决方法"><a href="#解决方法" class="headerlink" title="解决方法"></a>解决方法</h2><p>通俗地说：就是在主机 A 上做到 O 的反向代理；然后在 O 上做正向的代理实现本地端口的转发。</p>
<h3 id="准备工作"><a href="#准备工作" class="headerlink" title="准备工作"></a>准备工作</h3><p>A、B、O 上都要安装 SSH Client，A、O 上需要安装 SSH Daemon。</p>
<p>需要用到的 ssh 参数<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">反向代理</span><br><span class="line">ssh -fCNR</span><br></pre></td></tr></table></figure></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">正向代理</span><br><span class="line">ssh -fCNL</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">-f 后台执行 ssh 指令</span><br><span class="line">-C 允许压缩数据</span><br><span class="line">-N 不执行远程指令</span><br><span class="line">-R 将远程主机（服务器）的某个端口转发到本地端指定主机的指定端口</span><br><span class="line">-L 将本地机（客户机）的某个端口转发到远端指定主机的指定端口</span><br><span class="line">-p 指定远程主机的端口</span><br></pre></td></tr></table></figure>
<h3 id="反向代理"><a href="#反向代理" class="headerlink" title="反向代理"></a>反向代理</h3><p>首先在 A 主机上操作，建立 A 到 O 的反向代理，具体命令为<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh -fCNR [O 主机 IP 或省略]:[O 主机端口]:[A 主机 IP ]:[A 主机端口] [O 主机的用户名@O 主机 IP]</span><br></pre></td></tr></table></figure></p>
<p>在这里我使用了 O 主机的 3333 端口，以及 A 主机的 22 端口，按照以上命令即为<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh -fCNR 3333:localhost:22 server@123.123.123.123</span><br></pre></td></tr></table></figure></p>
<p>此时我们就将 O 的 3333 端口映射到了 A 的 22 端口，也就是说访问 O 的 3333 端口与访问 A 的 22 端口效果相同。</p>
<p>使用 <code>ps aux | grep 3333</code> 命令来查看反向代理是否运行成功。</p>
<h3 id="正向代理"><a href="#正向代理" class="headerlink" title="正向代理"></a>正向代理</h3><p>接下来在 O 主机上操作。完成上一步的反向代理后，在主机 O 上运行如下命令应该就可以登陆 A 主机。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh -p 3333 cal@localhost</span><br></pre></td></tr></table></figure></p>
<p>该命令的含义为，使用 cal 用户登陆本机的 3333 端口。上面已经说过，访问 O 的 3333 端口与访问 A 的 22 端口效果相同，那么我们就成功从  O 主机登陆了 A 主机。</p>
<p>但此时我们仍只能从 O 主机本机上登陆 A 主机，无法从其他主机登陆，因此需要再对 3333 端口进行一次端口转发，使其他主机可以访问。具体命令为<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh -fCNL [O 主机 IP 或省略]:[转发端口]:[O 主机 IP]:[被转发端口] [登陆 O 主机的用户名@O 主机的 IP]</span><br></pre></td></tr></table></figure></p>
<p>此处我们想要将 3333 端口转发到 2222 端口，因此转发端口为 2222，被转发端口为 3333。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh -fCNL *:2222:localhost:3333 localhost</span><br></pre></td></tr></table></figure></p>
<p>此处 <code>*</code> 表示允许任意其他主机访问，本机的用户名可省略。使用 <code>ps aux | grep 2222</code> 命令来查看正向代理是否运行成功。此处 2222 端口为本地转发端口，负责与外网进行通信，并将数据转发到 3333 端口，实现了可以从其他主机访问的功能。</p>
<h3 id="展现奇迹的时候到了"><a href="#展现奇迹的时候到了" class="headerlink" title="展现奇迹的时候到了"></a>展现奇迹的时候到了</h3><p>到次为至，我们已经配置好了 AO 主机，那么我们可以从任意可联网的设备登录到计算平台中去啦。指令为<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh -p 2222 cal@123.123.123.123</span><br></pre></td></tr></table></figure></p>
<p>我们实现了从任意地方连入内网计算平台的连接！</p>
<h3 id="这种反向代理是不稳定的"><a href="#这种反向代理是不稳定的" class="headerlink" title="这种反向代理是不稳定的"></a>这种反向代理是不稳定的</h3><p>不幸的是这种 ssh 连接会因为超时和网络堵塞等原因而关闭，那么从的外网连通内网的通道就无法维持了，为此我们需要维持稳定 ssh 反向代理隧道的方法。</p>
<h4 id="配置-ssh-key-实现免密登陆"><a href="#配置-ssh-key-实现免密登陆" class="headerlink" title="配置 ssh key 实现免密登陆"></a>配置 ssh key 实现免密登陆</h4><p>在使用 ssh 进行连接时，每次都需要输入密码，一方面不安全，另一方面也为我们接下来使用的自动化工具带来了阻碍。</p>
<p>首先登陆 A 主机，并运行如下命令生成公钥私钥对。中间的配置过程一路回车即可。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh-keygen -t rsa -C <span class="string">"youremail@example.com"</span></span><br></pre></td></tr></table></figure></p>
<p>此时就在 A 主机的 <code>~/.ssh/</code> 目录下生成了公钥与私钥对，接下来我们需要将公钥传到 O 主机上作为我们登陆的一个比对凭证<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh-copy-id server@123.123.123.123</span><br></pre></td></tr></table></figure></p>
<p>此时，我们再使用 <code>ssh server@123.123.123.123</code> 登陆路 O 主机就不再需要密码了。</p>
<h4 id="用-autossh-建立稳定隧道"><a href="#用-autossh-建立稳定隧道" class="headerlink" title="用 autossh 建立稳定隧道"></a>用 autossh 建立稳定隧道</h4><p>从 A 主机到 O 主机的反向代理连接是不稳定的，也就是说，我们需要一个工具来时刻监听着这个连接。一但断开，再次自动重新建立连接即可。幸运的是，已经有人写出了这个工具，那就是 autossh！感谢开源！</p>
<p>CentOS 的官方仓库中并没有这个软件包，我们需要从源码编译安装<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">sudo yum install wget gcc make</span><br><span class="line">wget http://www.harding.motd.ca/autossh/autossh-1.4e.tgz</span><br><span class="line">tar -xf autossh-1.4e.tgz</span><br><span class="line"><span class="built_in">cd</span> autossh-1.4e</span><br><span class="line">./configure</span><br><span class="line">make</span><br><span class="line">sudo make install</span><br></pre></td></tr></table></figure></p>
<p>至此我们已经安装好了 autossh，利用下面的命令来启动守护进程。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">autossh -M 7200 -fCNR 3333:localhost:22 server@123.123.123.123</span><br></pre></td></tr></table></figure></p>
<p>autossh 命令的参数与 ssh 一致，不同的是我们需要指出的 <code>-M`` </code>参数，这个参数指定一个端口，这个端口是外网的 O 主机用来接收内网 A 主机的信息，如果隧道不正常而返回给 A 主机让它实现重新连接。</p>
<h4 id="配置自动启动"><a href="#配置自动启动" class="headerlink" title="配置自动启动"></a>配置自动启动</h4><p>我们需要将 autossh 命令配置在开机自动启动脚本中，免去了每次开机都需要重新运行脚本的麻烦。</p>
<p>我们需要在 A 主机的 <code>/etc/rc.d/rc.local</code> 文件中添加如下内容<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/bin/su -c <span class="string">'/usr/local/bin/autossh -M 7200 -fCNR 3333:localhost:22 server@123.123.123.123'</span> - cal</span><br></pre></td></tr></table></figure></p>
<p>此命令表示，以 cal 用户运行 autossh 命令，这样我们就能够使用 cal 用户反向连接到 A 主机。</p>
<p>为了保险起见，我们需要为自启动脚本添加执行权限<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo chmod +x /etc/rc.d/rc.local</span><br></pre></td></tr></table></figure></p>
<p>至此我们就建立好了稳定的连接隧道。</p>
<h3 id="进一步优化"><a href="#进一步优化" class="headerlink" title="进一步优化"></a>进一步优化</h3><h4 id="保持活连接"><a href="#保持活连接" class="headerlink" title="保持活连接"></a>保持活连接</h4><p>在测试中发现，如果一个连接长时间空置，那么就会冻结。反向代理连接也是一样，此时便只能通过重启 A 主机使连接重置。为保持一个活连接（Keep alive），需要服务端或客户端定时发送心跳包来确保连接活跃，此处我们选择配置服务端的心跳。</p>
<p>在 A 和 O 的 <code>/etc/ssh/sshd_config</code> 文件中添加如下内容<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># server 每隔 60 秒发送一次请求给 client，然后 client 响应，从而保持连接</span></span><br><span class="line">ClientAliveInterval 60</span><br><span class="line"><span class="comment"># server 发出请求后，客户端没有响应得次数达到 3，就自动断开连接，正常情况下，client 不会不响应</span></span><br><span class="line">ClientAliveCountMax 3</span><br></pre></td></tr></table></figure></p>
<h4 id="Windows-SSH-Client-连接提示错误"><a href="#Windows-SSH-Client-连接提示错误" class="headerlink" title="Windows SSH Client 连接提示错误"></a>Windows SSH Client 连接提示错误</h4><p>使用 Windows 的 SSH Client 连接 Linux 运行的 SSH 服务端时，会提示“ssh algorithm negotiation failed”错误，导致此问题的原因是 ssh 升级后，为了安全，默认不再采用原来一些加密算法，我们手工添加进去即可。</p>
<p>在 O 主机的 <code>/etc/ssh/sshd_config</code> 文件中添加如下内容<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># add crypt format for window ssh client</span></span><br><span class="line">Ciphers aes128-cbc,aes192-cbc,aes256-cbc,aes128-ctr,aes192-ctr,aes256-ctr,3des-cbc,arcfour128,arcfour256,arcfour,blowfish-cbc,cast128-cbc</span><br><span class="line">MACs hmac-md5,hmac-sha1,umac-64@openssh.com,hmac-ripemd160,hmac-sha1-96,hmac-md5-96</span><br><span class="line">KexAlgorithms diffie-hellman-group1-sha1,diffie-hellman-group14-sha1,diffie-hellman-group-exchange-sha1,diffie-hellman-group-exchange-sha256,ecdh-sha2-nistp256,ecdh-sha2-nistp384,ecdh-sha2-nistp521,diffie-hellman-group1-sha1,curve25519-sha256@libssh.org</span><br></pre></td></tr></table></figure></p>
<h2 id="参考文献"><a href="#参考文献" class="headerlink" title="参考文献"></a>参考文献</h2><p> <a href="https://www.cnblogs.com/zjutlitao/p/6223486.html" target="_blank" rel="noopener">Windows SSH Client 报 Algorithm negotiation failed 的解决方法之一</a><br> <a href="https://blog.csdn.net/jiangbenchu/article/details/84438959" target="_blank" rel="noopener">使用SSH反向隧道进行内网穿透</a></p>

          
        
      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://cycoe.cc/2019/04/30/路由器配置教程/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Cycoe">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Cycoe's Home Page">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/04/30/路由器配置教程/" itemprop="url">
                  路由器配置教程
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
                
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-04-30T21:19:49+08:00">2019-04-30</time>
            

            
            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2019/04/30/路由器配置教程/#comments" itemprop="discussionUrl">
                  <span class="post-meta-item-text">评论数：</span> <span class="post-comments-count valine-comment-count" data-xid="/2019/04/30/路由器配置教程/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="初次使用"><a href="#初次使用" class="headerlink" title="初次使用"></a>初次使用</h2><p>拿到新的路由器之后，首先检查外包装是否有破损、路由器是否有划痕、插头是否有使用痕迹、插上电源后指示灯是否正常亮起，以此初步判断路由器是否是全新的，在某东平台上买电子产品要尤其注意。。。</p>
<p>好吧扯远了。。。路由器其实可以算作是一台独立的微型计算机，运行着定制的操作系统（针对路由器我们叫固件）。但路由器又与我们平常见到的电脑不同，因为它没有标准输入输出设备，也就是键盘鼠标和显示器。那我们要怎么对路由器进行控制呢，其实有很多种方式，但无论的使用哪种方式，我们都需要首先连接上路由器。</p>
<ol>
<li>为路由器插上电</li>
<li>连接路由器的方式有两种——有线和无线连接。任选其一即可。<ol>
<li>有线连接：使用网线一头连接路由器的 LAN（Local Area Network）口，一头连接电脑的网线口</li>
<li>无线连接：打开 Wi-Fi 并连接路由器，一般初始名字为 “TP-LINK_XXX”</li>
</ol>
</li>
<li>在浏览器中输入 <code>192.168.1.1</code> 打开路由器管理界面（也可能是其他 IP 地址，一般在路由器底部的标签上可以看到）</li>
<li>这个时候，根据配置向导对路由器进行配置即可。需要注意的是对于校园网，在 WAN 口连接方式中，选择“动态IP”选项。其他的 SSID 名（也就是平常说的 Wi-Fi 名）及密码等根据需要进行配置即可</li>
</ol>
<h2 id="高级配置"><a href="#高级配置" class="headerlink" title="高级配置"></a>高级配置</h2><p>在路由器管理页面中，我们可以看到非常多的配置选项。虽然平常在家庭使用中我们只会用到其中的几个选项，但对于实验室这样一个需要对几十台设备进行管理的场景，里面的一些选项就会非常有用了。</p>
<h3 id="静态-IP-地址绑定"><a href="#静态-IP-地址绑定" class="headerlink" title="静态 IP 地址绑定"></a>静态 IP 地址绑定</h3><p>这是我最常用到的一个功能，通俗的讲就是将一个设备的 IP 的地址固定下来。一个设备在通过路由器连入互联网时，路由器会通过 DHCP（Dynamic Host Configuration Protocol 动态主机设置协议）服务为每个设备随机分配 IP 地址，并且每过一段时间就会改变。那么我们想在局域网中找到另一台设备就需要通过 IP 地址，而静态 IP 地址绑定就是要告诉路由器，我想为一台特定设备分配一个固定的 IP 地址，那么我以后就可以通过这个固定的 IP 地址来找到这台设备。</p>
<p>现在的路由器几乎都有这个功能，一般是在基本设置-LAN 设置-静态地址分配中进行设置。其中“MAC 地址”是设备的硬件地址，是一串唯一的 12 位的十六进制数，在设备出厂时就确定好了。可通过我写的小程序获得。“IP 地址”是你希望该设备使用的 IP 地址。</p>
<h3 id="路由器桥接"><a href="#路由器桥接" class="headerlink" title="路由器桥接"></a>路由器桥接</h3>
          
        
      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://cycoe.cc/2019/02/28/从自然数开始/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Cycoe">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Cycoe's Home Page">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/02/28/从自然数开始/" itemprop="url">
                  从自然数开始
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
                
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-02-28T10:05:58+08:00">2019-02-28</time>
            

            
            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Math/" itemprop="url" rel="index"><span itemprop="name">Math</span></a></span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2019/02/28/从自然数开始/#comments" itemprop="discussionUrl">
                  <span class="post-meta-item-text">评论数：</span> <span class="post-comments-count valine-comment-count" data-xid="/2019/02/28/从自然数开始/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="素数（Prime）"><a href="#素数（Prime）" class="headerlink" title="素数（Prime）"></a>素数（Prime）</h2><p>对于一个自然数 $n\in\mathbb{N}$，若其只能被 $1$ 和它本身整除（即只有两个因子），则被称为素数；若其有多于两个因子，则被称为合数。素数是不能够进行质因式分解的最小单元，因此合数具有唯一的质因式分解（质因子不可再分）。</p>
<h3 id="1-的特殊性"><a href="#1-的特殊性" class="headerlink" title="1 的特殊性"></a>1 的特殊性</h3><p>1 能够被 $1$ 及其自身整除，但为了体系的自洽，不认为 $1$ 是素数。有如下两个原因：</p>
<ol>
<li>若 $1$ 是素数，则任意自然数的质因式分解将不是唯一的。$6=2\times 3=1\times 2\times 3$。</li>
<li>任意素数 $p$ 可被分解为 $p=1\times p$，若 $1$ 为素数，则 $p$ 为合数，与 $p$ 为素数相矛盾。</li>
</ol>
<h2 id="寻找素数"><a href="#寻找素数" class="headerlink" title="寻找素数"></a>寻找素数</h2><p>针对素数，我们希望研究：</p>
<ul>
<li>对于任意 $n\in \mathbb{N}$，判断其是否为素数；</li>
<li>对于任意 $n\in \mathbb{N}$，找到所有小于 $n$ 的素数，或等价于求小于 $n$ 的素数的个数；</li>
<li>对于任意 $n\in \mathbb{N}$，求其质因式分解。</li>
</ul>
<h2 id="质因式分解"><a href="#质因式分解" class="headerlink" title="质因式分解"></a>质因式分解</h2><p>前几天，看杂志时发现一个有趣的问题，“对任意一个自然数 $n$，如何求其所有因子的和”。这个问题本身并不困难，但从中可以继续思考质数的相关规律。</p>
<p>既然是要求因子的和，那么我们首先需要用数学语言将因子表示出来。在此之前，我们需要先将这个自然数表示出来。</p>
<p>设 $n$ 有 $m+1$ 个质因子 $p_0 &lt; p_1 &lt; \cdots &lt; p_m$，则存在如下唯一的质因式分解</p>
<script type="math/tex; mode=display">
    n = p_0^{a_0} \times p_1^{a_1} \times \cdots \times p_m^{a_m}</script><p>则 $n$ 的因子 $f$ 满足</p>
<script type="math/tex; mode=display">
    f = p_0^{b_0} \times p_1^{b_1} \times \cdots \times p_m^{b_m}</script><p>其中</p>
<script type="math/tex; mode=display">
    \left\{\begin{array}{c}
        0 \leq b_0 \leq a_0\\
        0 \leq b_1 \leq a_1\\
        \vdots\\
        0 \leq b_m \leq a_m
    \end{array}\right.,\ 
    且\ b_0, b_1, \cdots, b_m \in \mathbb{N}</script><p>记所有质因子之和为 $S(n)$，即为所有满足上式的 $f$ 之和</p>
<script type="math/tex; mode=display">
    \begin{split}
        S(n) &= (p_0^0+p_0^1+\cdots+p_0^{a^0})\times (p_1^0+p_1^1+\cdots+p_1^{a^1})\times \cdots \times (p_m^0+p_m^1+\cdots+p_m^{a^m})\\
        &= \dfrac{p_0^{a_0+1}-1}{p_0-1}\times \dfrac{p_1^{a_1+1}-1}{p_1-1}\times \cdots \times\dfrac{p_m^{a_m+1}-1}{p_m-1}\\
        &= \prod\limits_{i=0}^m \dfrac{p_i^{a_i+1}-1}{p_i-1}
    \end{split}</script><p>至此，我们已经得到已知自然数 $n$ 所有因子和 $S(n)$ 的表达式。接下来验证一下，$24$ 的所有因子有 $1, 2, 3, 4, 6, 8, 12, 24$，求和得 $S_1(24)=60$。$24$ 的质因式分解为 $24=2^3\times3^1$，则 $S_2(24)=(2^0+2^1+2^2+2^3)\times(3^0+3^1)=60$。答案正确！</p>
<hr>
<p>但通过观察发现，表达式的值并不直接与 $n$ 相关，而是与 $n$ 的所有质因子相关。我们知道，因式分解是一个 NPC 问题，我们无法在多项式时间内对 $n$ 进行因式分解。那么，我们有没有办法对 $S(n)$ 进行粗略的估计呢？即有没有办法用 $n$ 来表示 $S(n)$ 的上下界？或者更具体的，$S(n)$ 与 $n$ 是否存在某种倍数关系？</p>
<p>对 $S(n)$ 的表达式进行缩放我们得到</p>
<script type="math/tex; mode=display">
    \begin{split}
        S(n) &= \dfrac{p_0^{a_0+1}-1}{p_0-1}\times \dfrac{p_1^{a_1+1}-1}{p_1-1}\times \cdots \times\dfrac{p_m^{a_m+1}-1}{p_m-1}\\
        &< \dfrac{p_0^{a_0+1}}{p_0-1}\times \dfrac{p_1^{a_1+1}}{p_1-1}\times \cdots \times\dfrac{p_m^{a_m+1}}{p_m-1}\\
        &= \dfrac{p_0}{p_0-1}\times \dfrac{p_1}{p_1-1}\times \cdots \times\dfrac{p_m}{p_m-1}\times n
    \end{split}</script><p>得到</p>
<script type="math/tex; mode=display">
    \dfrac{S(n)}{n} < \dfrac{p_0}{p_0-1}\times \dfrac{p_1}{p_1-1}\times \cdots \times\dfrac{p_m}{p_m-1} = \Pi_p(m)</script><p>接下来，我们希望知道两件事</p>
<ol>
<li>对于任意大的 $m$，$\Pi_p(m)$ 是否存在上界，若 $\Pi_p(m)$ 的上界存在，则 $\dfrac{S(n)}{n}$ 的上界存在。</li>
<li>若$\Pi_p(m)$ 的上界不存在，那么对于确定的 $n$，我们能否得到 $\dfrac{S(n)}{n}$ 的上界。</li>
</ol>
<hr>
<p>首先来解决第一个问题。使用计算机进行计算发现，前 $2^k$ 个质数的 $\Pi_p(2^k)$ 与 $k$ 呈近似线性关系</p>
<script type="math/tex; mode=display">
    \Pi_p(2^k) = ak + b</script><p>另外 $2^k$ 以内的质数的分式乘积 $\Pi_p(\eta)$ 也与 $k$ 呈近似线性关系。</p>
<p>设 $\Pi(n)$ 为前 $n$ 个自然数的类似分式积表达式</p>
<script type="math/tex; mode=display">
    \Pi(n) = \dfrac21 \times \dfrac32 \times \cdots \times \dfrac{n}{n-1} = n</script><p>则前 $n$ 个质数的 $\Pi(n)$ 与 $n$ 呈线性关系。</p>
<p>一个为质数， 一个为自然数，其中必然蕴含着质数分布的某种真理。</p>

          
        
      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://cycoe.cc/2018/11/13/正交试验设计/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Cycoe">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Cycoe's Home Page">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/11/13/正交试验设计/" itemprop="url">
                  正交試驗設計
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
                
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-11-13T08:35:52+08:00">2018-11-13</time>
            

            
            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/statistics/" itemprop="url" rel="index"><span itemprop="name">statistics</span></a></span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2018/11/13/正交试验设计/#comments" itemprop="discussionUrl">
                  <span class="post-meta-item-text">评论数：</span> <span class="post-comments-count valine-comment-count" data-xid="/2018/11/13/正交试验设计/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <blockquote>
<p>正交試驗設計是利用正交表來安排與分析多因素試驗的一種設計方法。它是由試驗因素的全部水平組合中，挑選部分有代表性的水平組合進行試驗的，通過對這部分試驗結果的分析瞭解全面試驗的情況，找出最優的水平組合。可以通過代表性很強的少數次試驗，摸清各個因素對試驗指標的影響情況，確定出因素的主次順序，找出較好的生產條件或最佳參數組合。</p>
</blockquote>
<h2 id="正交表的性質"><a href="#正交表的性質" class="headerlink" title="正交表的性質"></a>正交表的性質</h2><h3 id="正交性"><a href="#正交性" class="headerlink" title="正交性"></a>正交性</h3><ol>
<li>均勻分散性：任一列中，不同數字出現的次數相等；</li>
<li>整齊可比性：任兩列中，同一橫行所組成的數字對出現的次數相等；</li>
<li>可置換性：<ol>
<li>正交表各列的地位是平等的，表中各列之間可以相互置換，稱爲列間置換；</li>
<li>正交表各行之間也可相互置換，稱列間置換；</li>
<li>正交表中同一列的水平數字也可以相互置換，稱水平置換。</li>
</ol>
</li>
</ol>
<h3 id="分散均勻性"><a href="#分散均勻性" class="headerlink" title="分散均勻性"></a>分散均勻性</h3><ol>
<li>任一列的各水平都出現，使得部分試驗中包含所有因素的所有水平；</li>
<li>任意兩列間的所有組合全部出現，使任意兩因素間都是全面試驗。</li>
</ol>
<h3 id="綜合可比性"><a href="#綜合可比性" class="headerlink" title="綜合可比性"></a>綜合可比性</h3><ol>
<li>任一列各水平出現的次數都相等；</li>
<li>任兩列間所有可能的組合出現的次數都相等，因此使任一因素各水平的試驗條件相同。</li>
</ol>
<h2 id="拉丁方陣"><a href="#拉丁方陣" class="headerlink" title="拉丁方陣"></a>拉丁方陣</h2><p>拉丁方陣（Latin square）是一種 $n\times n$ 的方陣，在這種 $n\times n$ 的方陣裏，恰有 $n$ 種不同的元素，每一種不同的元素在同一行或同一列裏只出現一次。如下面的三階拉丁方。</p>
<script type="math/tex; mode=display">
\begin{bmatrix}
    1 & 2 & 3\\
    2 & 3 & 1\\
    3 & 1 & 2\\
\end{bmatrix}</script><h3 id="標準型"><a href="#標準型" class="headerlink" title="標準型"></a>標準型</h3><p>當一個拉丁方陣的第一行與第一列的元素按順序排列時，此爲這個拉丁方陣的標準型，英語稱爲 “reduced Latin square, normalized Latin square, or Latin square in standard form”。</p>
<h3 id="構造拉丁方"><a href="#構造拉丁方" class="headerlink" title="構造拉丁方"></a>構造拉丁方</h3><p>同階的拉丁方有多個，構造其中的一個有一種通用的方法。</p>
<p>若 $n$ 爲偶數，則構造第一行爲 $1, 2, n, 3, n-1, 4, n-2, \dots$，之後的每一行都在上一行對應列元素上加一併對 $n$ 取模，即可表示爲如下矩陣。</p>
<script type="math/tex; mode=display">
\begin{bmatrix}
    1 & 2 & n & 3 & n-1 & 4 & n-2 & \cdots\\
    2 & 3 & n+1 & 4 & n & 5 & n-1 & \cdots\\
    \vdots & \vdots & \vdots & \vdots & \vdots & \vdots & \ddots & \vdots\\
    i & i+1 & i+n-1 & i+2 & i+n-2 & i+3 & i+n-3 & \cdots\\
    \vdots & \vdots & \vdots & \vdots & \vdots & \vdots & \ddots & \vdots\\
    n & 1 & n-1 & 2 & n-2 & 3 & n-3 & \cdots\\
\end{bmatrix} \mathrm{mod}\ n</script><p>若 $n$ 爲奇數，則先按偶數法則構造一個拉丁方，然後將上述模式左右對調。</p>
<h3 id="正交拉丁方"><a href="#正交拉丁方" class="headerlink" title="正交拉丁方"></a>正交拉丁方</h3><p>設有兩個階數相同且爲 $n$ 的拉丁方陣$A_1=(a^{(1)}_{i,j})_{n\times n}, A_2=(a^{(2)}_{i,j})_{n\times n}$，其中將所有放置位置相同的元素組合成一個元組，組合成一個新的矩陣 $((a^{(1)}_{i,j}, a^{(2)}_{i,j}))_{n\times n}$。當這個新的矩陣 $((a^{(1)}_{i,j}, a^{(2)}_{i,j}))_{n\times n}$ 中每一個元素互不相同時，拉丁方陣 $A_1$ 和 $A_2$ 是互相正交的。此時，$A_1$ 和 $A_2$ 即爲一對正交拉丁方。 而在階數固定的情況下，所有兩兩正交的拉丁方所成的集合稱爲正交拉丁方族。如下面的兩個 3 階拉丁方。</p>
<script type="math/tex; mode=display">
\begin{matrix}
A = \begin{bmatrix}
    1 & 2 & 3\\
    2 & 3 & 1\\
    3 & 1 & 2\\
\end{bmatrix} &
B = \begin{bmatrix}
    1 & 2 & 3\\
    3 & 1 & 2\\
    2 & 3 & 1\\
\end{bmatrix}
\end{matrix}</script><h3 id="素數階拉丁方"><a href="#素數階拉丁方" class="headerlink" title="素數階拉丁方"></a>素數階拉丁方</h3><p>若 $n$ 階拉丁方存在 $r$ 個兩兩正交的拉丁方，那麼 $r\leq n-1$。素數階拉丁方（以 $3, 5, 7, \dots$ 爲階）是完全的，即 $n$ 階正交拉丁方族中有 $n-1$ 個拉丁方。</p>
<h2 id="構造正交表"><a href="#構造正交表" class="headerlink" title="構造正交表"></a>構造正交表</h2><p>因爲素數階拉丁方都可構造完全的正交拉丁方族，則可繼續構造正交表。若把素數 $n$ 作爲水平數，則以 $n$ 階拉丁方構造的正交拉丁方有 $n-1$ 個。以 $n-1$ 作爲因素數構造正交表。</p>
<p>以 3 階拉丁方爲例，3 階正交拉丁方族包含 2 個正交拉丁方，並將對應位置元素合併成二元有序數對。</p>
<script type="math/tex; mode=display">
\begin{matrix}
\begin{bmatrix}
    1 & 2 & 3\\
    2 & 3 & 1\\
    3 & 1 & 2\\
\end{bmatrix} &
\begin{bmatrix}
    1 & 2 & 3\\
    3 & 1 & 2\\
    2 & 3 & 1\\
\end{bmatrix} & = &
\begin{bmatrix}
    11 & 22 & 33\\
    23 & 31 & 12\\
    32 & 13 & 21\\
\end{bmatrix} &
\end{matrix}</script><p>以第一個元素作爲因素 A，第二個元素作爲因素 B，然後與因素 C、D 均勻搭配，構造 4 因素 3 水平正交表。</p>
<div class="table-container">
<table>
<thead>
<tr>
<th>C, A, B, D</th>
<th>1</th>
<th>2</th>
<th>3</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>11</td>
<td>22</td>
<td>33</td>
</tr>
<tr>
<td>2</td>
<td>23</td>
<td>31</td>
<td>12</td>
</tr>
<tr>
<td>3</td>
<td>32</td>
<td>13</td>
<td>21</td>
</tr>
</tbody>
</table>
</div>
<p>展開後爲</p>
<div class="table-container">
<table>
<thead>
<tr>
<th>試驗號</th>
<th>A</th>
<th>B</th>
<th>C</th>
<th>D</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>1</td>
<td>1</td>
<td>1</td>
<td>1</td>
</tr>
<tr>
<td>2</td>
<td>1</td>
<td>2</td>
<td>2</td>
<td>2</td>
</tr>
<tr>
<td>3</td>
<td>1</td>
<td>3</td>
<td>3</td>
<td>3</td>
</tr>
<tr>
<td>4</td>
<td>2</td>
<td>2</td>
<td>3</td>
<td>1</td>
</tr>
<tr>
<td>5</td>
<td>2</td>
<td>3</td>
<td>1</td>
<td>2</td>
</tr>
<tr>
<td>6</td>
<td>2</td>
<td>1</td>
<td>2</td>
<td>3</td>
</tr>
<tr>
<td>7</td>
<td>3</td>
<td>3</td>
<td>2</td>
<td>1</td>
</tr>
<tr>
<td>8</td>
<td>3</td>
<td>1</td>
<td>3</td>
<td>2</td>
</tr>
<tr>
<td>9</td>
<td>3</td>
<td>2</td>
<td>1</td>
<td>3</td>
</tr>
</tbody>
</table>
</div>
<p>若只與一個因素 C 搭配，則可構造 3 因素 3 水平正交表。</p>
<div class="table-container">
<table>
<thead>
<tr>
<th>C, A, B</th>
<th></th>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>11</td>
<td>22</td>
<td>33</td>
</tr>
<tr>
<td>2</td>
<td>23</td>
<td>31</td>
<td>12</td>
</tr>
<tr>
<td>3</td>
<td>32</td>
<td>13</td>
<td>21</td>
</tr>
</tbody>
</table>
</div>
<p>展開後爲</p>
<div class="table-container">
<table>
<thead>
<tr>
<th>試驗號</th>
<th>A</th>
<th>B</th>
<th>C</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>1</td>
<td>1</td>
<td>1</td>
</tr>
<tr>
<td>2</td>
<td>1</td>
<td>2</td>
<td>2</td>
</tr>
<tr>
<td>3</td>
<td>1</td>
<td>3</td>
<td>3</td>
</tr>
<tr>
<td>4</td>
<td>2</td>
<td>2</td>
<td>3</td>
</tr>
<tr>
<td>5</td>
<td>2</td>
<td>3</td>
<td>1</td>
</tr>
<tr>
<td>6</td>
<td>2</td>
<td>1</td>
<td>2</td>
</tr>
<tr>
<td>7</td>
<td>3</td>
<td>3</td>
<td>2</td>
</tr>
<tr>
<td>8</td>
<td>3</td>
<td>1</td>
<td>3</td>
</tr>
<tr>
<td>9</td>
<td>3</td>
<td>2</td>
<td>1</td>
</tr>
</tbody>
</table>
</div>
<p>由此可見，以素數 $n$ 爲水平數設計正交試驗，可滿足 $[n-1, n+1]$ 個因素的設計，並且總共需要 $n^2$ 次試驗。即對於 3 因素 3 水平與 4 因素 3 水平正交試驗具有相同的試驗組數，同爲 9 組。可類似地構造出 $L_9(3^3)$，$L_9(3^4)$，$L_{25}(5^5)$，$L_{25}(5^6)$，$L_{49}(7^7)$，$L_{49}(7^8)$ 等。</p>
<h2 id="參考資料"><a href="#參考資料" class="headerlink" title="參考資料"></a>參考資料</h2><ul>
<li><a href="https://baike.baidu.com/item/%E6%8B%89%E4%B8%81%E6%96%B9%E9%98%B5/4413910?fromtitle=%E6%8B%89%E4%B8%81%E6%96%B9&amp;fromid=7176085" target="_blank" rel="noopener">百度百科-拉丁方</a></li>
<li><a href="https://bkso.baidu.com/item/%E6%AD%A3%E4%BA%A4%E6%8B%89%E4%B8%81%E6%96%B9" target="_blank" rel="noopener">百度百科-正交拉丁方</a></li>
<li><a href="https://baike.baidu.com/item/%E6%8B%89%E4%B8%81%E6%96%B9%E8%AE%BE%E8%AE%A1" target="_blank" rel="noopener">百度百科-拉丁方設計</a></li>
<li><a href="https://wenku.baidu.com/view/7b9965bcbdeb19e8b8f67c1cfad6195f312be8db.html?re=view" target="_blank" rel="noopener">正交表與正交設計</a></li>
</ul>

          
        
      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://cycoe.cc/2018/11/09/Linux下常用软件和配置记录/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Cycoe">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Cycoe's Home Page">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/11/09/Linux下常用软件和配置记录/" itemprop="url">
                  Linux下常用軟件和配置記錄
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
                
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-11-09T22:22:31+08:00">2018-11-09</time>
            

            
            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Linux/" itemprop="url" rel="index"><span itemprop="name">Linux</span></a></span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2018/11/09/Linux下常用软件和配置记录/#comments" itemprop="discussionUrl">
                  <span class="post-meta-item-text">评论数：</span> <span class="post-comments-count valine-comment-count" data-xid="/2018/11/09/Linux下常用软件和配置记录/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>隨着使用 Linux 系統的年頭越來越長，積累的相關技巧也越來越多。最近一次重裝系統突然發現很多配置都已經忘的差不多了，想要配置系統還需要去網上到處搜刮資料實在是麻煩，因此打算用一篇博客記錄關於 Linux 系統的配置及常用軟件的介紹。</p>
<h2 id="Archlinux-配置"><a href="#Archlinux-配置" class="headerlink" title="Archlinux 配置"></a>Archlinux 配置</h2><h3 id="讓-Qt5-程序使用原生-GTK-主題"><a href="#讓-Qt5-程序使用原生-GTK-主題" class="headerlink" title="讓 Qt5 程序使用原生 GTK+ 主題"></a>讓 Qt5 程序使用原生 GTK+ 主題</h3><p>Qt5 程序在 GTK3 環境下主題不統一真的很難受，尤其是 GTK3 用了黑色主題而 Qt5 還是刺眼的白色主題的時候。不像在 KDE 設置中設置 GTK3 主題那麼方便，設置 Qt5 主題可需要好好折騰一番。而且這個解決方案也是我使用了近一年後才找到的答案。</p>
<p>首先你需要安裝 qt5ct 來提供 Qt5 程序主題的設置入口。此時直接在應用列表中打開 qt5ct 會提示未設置環境變量，編輯 <code>.xprofile</code> 文件，並在其中加入如下內容<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[ <span class="string">"<span class="variable">$XDG_CURRENT_DESKTOP</span>"</span> = <span class="string">"KDE"</span> ] || [ <span class="string">"<span class="variable">$XDG_CURRENT_DESKTOP</span>"</span> = <span class="string">"GNOME"</span> ] || <span class="built_in">export</span> QT_QPA_PLATFORMTHEME=<span class="string">"qt5ct"</span></span><br></pre></td></tr></table></figure></p>
<p>註銷後重新登錄，此時打開 qt5ct 應該就不報錯了。但此時你會發現主題列表中只有 Qt5 自帶的幾個樣式<del>，而沒有 Gtk3 主題。你需要安裝 qt5-styleplugins 來使 Qt5 支持 GTK2 主題。你沒有看錯，我也不知道爲啥 Qt5 只支持 GTK2 的主題。但是我們要如何設置 GTK2 主題呢，好吧，又需要安裝一個叫 gtk-theme-switch2 的工具。在 gtk-theme-switch2 中設置好滿意的 GTK2 主題後，再在 qt5ct 中設置 Qt5 主題爲 GTK2 即可</del>。</p>
<h4 id="2019-08-11-更新"><a href="#2019-08-11-更新" class="headerlink" title="2019-08-11 更新"></a>2019-08-11 更新</h4><p>事实上現在有个更加好用的 qt 主题引擎叫 Kvantum，样式更加現代并且支持透明。<code>sudo pacman -S kvantum-qt5</code> 安装完成后，在 qt5ct 中将 kvantum 设置为默认主题引擎，并在 kvantum 中設置主题即可。</p>
<h3 id="variety-无法设置壁紙"><a href="#variety-无法设置壁紙" class="headerlink" title="variety 无法设置壁紙"></a>variety 无法设置壁紙</h3><p>目前我遇到过两种情况可能导致 variety 无法设置壁紙。</p>
<ol>
<li>未安装 feh，虽然 variety 的依赖项中并没有 feh，但是缺少 feh 确实无法设置壁紙。</li>
<li>如果没有安装 display manager，variety 无法获取当前桌面的环境变量，在 <code>.xinitrc</code> 中添加<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># variables set identifying which DE / WM you're using,</span></span><br><span class="line"><span class="comment"># so variety can know what to do. </span></span><br><span class="line"><span class="built_in">export</span> XDG_CURRENT_DESKTOP=i3-gaps</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h3 id="dunst-无法显示通知"><a href="#dunst-无法显示通知" class="headerlink" title="dunst 无法显示通知"></a>dunst 无法显示通知</h3><p>同样是由于没有 display manager 导致的，在 <code>.xinitrc</code> 中添加<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># When using dunst without a Display Manager,</span></span><br><span class="line"><span class="comment"># the DISPLAY environment variable might not be correctly set.</span></span><br><span class="line">systemctl --user import-environment DISPLAY</span><br></pre></td></tr></table></figure></p>
<h2 id="常用軟件"><a href="#常用軟件" class="headerlink" title="常用軟件"></a>常用軟件</h2><p>用了幾年 Linux 後發現其實 Linux 平臺的軟件並不少（當然 Adobe 全家桶和 MS Office 除外，要做設計或者辦公還是老老實實 Windows 吧:speak_no_evil:），只是與 Windows 和 Mac 平臺常用的軟件不同而已。Linux 的真正強大之處是命令行軟件，幾條簡單的命令組合就可以完成複雜的功能。</p>
<h3 id="小鹤双拼"><a href="#小鹤双拼" class="headerlink" title="小鹤双拼"></a>小鹤双拼</h3><p>每次重装系统都需要重新配置输入法，更蛋疼的是在 Rime 中添加鹤形码表时，总出现部署错误。虽然最后折腾半天总是莫名其妙地整好了，但是不得不感叹配置 Rime 真是玄学（虽然很不想承认是自己对 Rime 的配置文件一窍不通:laughing:）。特此记录一下给 Rime 添加鹤形的过程，虽然以后按相同的步骤也不一定能配置成功。</p>
<p>第一步，安装 fcitx 框架（ibus 框架就不考虑了，fcitx 用习惯了）和 Rime 的 fcitx 实现。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Archlinux</span></span><br><span class="line">sudo pacman -S fcitx fcitx-rime fcitx-configtool</span><br><span class="line"><span class="comment"># openSUSE</span></span><br><span class="line">sudo zypper <span class="keyword">in</span> fcitx fcitx-rime fcitx-config-gtk</span><br></pre></td></tr></table></figure></p>
<p>第二步，在 fcitx 设置中加入 rime 输入法，记得关闭“只显示当前语言输入法选项”。切换到 Rime 输入法，此时应该会自动运行一次 deploy。</p>
<p>第三步，将<a href="https://git.coding.net/cycoe/config.git" target="_blank" rel="noopener">我的配置</a>中的 <code>.config/fcitx</code> 目录复制到对应的路径，其中已经包含了 flypy 使用的码表（之前小鹤双拼官网发布的挂接码表文件，但因为没有通用的配置方法目前已经下架），并将运行下面的命令将配置文件复制到 Rime 系统级路径中（尝试过复制到 <code>.config/fcitx/rime/build/default.custom.yaml</code>，没有效果）。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 备份原配置</span></span><br><span class="line">sudo mv /usr/share/rime-data/default.yaml /usr/share/rime-data/default.yaml.bak</span><br><span class="line"><span class="comment"># 复制新配置</span></span><br><span class="line">sudo cp default.yaml /usr/share/rime-data/default.yaml</span><br></pre></td></tr></table></figure></p>
<p>第四步，在 fcitx 上右键，选择 deploy，此时会提示部署错误，但是惊喜地发现输入法已经可以使用。</p>
<h2 id="常用软件"><a href="#常用软件" class="headerlink" title="常用软件"></a>常用软件</h2><p>用了几年 Linux 后发现其实 Linux 平台的软件并不少（当然 Adobe 全家桶和 MS Office 除外，要做设计或者办公还是老老实实 Windows 吧:speak_no_evil:），只是与 Windows 和 Mac 平台常用的软件不同而已。Linux 的真正强大之处是命令行软件，几条简单的命令组合就可以完成复杂的功能。</p>
<h3 id="Dia"><a href="#Dia" class="headerlink" title="Dia"></a>Dia</h3><p>一個非常小的流程圖繪製軟件，但是功能夠用。</p>
<h3 id="ncdu"><a href="#ncdu" class="headerlink" title="ncdu"></a>ncdu</h3><p>ncdu (NCurses Disk Usage) 是一個基於 NCurses 系統的磁盤用量分析命令行軟件，相似功能的還有基於 GTK+ 的 Baobab（從版本號來看應該是屬於 Gnome 桌面套裝）。其實對我來說真的很少使用此類軟件，畢竟我很少刪除磁盤文件，但是最近 /Home 分區接近爆滿讓我很難受，還是需要從磁盤的角落翻出以後再也用不上的大文件以刪除之。</p>
<h3 id="xreader"><a href="#xreader" class="headerlink" title="xreader"></a>xreader</h3><p>pdf 文檔閱讀器，X-Apps 計劃中的一員（這個計劃好像只有個閱讀器？:laughing:）。體積小巧，優點是可以使用 <code>hjkl</code> 等 vim 鍵位進行控制。缺點是沒有高級功能，單純作爲一個閱讀器還是不錯的。</p>
<h3 id="pcmanfm"><a href="#pcmanfm" class="headerlink" title="pcmanfm"></a>pcmanfm</h3><p>LXDE 桌面環境默認文件管理器，實話說比 Gnome 的鸚鵡螺好用太多，功能上與 Dolphin 相近。Archlinux 上有單獨提供 pcmanfm-gtk3 的安裝包，其他髮型版上應該默認使用的就是 GTK3 了。</p>
<h3 id="lxappearance"><a href="#lxappearance" class="headerlink" title="lxappearance"></a>lxappearance</h3><p>GTK+ 界面主題設置工具，又是 LXDE 的一員。LXDE 自帶的幾款軟件質量都挺高，界面風格統一併且功能強大。</p>
<h3 id="gpickview"><a href="#gpickview" class="headerlink" title="gpickview"></a>gpickview</h3><p>LXDE 默認的圖片查看器，體積小巧，沒有太多花哨功能。</p>
<h3 id="ranger"><a href="#ranger" class="headerlink" title="ranger"></a>ranger</h3><p>python 写成的基于命令行的文件管理器，有与 Vim 类似的键位绑定，全键盘操作效率爆表。拥有 ranger 就不太需要 pcmanfm 了。</p>
<h4 id="初次使用"><a href="#初次使用" class="headerlink" title="初次使用"></a>初次使用</h4><p>通过运行 <code>ranger --copy-config=all</code> 拷贝所有配置文件到用户家目录。包含以下文件<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">commands_full.py <span class="comment"># ranger 所有命令</span></span><br><span class="line">commands.py <span class="comment"># 自定义命令</span></span><br><span class="line">rc.conf <span class="comment"># ranger 配置文件</span></span><br><span class="line">rifle.conf <span class="comment"># 文件打开方式配置</span></span><br><span class="line">scope.sh <span class="comment"># 预览配置</span></span><br></pre></td></tr></table></figure></p>
<h4 id="文件预览"><a href="#文件预览" class="headerlink" title="文件预览"></a>文件预览</h4><p>在 <code>rc.conf</code> 中檢查所有 ‘preview’ 的选项<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line"># Use non-default path for file preview script?</span><br><span class="line"># ranger ships with scope.sh, a script that calls external programs (see</span><br><span class="line"># README.md for dependencies) to preview images, archives, etc.</span><br><span class="line">set preview_script ~/.config/ranger/scope.sh</span><br><span class="line"></span><br><span class="line"># Use the external preview script or display simple plain text or image previews?</span><br><span class="line">set use_preview_script true</span><br><span class="line">...</span><br><span class="line"># 设置图片的 method，虽然 w3m bug 很多，但也是唯一一个选择了</span><br><span class="line">set preview_images_method w3m</span><br><span class="line">...</span><br></pre></td></tr></table></figure></p>
<p>预览其他类型的文件需要安装对应的依赖<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">Optional Deps   : atool: for previews of archives</span><br><span class="line">                  elinks: for previews of html pages</span><br><span class="line">                  ffmpegthumbnailer: for video previews</span><br><span class="line">                  highlight: for syntax highlighting of code</span><br><span class="line">                  libcaca: for ASCII-art image previews</span><br><span class="line">                  lynx: for previews of html pages</span><br><span class="line">                  mediainfo: for viewing information about media files</span><br><span class="line">                  odt2txt: for OpenDocument texts</span><br><span class="line">                  perl-image-exiftool: for viewing information about media files</span><br><span class="line">                  poppler: for pdf previews</span><br><span class="line">                  python-chardet: in case of encoding detection problems</span><br><span class="line">                  sudo: to use the &quot;run as root&quot;-feature</span><br><span class="line">                  transmission-cli: for viewing bittorrent information</span><br><span class="line">                  w3m: for previews of images and html pages</span><br></pre></td></tr></table></figure></p>
<p>但不建议开启压缩包的预览，会大幅影响速度，修改 <code>scope.sh</code> 文件，注释掉压缩包的预览<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"># Archive</span><br><span class="line">a|ace|alz|arc|arj|bz|bz2|cab|cpio|deb|gz|jar|lha|lz|lzh|lzma|lzo|\</span><br><span class="line">rpm|rz|t7z|tar|tbz|tbz2|tgz|tlz|txz|tZ|tzo|war|xpi|xz|Z|zip)</span><br><span class="line">    # atool --list -- &quot;$&#123;FILE_PATH&#125;&quot; &amp;&amp; exit 5</span><br><span class="line">    # bsdtar --list --file &quot;$&#123;FILE_PATH&#125;&quot; &amp;&amp; exit 5</span><br><span class="line">    exit 1;;</span><br></pre></td></tr></table></figure></p>
<h4 id="批量重命名"><a href="#批量重命名" class="headerlink" title="批量重命名"></a>批量重命名</h4><p>ranger 有个非常 sexy 的功能，那就是批量重命名。选中多个文件后，输入 <code>:bulkrename</code>，ranger 会帮你自动打开一个 Vim 编辑器。在 Vim 中你可以利用 Vim 的强大功能对文件名做任何处理，修改完成后保存退出即可。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># This file will be executed when you close the editor.</span></span><br><span class="line"><span class="comment"># Please double-check everything, clear the file to abort.</span></span><br><span class="line">mv -vi -- <span class="built_in">test</span> today_test</span><br><span class="line">mv -vi -- test.md today_test.md</span><br><span class="line">mv -vi -- test.pdf today_test.pdf</span><br></pre></td></tr></table></figure></p>

          
        
      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://cycoe.cc/2018/10/23/一种通过最小二乘法求转变点的方法/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Cycoe">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Cycoe's Home Page">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/10/23/一种通过最小二乘法求转变点的方法/" itemprop="url">
                  一種通過最小二乘法求轉變點的方法
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
                
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-10-23T21:52:47+08:00">2018-10-23</time>
            

            
            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2018/10/23/一种通过最小二乘法求转变点的方法/#comments" itemprop="discussionUrl">
                  <span class="post-meta-item-text">评论数：</span> <span class="post-comments-count valine-comment-count" data-xid="/2018/10/23/一种通过最小二乘法求转变点的方法/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="最小二乘法"><a href="#最小二乘法" class="headerlink" title="最小二乘法"></a>最小二乘法</h2><p>假設存在 k 個樣本點 \(X_1, X_2, \ldots, X_k\)，定義向量<br>\(X_i = (x_{i1}, x_{i2}, \ldots, x_{in})^T\)，爲方便計算在 \(X_i\) 前插入常量 1。<br>則需要求 \(W = (w_0, w_1, w_2, \ldots, w_n)\) 使 \(\hat{Y} = XW\)。</p>
<p>定義均方誤差 \(E = \dfrac{1}{n}\sum(y_i-\hat{y}_i)^2 = \dfrac{1}{n}||Y-\hat{Y}||_2^2\)，則可轉變爲尋找 W 使得 E 最小，即尋找 \(W = \mathrm{argmin}\dfrac{1}{n}||Y-XW||_2^2\)。</p>
<p>對於</p>
<script type="math/tex; mode=display">E(W) = \dfrac{1}{n}</script><p>則可推導</p>
<script type="math/tex; mode=display">
    \begin{align}
    E(W+\Delta W) - E(W) &= \dfrac{1}{n}||Y-X(W+\Delta W)||_2^2-\dfrac{1}{n}||Y-XW||_2^2\\
    &= \dfrac1n||Y-XW||_2^2-\dfrac2n(Y-XW)(X\Delta W)+\dfrac1n||X\Delta W||_2^2-\dfrac1n||Y-XW||_2^2\\
    &= \dfrac2n(XW-Y)X\Delta W+\mathcal{O}(||\Delta X||)\\
    \end{align}</script><p>令 </p>
<script type="math/tex; mode=display">L(W) = \dfrac2n(XW-Y)X\Delta W</script><p>爲 \(E(W)\) 在 \(W\) 處的導數，同時</p>
<script type="math/tex; mode=display">
    \begin{align}
    L(\Delta W) &= <\nabla E(W), \Delta W>\\
    &= <\dfrac2nX^T(XW-Y), \Delta X>\\
    &= \dfrac2n(XW-Y)X\Delta W\\
    \end{align}</script><p>則</p>
<script type="math/tex; mode=display">
    \begin{align}
    \nabla E(W) = \dfrac2nX^T(XW-Y) &= 0\\
    X^TXW &= X^TY\\
    W &= (X^TX)^{-1}X^TY
    \end{align}</script><p>最終得</p>
<script type="math/tex; mode=display">E=\dfrac1n||Y-\hat{Y}||_2^2=\dfrac1n||X(X^TX)^{-1}X^TY-Y||_2^2</script>
          
        
      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://cycoe.cc/2018/09/06/Nocturnal使用说明/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Cycoe">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Cycoe's Home Page">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/09/06/Nocturnal使用说明/" itemprop="url">
                  Nocturnal使用說明
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
                
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-09-06T00:00:00+08:00">2018-09-06</time>
            

            
            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/python/" itemprop="url" rel="index"><span itemprop="name">python</span></a></span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2018/09/06/Nocturnal使用说明/#comments" itemprop="discussionUrl">
                  <span class="post-meta-item-text">评论数：</span> <span class="post-comments-count valine-comment-count" data-xid="/2018/09/06/Nocturnal使用说明/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="Nocturnal-by-Cycoe"><a href="#Nocturnal-by-Cycoe" class="headerlink" title="Nocturnal by Cycoe"></a>Nocturnal by Cycoe</h1><p><a href="https://git.coding.net/cycoe/Nocturnal.git" title="Nocturnal GitHub" target="_blank" rel="noopener">GitHub 地址</a><br>如果在使用過程中發現 bug，可到<a href="https://git.coding.net/cycoe/Nocturnal.git" title="Nocturnal GitHub" target="_blank" rel="noopener">此處</a>進行反饋，或者直接提交修復 PR，感謝支持！</p>
<h2 id="聲明"><a href="#聲明" class="headerlink" title="聲明"></a><strong>聲明</strong></h2><p>Nocturnal 是我課餘時間練習 python 代碼編寫的程序，針對使用引起的一切後果本人概不負責。</p>
<h2 id="關於捐贈"><a href="#關於捐贈" class="headerlink" title="關於捐贈"></a>關於捐贈</h2><p>Nocturnal 不併強制要求捐贈，但爲了防止軟件被濫用而出現的一系列問題，因此需要提供解密密鑰才能使用，具體操作如下：</p>
<ol>
<li>打開軟件，此時會自動彈出一個命令提示符窗口和一個二維碼</li>
<li>微信掃描二維碼添加我爲好友</li>
<li><p>你能在命令提示符窗口上看到類似這樣一段話</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">你的 id 爲 2160。請將 id 發給開發者獲取解鎖密鑰</span><br><span class="line">請輸入解密密鑰:</span><br></pre></td></tr></table></figure>
</li>
<li><p>將其中的 id 發給我，我會生成解密密鑰</p>
</li>
<li>輸入密鑰後即可使用</li>
<li>（可選）如果你覺得這個軟件給你帶來了便利，你可以給開發者包個紅包，建議 5 元</li>
</ol>
<h2 id="使用說明"><a href="#使用說明" class="headerlink" title="使用說明"></a>使用說明</h2><h3 id="命令幫助"><a href="#命令幫助" class="headerlink" title="命令幫助"></a>命令幫助</h3><div class="table-container">
<table>
<thead>
<tr>
<th>命令全稱</th>
<th>縮寫</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>help</td>
<td>h</td>
<td>打印幫助信息</td>
</tr>
<tr>
<td>emailLogin</td>
<td>el</td>
<td>綁定通知郵箱</td>
</tr>
<tr>
<td>grade</td>
<td>g</td>
<td>成績抓取模式</td>
</tr>
<tr>
<td>report</td>
<td>r</td>
<td>選報告模式</td>
</tr>
<tr>
<td>class</td>
<td>c</td>
<td>選課模式</td>
</tr>
<tr>
<td>add</td>
<td>a</td>
<td>添加待選課程名稱</td>
</tr>
<tr>
<td>delete</td>
<td>de</td>
<td>刪除待選課程名稱</td>
</tr>
<tr>
<td>list</td>
<td>l</td>
<td>列出待選課程名稱</td>
</tr>
<tr>
<td>donate</td>
<td>d</td>
<td>捐贈</td>
</tr>
<tr>
<td>quit</td>
<td>q</td>
<td>退出</td>
</tr>
</tbody>
</table>
</div>
<p>以上表格第一列爲命令的全稱，第二列爲命令的縮寫，輸入全稱與縮寫擁有同樣的效果。</p>
<h3 id="軟件符號說明"><a href="#軟件符號說明" class="headerlink" title="軟件符號說明"></a>軟件符號說明</h3><p>Nocturnal 使用字符界面（TUI）進行交互，雙擊 <code>Nocturnal.exe</code> 打開軟件後可看到一個黑底白字的字符界面，這不是因爲軟件運行出錯，而是 Nocturnal 本來就是這樣的。現在你應該能在界面上看到一些表格，最上面的表格爲 Nocturnal 的基本信息，中間的表格爲使用幫助。在最下方你可以看到類似這樣的提示符 <code>[0] &gt;&gt;&gt;</code>，該提示符表明此時你可以輸入命令運行相關功能，<code>[0]</code> 中的數字表示後臺正在運行的任務數量。</p>
<h3 id="成績抓取模式"><a href="#成績抓取模式" class="headerlink" title="成績抓取模式"></a>成績抓取模式</h3><p>在 <code>[0] &gt;&gt;&gt;</code> 後輸入 <code>grade</code> 或 <code>g</code> 回車即可運行成績抓取功能。第一次使用時會自動提示你輸入用戶名和密碼，也就是你的教務網學號和密碼。運行成功後不會有提示，但 Nocturnal 就會在後臺自動抓取成績，並在出新成績時自動通知。</p>
<h3 id="選報告模式"><a href="#選報告模式" class="headerlink" title="選報告模式"></a>選報告模式</h3><p>在 <code>[0] &gt;&gt;&gt;</code> 後輸入 <code>report</code> 或 <code>r</code> 回車即可運行選報告模式，運行成功後 Nocturnal 會在後臺自動抓取報告列表，並在有新報告放出時自動選報告，並通過郵件通知你。</p>
<h3 id="選課模式"><a href="#選課模式" class="headerlink" title="選課模式"></a>選課模式</h3><p>選課模式與成績抓取模式和選報告模式不同，選課模式需要在前臺運行。選課模式通過匹配關鍵字實現，針對每門課程可以添加多個關鍵字。比如你想要選 ‘高分子研究方法’ 這門課，則可以在一級關鍵字後輸入 ‘高分子研究方法’ 並回車。但一般課程會有多個時間開課，如果想要指定特定時間或特定老師的課程，則可在二級關鍵字後輸入 ‘週一’ 或 ‘某某某老師’ 即可。Nocturnal 會首先檢查一級關鍵字，如果一級關鍵字對應多個候選，那麼會繼續以二級關鍵字進行過濾，優先選擇符合二級關鍵字的候選。但如果二級關鍵字過濾後沒有可選課程，那麼會返回一級關鍵字的候選列表，並隨機選取一個候選作爲最終選擇。<strong>總而言之，Nocturnal 中的關鍵字列表並不是選課的唯一列表，而是一個優先列表，Nocturnal 會按關鍵字列表所給的優先順序依照選取所有可選課程。</strong></p>
<p><strong>注意：選課模式還未經過測試，選課完成後務必登錄教務網檢查已選課程。</strong></p>
<p>具體流程如下：</p>
<ol>
<li>輸入 <code>a</code> 回車添加需要選的課程名稱，輸入 <code>a</code> 後提示如下：<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[0] &gt;&gt;&gt; a</span><br><span class="line">please input 1th key</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p><code>&gt;</code> 表示此時你可輸入一級關鍵字，一般我們會將課程名稱作爲一級關鍵字，如此時你可輸入 ‘高分子研究方法’ 回車添加一個關鍵字，完成後程序會提示你輸入二級關鍵字如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[0] &gt;&gt;&gt; a</span><br><span class="line">please input 1th key</span><br><span class="line">&gt; 高分子研究方法</span><br><span class="line">please input 2th key</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure></p>
<p>此時你可直接輸入回車來結束關鍵字的輸入（在輸入任一關鍵字時，你都可通過直接回車來結束輸入），或者輸入 ‘週六’ 回車作爲想要上課的時間。</p>
<p>重複以上步驟直至你輸入了所有想要選的課程。</p>
<ol>
<li>輸入 <code>l</code> 查看已經輸入的課程列表</li>
<li>輸入 <code>d</code> 刪除不想選的課程</li>
</ol>
<h3 id="郵件通知"><a href="#郵件通知" class="headerlink" title="郵件通知"></a>郵件通知</h3><p>Nocturnal 目前只有通過郵箱一種方式對你進行通知，你可通過輸入 <code>el</code> 來綁定郵箱，Nocturnal 會提示你一步一步進行操作。&lt;接收郵箱&gt;爲你要接收通知的郵箱，建議使用 qq 郵箱，這樣使用微信綁定 qq 郵箱後就可以的即時地收到郵件通知消息。&lt;發送郵箱&gt;可以使用任意郵箱，但發送郵箱需要輸入密碼。<smtp 主機地址=""> 爲發送郵箱的主機地址，qq 郵箱對應的是 ‘smtp.qq.com’，163 郵箱對應 ‘smtp.163.com’，其他郵箱請自行百度。&lt;端口&gt; 默認值爲 ‘25’（<strong>注意：使用端口 25 意味着不使用 SSL 加密，希望郵件加密的同學請自行百度</strong>）。每步輸入過程中，提示符後括號中爲原始值，如果你不希望更改原始值，直接回車即可。</smtp></p>
<h2 id="更新日誌"><a href="#更新日誌" class="headerlink" title="更新日誌"></a>更新日誌</h2><h3 id="Date-2017-1-3"><a href="#Date-2017-1-3" class="headerlink" title="Date: 2017-1-3"></a>Date: 2017-1-3</h3><p><strong>Version: V4.0</strong></p>
<h3 id="Date-2017-12-15"><a href="#Date-2017-12-15" class="headerlink" title="Date: 2017-12-15"></a>Date: 2017-12-15</h3><p><strong>Version: V3.1</strong></p>
<p>[bug fix]</p>
<ul>
<li>修復掉線後不能重新登錄的問題</li>
<li>修復達到最大重試次數後不會自動停止的問題</li>
</ul>
<p>[optimization]</p>
<ul>
<li>重新登錄時清理內存</li>
<li>簡化代碼結構</li>
<li>新增等待時的動畫效果</li>
<li>完善自定義郵箱登錄</li>
</ul>
<h3 id="Date-2017-12-14"><a href="#Date-2017-12-14" class="headerlink" title="Date: 2017-12-14"></a>Date: 2017-12-14</h3><p><strong>Version: V3.0</strong></p>
<p>[bug fix]</p>
<ul>
<li>修復選報告時的崩潰問題</li>
</ul>
<p>[optimization]</p>
<ul>
<li>重磅更新！新增驗證碼自動識別，花了大力氣才寫出來，現在無需手動輸入驗證碼登錄</li>
<li>更新了選報告的入口，優化了休眠邏輯</li>
<li>命令行提示已漢化</li>
<li>優化郵件提醒，現在只會發送最新選到的報告列表</li>
<li>新增報告黑名單，選到的報告自動加入黑名單列表中，防止手動退了後又重複選上</li>
<li>新增捐贈入口，希望大家多多支持！</li>
<li>打包成安裝文件，不用再手動解壓</li>
</ul>

          
        
      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://cycoe.cc/2018/08/12/Vim-一款让我相见恨晚的编辑器/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Cycoe">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Cycoe's Home Page">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/08/12/Vim-一款让我相见恨晚的编辑器/" itemprop="url">
                  Vim- 一款讓我相見恨晚的編輯器
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
                
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-08-12T22:34:49+08:00">2018-08-12</time>
            

            
            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2018/08/12/Vim-一款让我相见恨晚的编辑器/#comments" itemprop="discussionUrl">
                  <span class="post-meta-item-text">评论数：</span> <span class="post-comments-count valine-comment-count" data-xid="/2018/08/12/Vim-一款让我相见恨晚的编辑器/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="Vim-簡介"><a href="#Vim-簡介" class="headerlink" title="Vim 簡介"></a>Vim 簡介</h2><blockquote>
<p><a href="https://github.com/vim/vim" title="Vim" target="_blank" rel="noopener">Vim</a> is a greatly improved version of the good old UNIX editor Vi. Many new features have been added: multi-level undo, syntax highlighting, command line history, on-line help, spell checking, filename completion, block operations, script language, etc. There is also a Graphical User Interface (GUI) available.</p>
</blockquote>
<p>以上關於 Vim 的描述來自 <a href="https://github.com/vim/vim" title="Vim" target="_blank" rel="noopener">Vim</a> 的官方 GitHub 倉庫。Vim 是一款古老且強大的編輯器，從其誕生之日起到現在已經有二十多年的歷史（比我的年齡都要大 orz）。很多人聽說它的大名一般是因爲它與 <a href="https://github.com/emacs-mirror/emacs" title="Emacs" target="_blank" rel="noopener">Emacs</a> 並稱編輯器之神與神之編輯器。爲什麼會有這樣的名號？除了它們的功能極其強大之外，還因爲它們極其難以上手。以下圖片爲網友戲稱的常用編輯器的學習曲線。</p>
<img src="/2018/08/12/Vim-一款让我相见恨晚的编辑器/learning_curve.jpg" title="常用編輯器的學習曲線">
<p>即便如此，Vim 和 <a href="https://github.com/emacs-mirror/emacs" title="Emacs" target="_blank" rel="noopener">Emacs</a> 仍流行到了現在，以至於後來經常能在各處看到的 Vimer（Vim 黨）和 Emacser（Emacs 黨）的編輯器之爭，雖然有的時候可能只是類似於“php 是世界上最好的語言”之類的梗，但足以看出 Vim 確實非常強大，並且用上了就再也回不去了。</p>
<h2 id="安裝-Vim"><a href="#安裝-Vim" class="headerlink" title="安裝 Vim"></a>安裝 Vim</h2><p>Vim 在所有的 Linux 發行版上都易於獲得，只需要使用對應的包管理器進行安裝即可，Windows 上也有編譯好的二進制包，但實際在安裝過程中仍會面臨幾個選擇。</p>
<p>以 Archlinux 爲例，Archlinux 的官方倉庫中包含的 Vim 在編譯過程中並沒有編譯進 python、lua 等支持，導致很多插件無法使用，因此爲了能使用上 Vim 的完全體，可以選擇 Gvim。Gvim 是基於 Vim 的一個帶有圖形界面的版本，並在編譯過程中包含進了所有可用組件。如果選擇 Vim 分支，強烈建議使用 Gvim，並且使用 8.0 之後的版本。下載鏈接在<a href="https://github.com/vim/vim-win32-installer/releases" title="Vim Download" target="_blank" rel="noopener">此處</a>。</p>
<p>另一個可供選擇的版本是 Neovim，Neovim 是 Vim 的一個 fork 版本，比 Vim 具有更多的特性（Neovim 先首先支持的異步架構和內置 terminal，隨後 Vim 也提供了支持），目前開發活躍，推薦進行嘗試。下載鏈接在<a href="https://github.com/neovim/neovim/releases/" title="Neovim Download" target="_blank" rel="noopener">此處</a>。</p>
<p>以上的所有版本在下文中都將統一稱爲 ‘Vim’（雖然事實上 Vim 與 Neovim 並不是同一個項目，但在配置和使用方法上是類似的）。無論安裝哪個版本，安裝完成後從應用啓動菜單或命令行應該就能成功啓動。恭喜你！此時已經完成了安裝 Vim 的第一步，現在你看到的是一個黑底白字的字符界面。不過彆着急，接下來我們會一步一步將 Vim 配置成稱手的編輯器。</p>
<h2 id="退出-Vim-使用-Vim-的第一大難題？"><a href="#退出-Vim-使用-Vim-的第一大難題？" class="headerlink" title="退出 Vim - 使用 Vim 的第一大難題？"></a>退出 Vim - 使用 Vim 的第一大難題？</h2><p>雖然客觀上講，退出 Vim 相較於 Vim 其他功能要容易的多，但是確實是第一次使用 Vim 會遇到的一個問題。相對於其他的編輯器，Vim 沒有直觀的退出方式，以至於在 Stack Overflow 上有個專門的問題（<a href="https://stackoverflow.com/questions/11828270/how-to-exit-the-vim-editor" title="How to exit vim" target="_blank" rel="noopener">見此處</a>）解答如何退出 Vim。甚至有了如下的梗：<br><img src="/2018/08/12/Vim-一款让我相见恨晚的编辑器/exit_vim.jpg" title="如何退出Vim"></p>
<p>看來確實有必要對 Vim 的退出方式做個總結，之列出平常最常用的幾種退出方式</p>
<ul>
<li><code>:q</code> 正常退出</li>
<li><code>:q!</code> 強制退出不保存</li>
<li><code>:wq</code> 保存並退出</li>
<li><code>:x</code> 保存並退出，與 <code>:wq</code> 不同之處在於如果文件未做修改則不更新時間戳</li>
<li>強制關機</li>
</ul>
<h2 id="使用-Vim-前先看幫助文檔"><a href="#使用-Vim-前先看幫助文檔" class="headerlink" title="使用 Vim 前先看幫助文檔"></a>使用 Vim 前先看幫助文檔</h2><p>安裝好 Vim 後，你可能想要馬上嘗試輸入。但我強烈建議先閱讀軟件自帶的幫助文檔，一款優秀的軟件都會帶有一個詳細的用戶手冊以及一個簡要的使用說明，這有助於降低你在接觸新軟件時的痛苦感。你可以在 Vim 中隨時通過輸入 <code>:help&lt;CR&gt;</code>（<cr> 代表回車）來呼出幫助文檔。</cr></p>
<h2 id="配置-Vim-從-vimrc-開始"><a href="#配置-Vim-從-vimrc-開始" class="headerlink" title="配置 Vim - 從 .vimrc 開始"></a>配置 Vim - 從 .vimrc 開始</h2><p>由於 Vim 的流行，GitHub 上有各種各樣現成的 ‘vimrc’（Vim 的配置文件）可供使用。對於不想自己折騰配置的用戶來說，從 GitHub 上下載安裝其他用戶已經編輯好的 ‘vimrc’ 是最好的選擇。甚至還有像 <a href="https://github.com/SpaceVim/SpaceVim" title="SpaceVim" target="_blank" rel="noopener">SpaceVim</a> 這樣的模塊化 Vim 配置可以一鍵安裝使用，能大大減少配置所需的時間。</p>
<p>另一些用戶可能想要繼續對 Vim 進行自定義配置，那麼就需要對 ‘vimrc’ 進行修改。在 Linux 系統中，Gvim 與 Vim 的配置文件默認存放在 ‘$HOME/.vimrc’（Neovim 存放在 ‘$HOME/.config/nvim/init.vim’），Windows 下存放在 ‘$VIM/vimrc’。</p>
<p>你可以選擇自己新建一個文件從頭開始。不過還是建議拷貝官方自帶的配置示例，一方面可以省去一部分對常規配置的修改時間，另一方面，官方示例中對各配置語句對應有詳細的註釋。或者也可以選擇從 GitHub 上尋找一個適合你的 ‘vimrc’，或者參考<a href="https://coding.net/u/cycoe/p/config/git/blob/master/init.vim" title="Cycoe 的 vimrc" target="_blank" rel="noopener">我的配置</a>。</p>
<h3 id="常規配置"><a href="#常規配置" class="headerlink" title="常規配置"></a>常規配置</h3><p>在使用 Vim 之前，我們需要對其進行一些常規配置，來使它看起來更像一般的編輯器（以下步驟默認了你已經學會 Vim 的基本操作，包括移動光標、輸入、模式切換等）。</p>
<p>首先，通過輸入 <code>:e $HOME/.vimrc&lt;CR&gt;</code> 打開配置文件（’$HOME/.vimrc’ 替換爲你平臺對應的配置文件路徑）。這時，如果此前你已經拷貝了 Vim 的示例配置文件，或者是從網上下載安裝了其他人的配置，那麼你打開的文件裏應該就有那些內容，如果此前還未做過配置，那麼打開的就是一個空文件。</p>
<p>接下來可以選擇下面的配置中你需要的部分拷貝進你的 ‘vimrc’</p>
<figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">" about vim setup</span></span><br><span class="line"><span class="keyword">set</span> nocompatible               <span class="comment">" disable compatible for vi</span></span><br><span class="line"><span class="keyword">set</span> <span class="keyword">shell</span>=/bin/bash            <span class="comment">" setup default shell</span></span><br><span class="line"><span class="keyword">set</span> shortmess=at               <span class="comment">" 啓動時隱去援助提示</span></span><br><span class="line"><span class="keyword">set</span> mouse=<span class="keyword">a</span>                    <span class="comment">" active mouse control</span></span><br><span class="line"><span class="keyword">set</span> clipboard+=unnamed         <span class="comment">" support system clipboard</span></span><br><span class="line"><span class="keyword">let</span> mapleader=<span class="string">';'</span>              <span class="comment">" remap &lt;leader&gt;</span></span><br><span class="line"><span class="comment">" display setup</span></span><br><span class="line"><span class="keyword">set</span> relativenumber             <span class="comment">" display relative row number</span></span><br><span class="line"><span class="keyword">set</span> ruler                      <span class="comment">" 顯示標尺，就是在右下角顯示光標位置</span></span><br><span class="line"><span class="keyword">set</span> spell spelllang=en_us,cjk  <span class="comment">" Spell checking for English, escape Chinese</span></span><br><span class="line"><span class="keyword">set</span> langmenu=zh_CN.UTF-<span class="number">8</span></span><br><span class="line"><span class="keyword">set</span> helplang=<span class="keyword">cn</span>                <span class="comment">" 設置幫助文檔爲中文，需要 'yianwillis/vimcdoc'</span></span><br><span class="line"><span class="keyword">syntax</span> enable                  <span class="comment">" syntax highlight enable</span></span><br><span class="line"><span class="keyword">syntax</span> <span class="keyword">on</span>                      <span class="comment">" syntax highlight on</span></span><br><span class="line"><span class="keyword">set</span> background=dark            <span class="comment">" setup background color</span></span><br><span class="line"><span class="keyword">colorscheme</span> gruvbox            <span class="comment">" setup color scheme</span></span><br><span class="line"><span class="keyword">set</span> wildmenu                   <span class="comment">" select the candidates in interactive way</span></span><br><span class="line"><span class="keyword">set</span> backspace=<span class="built_in">indent</span>,eol,start <span class="comment">" more powerful backspacing</span></span><br><span class="line"><span class="keyword">set</span> cursorcolumn               <span class="comment">" 淺色高亮當前列</span></span><br><span class="line"><span class="keyword">set</span> cursorline                 <span class="comment">" 淺色高亮當前行</span></span><br><span class="line"><span class="keyword">set</span> novisualbell               <span class="comment">" 關閉視覺響鈴</span></span><br><span class="line"><span class="keyword">set</span> laststatus=<span class="number">2</span>               <span class="comment">" 啓動顯示狀態行</span></span><br><span class="line"><span class="keyword">set</span> showcmd                    <span class="comment">" show the command executed by shortcuts</span></span><br><span class="line"><span class="keyword">set</span> noshowmode                 <span class="comment">" don't show the mode status, avoid override argvs hint</span></span><br><span class="line"><span class="keyword">set</span> hlsearch                   <span class="comment">" highlight for searched results</span></span><br><span class="line"><span class="keyword">set</span> incsearch                  <span class="comment">" highlight for searching results</span></span><br><span class="line"><span class="keyword">set</span> showmatch                  <span class="comment">" show the match of brackets and Quotation mark</span></span><br><span class="line"><span class="keyword">set</span> ignorecase                 <span class="comment">" ignore case when searching and command completion</span></span><br><span class="line"><span class="keyword">set</span> gdefault                   <span class="comment">" default substitute in the whole line</span></span><br></pre></td></tr></table></figure>
<p>其中，最重要的一條設置就是 <code>set nocompatible</code>，它的作用是關閉對 Vi 的兼容性。Vi 是一款更加古老的編輯器，可視作是 Vim 的前身。如果保留對 Vi 的兼容性也就意味着你放棄了很多 Vim 獨有的特性。<code>set shell=/bin/bash</code> 顯式地聲明瞭 Vim 在運行腳本時調用的解釋器，如果是 Windows 用戶則需要去掉這行。</p>
<p>此時保存配置文件並通過 <code>:so \$HOME/.vimrc&lt;CR&gt;</code> 重載配置後應該就能看到改變了。但此時你可能會注意到幾條錯誤信息，不要緊張，這是因爲我們在配置中引用了一些插件功能，但事實上我們現在還未安裝插件，安裝插件後你會看到錯誤就消失了。</p>
<h3 id="安裝插件管理器-管理插件的插件"><a href="#安裝插件管理器-管理插件的插件" class="headerlink" title="安裝插件管理器 - 管理插件的插件"></a>安裝插件管理器 - 管理插件的插件</h3><p>Vim 有非常多的插件管理器可以使用，除去功能上的細微差異，我們可以將所有插件管理器分爲異步型和同步型。可以簡單地理解爲異步型可以同時下載安裝多個插件，而同步型一次只能處理一個。在 Vim 7.4 版本出來之前，插件管理器都是同步型的，包括大名鼎鼎的 Vundle。</p>
<p>在我剛開始使用 Vim 的時候，Vim 和 Neovim 都已經支持異步架構，但由於當時查的是中文資料，很多都是非常老的文章。基本上所有文章都推薦使用 Vundle 作爲插件管理器，事實上在你用過 vim-plug 之類的異步插件管理器後，你會無法再忍受 Vundle 的速度。這告訴我們技術型的文章還是要去 Google…</p>
<p>不會有人再去使用 Vim 7.4 之前的版本了，所以這裏我推薦使用 <a href="https://github.com/junegunn/vim-plug" title="vim-plug" target="_blank" rel="noopener">vim-plug</a> 作爲插件管理器。vim-plug 的優點是異步下載安裝、插件更新方便、支持插件按需加載，並且只包含一個文件。它的 <a href="https://github.com/junegunn/vim-plug" title="vim-plug" target="_blank" rel="noopener">GitHub 倉庫</a>上有詳細的安裝教程。</p>
<h3 id="安裝插件-本體不夠再打-mod"><a href="#安裝插件-本體不夠再打-mod" class="headerlink" title="安裝插件 - 本體不夠再打 mod"></a>安裝插件 - 本體不夠再打 mod</h3><p>雖然 Vim 並不是擴展性最好的編輯器，但它仍支持成千上萬個插件。尋找插件最好的途徑是 <a href="https://github.com" title="GitHub" target="_blank" rel="noopener">GitHub</a> 和 <a href="https://www.vim.org/scripts/" title="Vim Scripts" target="_blank" rel="noopener">Vim Scripts</a>。以下是我使用的插件列表：</p>
<figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="variable">g:python3_host_prog</span> = <span class="string">"/usr/bin/python3"</span></span><br><span class="line"><span class="keyword">call</span> plug#begin(<span class="string">'~/.vim/plugged'</span>)</span><br><span class="line">Plug <span class="string">'tomasr/molokai'</span>                                             <span class="comment">" molokai color scheme</span></span><br><span class="line">Plug <span class="string">'morhetz/gruvbox'</span>                                            <span class="comment">" gruvbox colorscheme theme</span></span><br><span class="line">Plug <span class="string">'mhinz/vim-startify'</span>                                         <span class="comment">" an awesome startup screen</span></span><br><span class="line">Plug <span class="string">'vim-scripts/fcitx.vim'</span>                                      <span class="comment">" auto switch fcitx status</span></span><br><span class="line">Plug <span class="string">'manu-mannattil/vim-sdcv'</span>                                    <span class="comment">" a simple dictionary for vim</span></span><br><span class="line">Plug <span class="string">'vim-airline/vim-airline'</span>                                    <span class="comment">" add status line</span></span><br><span class="line">Plug <span class="string">'scrooloose/nerdtree'</span>, &#123; <span class="string">'on'</span>: <span class="string">'NERDTreeToggle'</span> &#125;            <span class="comment">" directory tree</span></span><br><span class="line">Plug <span class="string">'majutsushi/tagbar'</span>, &#123; <span class="string">'on'</span>: <span class="string">'TagbarToggle'</span> &#125;                <span class="comment">" Class structure viewer, need ctags installed</span></span><br><span class="line">Plug <span class="string">'mbbill/undotree'</span>, &#123; <span class="string">'on'</span>: <span class="string">'UndotreeToggle'</span> &#125;                <span class="comment">" undo tree manager</span></span><br><span class="line">Plug <span class="string">'tpope/vim-fugitive'</span>                                         <span class="comment">" git support</span></span><br><span class="line">Plug <span class="string">'junegunn/gv.vim'</span>                                            <span class="comment">" view git commits in Vim</span></span><br><span class="line">Plug <span class="string">'junegunn/fzf'</span>, &#123; <span class="string">'dir'</span>: <span class="string">'~/.fzf'</span>, <span class="string">'do'</span>: <span class="string">'./install --all'</span> &#125; <span class="comment">" fuzzy file searcher</span></span><br><span class="line">Plug <span class="string">'junegunn/fzf.vim'</span>                                           <span class="comment">" provide many other search functions</span></span><br><span class="line">Plug <span class="string">'tpope/vim-commentary'</span>                                       <span class="comment">" a better comment tool</span></span><br><span class="line">Plug <span class="string">'vim-scripts/EasyMotion'</span>                                     <span class="comment">" enhance default motions</span></span><br><span class="line">Plug <span class="string">'Yggdroot/indentLine'</span>                                        <span class="comment">" indent line indicator</span></span><br><span class="line">Plug <span class="string">'jiangmiao/auto-pairs'</span>                                       <span class="comment">" auto add pairs</span></span><br><span class="line">Plug <span class="string">'junegunn/rainbow_parentheses.vim'</span>                           <span class="comment">" a much simpler-using fork of above</span></span><br><span class="line">Plug <span class="string">'junegunn/limelight.vim'</span>                                     <span class="comment">" dim others</span></span><br><span class="line">Plug <span class="string">'junegunn/goyo.vim'</span>                                          <span class="comment">" provide a dim writing environment</span></span><br><span class="line">Plug <span class="string">'w0rp/ale'</span>                                                   <span class="comment">" syntax error check</span></span><br><span class="line">Plug <span class="string">'Valloric/YouCompleteMe'</span>,                                    <span class="comment">" auto complete</span></span><br><span class="line">            \&#123; <span class="string">'do'</span>: <span class="string">'./install.py --clang-completer'</span> &#125;</span><br><span class="line">Plug <span class="string">'SirVer/ultisnips'</span>                                           <span class="comment">" auto complete string</span></span><br><span class="line">Plug <span class="string">'honza/vim-snippets'</span>                                         <span class="comment">" complete rules for ultisnips</span></span><br><span class="line">Plug <span class="string">'junegunn/vim-easy-align'</span>                                    <span class="comment">" align tool</span></span><br><span class="line">Plug <span class="string">'godlygeek/tabular'</span>                                          <span class="comment">" advanced align tool</span></span><br><span class="line">Plug <span class="string">'gabrielelana/vim-markdown'</span>, &#123; <span class="string">'for'</span>: <span class="string">'markdown'</span> &#125;           <span class="comment">" markdown plugin</span></span><br><span class="line">Plug <span class="string">'joker1007/vim-markdown-quote-syntax'</span>, &#123; <span class="string">'for'</span>: <span class="string">'markdown'</span> &#125; <span class="comment">" syntax highlight for quoted code</span></span><br><span class="line">Plug <span class="string">'iamcco/mathjax-support-for-mkdp'</span>, &#123; <span class="string">'for'</span>: <span class="string">'markdown'</span> &#125;     <span class="comment">" mathjax support for markdown preview</span></span><br><span class="line">Plug <span class="string">'iamcco/markdown-preview.vim'</span>, &#123; <span class="string">'for'</span>: <span class="string">'markdown'</span> &#125;         <span class="comment">" markdown preview support</span></span><br><span class="line">Plug <span class="string">'vim-scripts/indentpython.vim'</span>, &#123; <span class="string">'for'</span>: <span class="string">'python'</span> &#125;          <span class="comment">" auto indent for python</span></span><br><span class="line">Plug <span class="string">'nvie/vim-flake8'</span>, &#123; <span class="string">'for'</span>: <span class="string">'python'</span> &#125;                       <span class="comment">" flake8 style code check, need install flake8</span></span><br><span class="line"><span class="comment">" 這兩個插件被 neoformat 替代了</span></span><br><span class="line"><span class="string">" Plug 'tell-k/vim-autopep8', &#123; 'for': 'python' &#125;                 "</span> <span class="keyword">a</span> <span class="keyword">python</span> code format tool wrapper <span class="keyword">for</span> autopep8</span><br><span class="line"><span class="string">" Plug 'fisadev/vim-isort', &#123; 'for': 'python' &#125;                   "</span> imports sorter <span class="keyword">for</span> <span class="keyword">python</span></span><br><span class="line">Plug <span class="string">'vim-latex/vim-latex'</span>, &#123; <span class="string">'for'</span>: <span class="string">'tex'</span> &#125;                      <span class="comment">" latex edit environment</span></span><br><span class="line">Plug <span class="string">'skywind3000/asyncrun.vim'</span>                                   <span class="comment">" AsyncRun plugin</span></span><br><span class="line">Plug <span class="string">'hotoo/pangu.vim'</span>                                            <span class="comment">" Chinese text format</span></span><br><span class="line">Plug <span class="string">'vimwiki/vimwiki'</span>                                            <span class="comment">" write wiki in vim</span></span><br><span class="line">Plug <span class="string">'yianwillis/vimcdoc'</span>                                         <span class="comment">" a Chinese help handbook for Vim</span></span><br><span class="line">Plug <span class="string">'sbdchd/neoformat'</span>                                           <span class="comment">" a collection of format tools</span></span><br><span class="line">Plug <span class="string">'ludovicchabant/vim-gutentags'</span>                               <span class="comment">" generate tags for project</span></span><br><span class="line">Plug <span class="string">'mhinz/vim-signify'</span>                                          <span class="comment">" show file modifying status for git</span></span><br><span class="line">Plug <span class="string">'Shougo/echodoc.vim'</span>                                         <span class="comment">" show argvs hint on the command line</span></span><br><span class="line"><span class="string">"======================"</span></span><br><span class="line"><span class="string">"  text object 全家桶  "</span></span><br><span class="line"><span class="string">"======================"</span></span><br><span class="line">Plug <span class="string">'kana/vim-textobj-user'</span>                                            <span class="comment">" 用戶自定義 text object</span></span><br><span class="line">Plug <span class="string">'kana/vim-textobj-indent'</span>                                          <span class="comment">" 縮進對象，關鍵字 &lt;i&gt;</span></span><br><span class="line">Plug <span class="string">'kana/vim-textobj-syntax'</span>                                          <span class="comment">" 語法對象</span></span><br><span class="line">Plug <span class="string">'kana/vim-textobj-function'</span>, &#123; <span class="string">'for'</span>:[<span class="string">'c'</span>, <span class="string">'cpp'</span>, <span class="string">'vim'</span>, <span class="string">'java'</span>] &#125; <span class="comment">" 函數對象，關鍵字 &lt;f&gt;</span></span><br><span class="line">Plug <span class="string">'sgur/vim-textobj-parameter'</span>                                       <span class="comment">" 參數對象，關鍵字 &lt;,&gt;</span></span><br><span class="line">Plug <span class="string">'coderifous/textobj-word-column.vim'</span>                               <span class="comment">" 列對象，關鍵字 &lt;c&gt;</span></span><br><span class="line">Plug <span class="string">'bps/vim-textobj-python'</span>                                           <span class="comment">" python 對象合集，&lt;c&gt; 類，&lt;f&gt; 函數</span></span><br><span class="line">Plug <span class="string">'tpope/vim-surround'</span>                                               <span class="comment">" deal with surround for text object</span></span><br><span class="line"><span class="keyword">call</span> plug#end()</span><br><span class="line"><span class="keyword">filetype</span> plugin <span class="built_in">indent</span> <span class="keyword">on</span></span><br></pre></td></tr></table></figure>
<p>由於 vim-plug 的強大，我們只需要將上述配置粘貼進 vimrc 中，重載配置文件後運行 <code>:PlugInstall&lt;CR&gt;</code> 就會自動安裝所有插件，甚至 vim-plug 會幫我們做好安裝後的處理。</p>
<h3 id="必裝插件配置-大大提高生產力"><a href="#必裝插件配置-大大提高生產力" class="headerlink" title="必裝插件配置 - 大大提高生產力"></a>必裝插件配置 - 大大提高生產力</h3><p>通過 vim-plug 安裝的插件大部分都是即裝即用的，但也包括小部分需要在安裝完成後進行一定的配置才能舒適地使用。</p>
<h4 id="YouCompleteMe-最強補全神器"><a href="#YouCompleteMe-最強補全神器" class="headerlink" title="YouCompleteMe - 最強補全神器"></a>YouCompleteMe - 最強補全神器</h4><p><a href="https://github.com/Valloric/YouCompleteMe" title="YouCompleteMe" target="_blank" rel="noopener">YouCompleteMe</a> 是谷歌程序員 Valloric 開發的一款智能補全插件。在 YouCompleteMe 出來之前，大部分補全插件都是基於 tag 分析，也就是從當前文件以及其他 buffer 中的文件文本中匹配類似字符串進行補全，說白了就是靠猜。而 YouCompleteMe 是真正支持程序語義分析的補全，能夠理解程序語言進行補全，準確率大大提高，並且體驗也提升了很多。</p>
<p>盜用 YouCompleteMe 官方倉庫上的一張效果圖</p>
<p><img src="https://camo.githubusercontent.com/1f3f922431d5363224b20e99467ff28b04e810e2/687474703a2f2f692e696d6775722e636f6d2f304f50346f6f642e676966" alt="YouCompleteMe 效果圖" title="YouCompleteMe 效果圖（來自 YouCompleteMe 官方倉庫）"></p>
<p>雖然 YouCompleteMe 效果看起來很炫酷，但它也被稱爲“最難安裝的插件”。它的底層是用 C++ 寫成的，爲了能作爲 Vim 的插件，外層又用 Python 做了封裝，因此它也是最複雜的插件。<code>Plug &#39;Valloric/YouCompleteMe&#39;, { &#39;do&#39;: &#39;./install.py --clang-completer&#39; }</code> 命令要求 vim-plug 將 YouCompleteMe 插件下載下來後自動編譯，但如果你的終端上缺少編譯的依賴會導致編譯失敗，此時我們需要手動進行編譯。</p>
<p>在 Linux 下進行安裝會相對比較容易，在編譯之前你需要但不限於以下工具：</p>
<ul>
<li>cmake</li>
<li>automake</li>
<li>python3-dev（python2 或 python3）</li>
</ul>
<p>之後運行 <code>cd ~/.vim/plugged/YouCompleteMe/</code> 進入 YouCompleteMe 的安裝目錄，運行 <code>./install.py --clang-completer</code> 進行安裝，如果不需要 C 語言補全支持的話無需 <code>--clang-completer</code> 選項。安裝程序會自動下載 libclang 依賴，等待安裝完成即可。Windows 的安裝過程大部分相似，可參考 YouCompleteMe 的官方倉庫文檔。</p>
<p>再次使用 Vim 打開一個 Python 或 cpp 文件應該就能自動補全了。但接下來你會發現 YouCompleteMe 彈出的補全菜單裏只會包括前面你輸入過的關鍵字，並沒有進行語義識別，那不是和自帶的 omni 補全沒區別！還浪費我這麼長時間安裝！其實之前我也是這麼想的，直到有一天我看到<a href="https://zhuanlan.zhihu.com/p/33046090" title="YouCompleteMe 中容易忽略的配置" target="_blank" rel="noopener">這篇文章</a>，我才發現原來我一直用的是半殘的 YouCompleteMe，根本沒發揮出它真正的實力。通過如下配置就能使 YouCompleteMe 的補全策略更貼近於常見的 IDE。</p>
<figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">set</span> completeopt=longest,<span class="keyword">menu</span>                                <span class="comment">" YCM 的提示方式，previews 會顯示具體預覽窗口，menu 不提示</span></span><br><span class="line"><span class="comment">" let g:ycm_add_preview_to_completeopt = 0</span></span><br><span class="line"><span class="keyword">let</span> <span class="variable">g:ycm_collect_identifiers_from_tags_files</span>=<span class="number">1</span>             <span class="comment">" 使用 ctags 生成的 tags 文件</span></span><br><span class="line"><span class="keyword">let</span> <span class="variable">g:ycm_min_num_of_chars_for_completion</span>=<span class="number">2</span>                 <span class="comment">" 從第 2 個鍵入字符就開始羅列匹配項</span></span><br><span class="line"><span class="keyword">let</span> <span class="variable">g:ycm_seed_identifiers_with_syntax</span>=<span class="number">1</span>                    <span class="comment">" 語法關鍵字補全</span></span><br><span class="line"><span class="keyword">let</span> <span class="variable">g:ycm_cache_omnifunc</span>=<span class="number">1</span>                                  <span class="comment">" 禁止緩存匹配項,每次都重新生成匹配項</span></span><br><span class="line"><span class="keyword">let</span> <span class="variable">g:ycm_complete_in_comments</span> = <span class="number">1</span>                          <span class="comment">" 在註釋輸入中也能補全</span></span><br><span class="line"><span class="keyword">let</span> <span class="variable">g:ycm_complete_in_strings</span> = <span class="number">1</span>                           <span class="comment">" 在字符串輸入中也能補全</span></span><br><span class="line"><span class="keyword">let</span> <span class="variable">g:ycm_collect_identifiers_from_comments_and_strings</span> = <span class="number">1</span> <span class="comment">" 註釋和字符串中的文字也會被收入補全</span></span><br><span class="line"><span class="keyword">let</span> <span class="variable">g:ycm_python_binary_path</span> = <span class="string">'/usr/bin/python'</span>            <span class="comment">" set default python binary</span></span><br><span class="line"><span class="keyword">let</span> <span class="variable">g:ycm_global_ycm_extra_conf</span> = <span class="string">'~/.ycm_extra_conf.py'</span>    <span class="comment">" set global ycm extra config path</span></span><br><span class="line"><span class="keyword">let</span> <span class="variable">g:ycm_confirm_extra_conf</span> = <span class="number">0</span>                            <span class="comment">" confirm for config file</span></span><br><span class="line"><span class="keyword">let</span> <span class="variable">g:ycm_use_ultisnips_completer</span>=<span class="number">1</span>                         <span class="comment">" 查詢 ultisnips 提供的代碼模板補全</span></span><br><span class="line"><span class="keyword">let</span> <span class="variable">g:ycm_key_invoke_completion</span> = <span class="string">'&lt;c-z&gt;'</span>                   <span class="comment">" 手動觸發補全的按鍵</span></span><br><span class="line"><span class="comment">" 使 YCM 能在輸入兩個字母的時候自動基於語義補全</span></span><br><span class="line"><span class="keyword">let</span> <span class="variable">g:ycm_semantic_triggers</span> =  &#123;</span><br><span class="line">			\ <span class="string">'c,cpp,python,java,go,erlang,perl'</span>: [<span class="string">'re!\w&#123;2&#125;'</span>],</span><br><span class="line">			\ <span class="string">'cs,lua,javascript'</span>: [<span class="string">'re!\w&#123;2&#125;'</span>],</span><br><span class="line">			\ &#125;</span><br><span class="line"><span class="keyword">nnoremap</span> <span class="symbol">&lt;leader&gt;</span>d :YcmCompleter GoToDefinitionElseDeclaration<span class="symbol">&lt;CR&gt;</span> <span class="comment">" goto definition</span></span><br><span class="line"><span class="keyword">autocmd</span> InsertLeave * <span class="keyword">if</span> <span class="built_in">pumvisible</span>() == <span class="number">0</span>|<span class="keyword">pclose</span>|<span class="keyword">endif</span>            <span class="comment">" 離開插入模式後自動關閉預覽窗口</span></span><br><span class="line"><span class="keyword">autocmd</span> VimEnter * EchoDocEnable</span><br></pre></td></tr></table></figure>
<h4 id="ALE-第二好的異步語法檢查工具"><a href="#ALE-第二好的異步語法檢查工具" class="headerlink" title="ALE - 第二好的異步語法檢查工具"></a>ALE - 第二好的異步語法檢查工具</h4><p><a href="https://github.com/w0rp/ale" title="ALE 官方倉庫" target="_blank" rel="noopener">ALE</a> 是一款非常強大的異步語法檢查工具。在 Vim 支持異步之前，最好的語法檢查工具是 <a href="https://github.com/vim-syntastic/syntastic" title="Syntastic 官方倉庫" target="_blank" rel="noopener">Syntastic</a>，但由於它非異步的工作方式，導致語法檢查會阻塞主線程，使用體驗比較差。在新版 Vim 中，都會推薦 ALE 或其他支持異步的語法檢查工具。事實上 ALE 並不僅僅是一款語法檢查工具，它是包括了語法檢查、代碼風格格式化、自動補全功能的工具集。</p>
<p>ALE 安裝完成後，隨意打開一個代碼文件。如果語法存在錯誤，那麼在窗口的最左側會顯示一列符號，包括 ‘&gt;&gt;’ 或 ‘—‘。將光標移至有標記的行，在最下方的 statusline 中會顯示錯誤的具體信息。</p>
<figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">" let g:ale_set_loclist = 0           "</span> show the lint <span class="keyword">as</span> <span class="keyword">a</span> dot <span class="keyword">on</span> <span class="keyword">left</span> of <span class="keyword">a</span> <span class="built_in">line</span></span><br><span class="line"><span class="string">" let g:ale_set_quickfix = 1          "</span> show the lint in quickfix <span class="keyword">list</span></span><br><span class="line"><span class="string">" let g:ale_open_list = 1             "</span> show quickfix window <span class="keyword">to</span> show error message</span><br><span class="line"><span class="string">" let g:ale_keep_list_window_open = 1 "</span> keep quickfix window show whether errors exist</span><br><span class="line"><span class="string">" let g:ale_sign_column_always = 1    "</span> 保持左側邊欄始終可見</span><br><span class="line"><span class="keyword">nmap</span> <span class="symbol">&lt;silent&gt;</span> <span class="symbol">&lt;C-k&gt;</span> <span class="symbol">&lt;Plug&gt;</span>(ale_previous_wrap)</span><br><span class="line"><span class="keyword">nmap</span> <span class="symbol">&lt;silent&gt;</span> <span class="symbol">&lt;C-j&gt;</span> <span class="symbol">&lt;Plug&gt;</span>(ale_next_wrap)</span><br><span class="line"><span class="comment">" Check Python files with flake8 and pylint.</span></span><br><span class="line"><span class="comment">" let b:ale_linters = ['flake8', 'pylint']</span></span><br><span class="line"><span class="comment">" set fixers for different file types</span></span><br><span class="line"><span class="keyword">let</span> <span class="variable">b:ale_fixers</span> = &#123;</span><br><span class="line">            \ <span class="string">'python'</span>: [<span class="string">'isort'</span>, <span class="string">'autopep8'</span>],</span><br><span class="line">            \ <span class="string">'cpp'</span>: [<span class="string">'clang-format'</span>],</span><br><span class="line">            \ <span class="string">'markdown'</span>: [<span class="string">'prettier'</span>]&#125;</span><br><span class="line"><span class="comment">" let g:ale_linters_explicit = 1</span></span><br><span class="line"><span class="keyword">let</span> <span class="variable">g:ale_completion_delay</span> = <span class="number">500</span>                     <span class="comment">" 補全的延遲</span></span><br><span class="line"><span class="keyword">let</span> <span class="variable">g:ale_echo_delay</span> = <span class="number">20</span>                            <span class="comment">" 回顯的延遲</span></span><br><span class="line"><span class="keyword">let</span> <span class="variable">g:ale_lint_delay</span> = <span class="number">500</span>                           <span class="comment">" 停止輸入後更新 lint 標記的延遲</span></span><br><span class="line"><span class="keyword">let</span> <span class="variable">g:ale_echo_msg_format</span> = <span class="string">'[%linter%] &lt;%code&gt; %%s'</span> <span class="comment">" 自定義 lint 輸出格式</span></span><br><span class="line"><span class="keyword">let</span> <span class="variable">g:ale_lint_on_text_changed</span> = <span class="string">'normal'</span>            <span class="comment">" 當文字在 NORMAL 模式下發生更改的時候更新 lint，防止 YCM 頻繁刷新</span></span><br><span class="line"><span class="keyword">let</span> <span class="variable">g:ale_lint_on_insert_leave</span> = <span class="number">1</span>                   <span class="comment">" 離開 INSERT 模式時更新 lint</span></span><br></pre></td></tr></table></figure>
<p>將錯誤信息表示在左側只是一種方式，你也可以通過反註釋前 4 行，利用 Vim 自帶的 quickfix 窗口顯示錯誤信息。雖然通過這種方式你能夠更清晰的瞭解各個錯誤的具體信息，但需要佔用一部分寶貴的屏幕空間。</p>
<p>11 至 14 行設置了 ALE 的默認格式化工具，ALE 本身並不對代碼進行格式化，而是針對不同文件類型調用合適的格式化工具進行處理（ALE 支持的格式化工具列表可參照<a href="https://github.com/w0rp/ale" title="ALE 官方倉庫" target="_blank" rel="noopener">官方倉庫</a>）。其中 <code>isort</code>、<code>autopep8</code>、<code>prettier</code> 都是 Python 編寫的命令行工具，<code>clang-format</code> 是 <code>clang</code> 編譯器帶的 C++ 格式化工具。</p>
<p>20、21 行是針對 YCM 做的額外配置，據悉可以解決 YCM 補全菜單頻繁刷新的問題。</p>
<!--links-->

          
        
      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>



          </div>
          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">Cycoe</p>
              <p class="site-description motion-element" itemprop="description">Cycoe's Personal Blog</p>
          </div>

          
            <nav class="site-state motion-element">
              
                <div class="site-state-item site-state-posts">
                
                  <a href="/archives/">
                
                    <span class="site-state-item-count">27</span>
                    <span class="site-state-item-name">日志</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-categories">
                  <a href="/categories/index.html">
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">13</span>
                    <span class="site-state-item-name">分类</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-tags">
                  <a href="/tags/index.html">
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">14</span>
                    <span class="site-state-item-name">标签</span>
                  </a>
                </div>
              
            </nav>
          

          

          
            <div class="links-of-author motion-element">
              
                <span class="links-of-author-item">
                  <a href="https://github.com/cycoe" target="_blank" title="GitHub"><i class="fa fa-fw fa-github"></i>GitHub</a>
                  
                </span>
              
            </div>
          

          
          

          
          

          
            
          
          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love" id="animate">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Cycoe</span>

  

  
</div>




  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动 v3.7.1</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/theme-next/hexo-theme-next">NexT.Mist</a> v6.1.0</div>



  <div class="footer-custom">Hosted by <a target="_blank" rel="external nofollow" href="https://pages.coding.me"><b>Coding Pages</b></a></div>


        








        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>


























  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=6.1.0"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=6.1.0"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=6.1.0"></script>



  



	





  





  








  <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
  
  
  <script src="//unpkg.com/valine/dist/Valine.min.js"></script>
  
  <script type="text/javascript">
    var GUEST = ['nick','mail','link'];
    var guest = 'nick,mail,link';
    guest = guest.split(',').filter(function (item) {
      return GUEST.indexOf(item)>-1;
    });
    new Valine({
        el: '#comments' ,
        verify: false,
        notify: false,
        appId: 'JMPgCt4i5QXYiepmd7ADdLfm-gzGzoHsz',
        appKey: 'z6zWp6MXVNc4WnbBOCkVw3Ir',
        placeholder: '此处评论',
        avatar:'mm',
        guest_info:guest,
        pageSize:'10' || 10,
    });
  </script>



  





  

  

  

  
  

  
  
    
      
    
      
    
      
    
      
    
      
        
      
    
      
    
      
    
      
    
      
    
      
    
  

  
    
      <script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
        processEscapes: true,
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
      }
    });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Queue(function() {
      var all = MathJax.Hub.getAllJax(), i;
        for (i=0; i < all.length; i += 1) {
          all[i].SourceElement().parentNode.className += ' has-jax';
        }
    });
</script>
<script type="text/javascript" src="//cdn.jsdelivr.net/npm/mathjax@2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

    
  


  
  

  

  

  

  

</body>
</html>
