<!DOCTYPE html>
<html lang="en">
<head>
<!-- 2020-06-08 Mon 19:47 -->
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>与 C++ 的第一类接触</title>
<meta name="generator" content="Org mode">
<meta name="author" content="Cycoe">
<link rel="stylesheet" type="text/css" href="/static/css/default.css" />
<link rel="shortcut icon" type="image/png" href="/static/img/favicon.png"/>
<script language="JavaScript" type="text/javascript" src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.min.js"></script>
<script language="JavaScript" type="text/javascript" src="/static/js/main.js"></script>
</head>
<body>
<div id="preamble" class="status">
<div id="top-container">
  <a id="site-name" href="/">Cycoe<span id="at-home">@Home</span></a>
  <div id="banner">Keep It Simple Stupid</div>
</div>

<div id="top-nav">
  <div id="nav-wrapper">
    <div class="nav-btn" id="toc-wrapper">
      <span class="vertical-align">Ξ</span>
      <div id="go-top">
        <a href="javascript:window.scrollTo(0,0)" style="color: black !important; border-bottom: none !important;" class="tooltip" title="Go to the top of the page">
        <span class="top">&uarr;</span>
        </a></div>
    </div>
    <div id="nav-left-wrapper">
      <a class="nav-btn" id="photo-entry" href="/Photo/index.html" title="Photo">Photo</a>
      <a class="nav-btn" id="about-entry" href="/about.html" title="About Me">About</a>
      <div id="nav-title-wrapper">
        <span id="nav-title">与 C++ 的第一类接触</span>
        <span id="nav-date">Written @<2020-05-27 Wed 21:31></span>
      </div>
    </div>
  </div>
</div>

<!-- The Modal -->
<div id="img-modal" class="modal">
  <!-- The Close Button -->
  <span class="close">&times;</span>
  <!-- Modal Content (The Image) -->
  <img class="modal-content" id="img-wrapper">
  <!-- Modal Caption (Image Text) -->
  <div id="caption"></div>
</div>
</div>
<div id="content">
<header>
<h1 class="title">与 C++ 的第一类接触</h1>
</header><nav id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#org93c0b4d">1. 引言</a>
<ul>
<li><a href="#org65651e6">1.1. 基本的输入输出</a></li>
<li><a href="#org6b614cb">1.2. 使用循环读取标准输入</a></li>
</ul>
</li>
<li><a href="#orga952bb9">2. 变量和基本类型</a>
<ul>
<li><a href="#org7efe20a">2.1. 可以用先定义的变量去初始化后定义的变量</a></li>
<li><a href="#orgecc7ff5">2.2. 列表初始化</a></li>
<li><a href="#org6461f73">2.3. 默认初始化</a></li>
<li><a href="#org38331f5">2.4. 声明与定义</a></li>
<li><a href="#org80f2c4b">2.5. 变量标识符</a></li>
<li><a href="#org5b0e878">2.6. 引用</a></li>
<li><a href="#org0df3463">2.7. 空指针</a></li>
<li><a href="#orgab10d25">2.8. <code>void*</code> 指针</a></li>
<li><a href="#org4ca440d">2.9. <code>const</code> 常量限定符</a></li>
<li><a href="#orgfce063f">2.10. 命名空间的 <code>using</code> 声明</a></li>
</ul>
</li>
<li><a href="#org0a002c5">3. 字符串、向量和数组</a>
<ul>
<li><a href="#org45d5483">3.1. 标准库 <code>string</code></a>
<ul>
<li><a href="#org0e00a29">3.1.1. 定义和初始化</a></li>
<li><a href="#org455bc17">3.1.2. 为 string 对象赋值</a></li>
<li><a href="#orge7e72f4">3.1.3. 读写 string 对象</a></li>
<li><a href="#org44af7b5">3.1.4. 使用 <code>getline</code> 读取一整行</a></li>
<li><a href="#orga2752ab">3.1.5. <code>empty</code> 和 <code>size</code></a></li>
<li><a href="#orga68e102">3.1.6. 比较 string 对象</a></li>
<li><a href="#org0ffdeb7">3.1.7. string 对象相加</a></li>
<li><a href="#org385bcb3">3.1.8. 字面值与 string 对象相加</a></li>
<li><a href="#orgc93abd3">3.1.9. 处理 string 对象中的字符</a></li>
<li><a href="#org3daef82">3.1.10. 使用字符串数组初始化 string 对象</a></li>
<li><a href="#orgbe54c31">3.1.11. 从 string 对象中获取 C 风格的字符串数组指针</a></li>
</ul>
</li>
<li><a href="#org9cd5bb2">3.2. 标准库类型 <code>vector</code></a>
<ul>
<li><a href="#orga3732a3">3.2.1. 定义和初始化</a></li>
<li><a href="#org12e77a7">3.2.2. 向 vector 对象中添加元素</a></li>
<li><a href="#orga4571a8">3.2.3. 其它 vector 操作</a></li>
<li><a href="#org872cfb5">3.2.4. 用数组初始化 vector 对象</a></li>
</ul>
</li>
<li><a href="#orge0f0b1f">3.3. 迭代器</a>
<ul>
<li><a href="#org385b70a">3.3.1. 迭代器运算</a></li>
<li><a href="#orgd8c8280">3.3.2. <code>begin</code> 和 <code>end</code> 运算符</a></li>
<li><a href="#org2342ffe">3.3.3. 迭代器算数运算</a></li>
</ul>
</li>
<li><a href="#orgcd83887">3.4. 数组</a>
<ul>
<li><a href="#org46adc2f">3.4.1. 范围 for 语句</a></li>
<li><a href="#orgebc441a">3.4.2. 数组中的自动类型推断</a></li>
<li><a href="#org2a83ee3">3.4.3. 标准库函数 <code>begin</code> 和 <code>end</code></a></li>
<li><a href="#org41db26c">3.4.4. 指针的差值</a></li>
<li><a href="#orgbb96256">3.4.5. 多维数组与下标</a></li>
<li><a href="#org53d7a5e">3.4.6. 多维数组与指针</a></li>
<li><a href="#org2d51d50">3.4.7. 类型别名简化多维数组指针</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#orgf5aa759">4. 表达式</a>
<ul>
<li><a href="#org9f524e7">4.1. 优先使用递增递减运算符的后置版本</a></li>
<li><a href="#org9e7b687">4.2. 运算对象可按任意顺序求值</a></li>
<li><a href="#orgc3ad58c">4.3. 强制类型转换</a></li>
</ul>
</li>
<li><a href="#orgbbe1109">5. 语句</a>
<ul>
<li><a href="#orgbf50691">5.1. try 语句块与异常处理</a>
<ul>
<li><a href="#org43bd9ea">5.1.1. throw 表达式</a></li>
<li><a href="#orgffd7382">5.1.2. <code>try</code> 语句块</a></li>
<li><a href="#orgec22492">5.1.3. 异常类</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#orgd607f7b">6. 函数</a>
<ul>
<li><a href="#orge5b9c5d">6.1. 参数传递</a>
<ul>
<li><a href="#org4d0aec0">6.1.1. 值传递和引用传递</a></li>
<li><a href="#org02af77e">6.1.2. const 形参和实参</a></li>
<li><a href="#orgf16616c">6.1.3. 传递数组长度</a></li>
<li><a href="#orgff8d8e7">6.1.4. 使用引用传递数组</a></li>
<li><a href="#orgd266c04">6.1.5. 可变长参数列表</a></li>
<li><a href="#org77d9457">6.1.6. 函数返回值</a></li>
<li><a href="#org9fb09b1">6.1.7. 返回数组指针</a></li>
</ul>
</li>
<li><a href="#orge7fb966">6.2. 函数重载</a>
<ul>
<li><a href="#org241b003">6.2.1. <code>const_cast</code> 与重载</a></li>
<li><a href="#orgaa9c79b">6.2.2. 调用重载的函数</a></li>
<li><a href="#org1c0d2d6">6.2.3. 重载与作用域</a></li>
</ul>
</li>
<li><a href="#org9f3e710">6.3. 默认实参</a>
<ul>
<li><a href="#orgc71b657">6.3.1. 使用默认实参调用函数</a></li>
<li><a href="#org504e4a1">6.3.2. 默认实参声明</a></li>
<li><a href="#orgd090c24">6.3.3. 默认实参初始值</a></li>
</ul>
</li>
<li><a href="#orgea5dbbb">6.4. 内联函数和 <code>constexpr</code> 函数</a></li>
<li><a href="#orgb10d352">6.5. <span class="todo TODO">TODO</span> 函数匹配</a></li>
</ul>
</li>
<li><a href="#org9f221b6">7. 类</a>
<ul>
<li><a href="#orgd84f798">7.1. 定义抽象数据类型</a>
<ul>
<li><a href="#orgec10260">7.1.1. 使用 <code>Sales_data</code> 类的接口</a></li>
<li><a href="#org039d9e6">7.1.2. 改进 <code>Sales_data</code> 类</a></li>
<li><a href="#org60c6577">7.1.3. 定义类相关的非成员函数</a></li>
<li><a href="#org9e1093a">7.1.4. 构造函数</a></li>
<li><a href="#orgad77641">7.1.5. 拷贝、赋值和析构</a></li>
</ul>
</li>
<li><a href="#org37aa083">7.2. 访问控制与封装</a>
<ul>
<li><a href="#org3a0891d">7.2.1. 访问说明符</a></li>
<li><a href="#orgc6fbe03">7.2.2. 友元</a></li>
</ul>
</li>
<li><a href="#org5e4d0c9">7.3. 类的其它特性</a>
<ul>
<li><a href="#org0be4ab1">7.3.1. 类成员再探</a></li>
<li><a href="#org3664589">7.3.2. 返回 <code>*this</code> 的成员函数</a></li>
<li><a href="#org97dd44c">7.3.3. 类类型</a></li>
<li><a href="#org63c9439">7.3.4. 友元再探</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</nav>
<p>
最近开始看 <i>C++ Primer</i> 这本书，C++ 这种缝合怪学起来还是非常有满足感的。本文记录一
下学习过程中遇到的知识点，因为之前有了 C 基础，因此主要记录与 C 代码不同的地方。
</p>

<!-- more -->

<div id="outline-container-org93c0b4d" class="outline-2">
<h2 id="org93c0b4d"><span class="section-number-2">1</span> 引言</h2>
<div class="outline-text-2" id="text-1">
</div>
<div id="outline-container-org65651e6" class="outline-3">
<h3 id="org65651e6"><span class="section-number-3">1.1</span> 基本的输入输出</h3>
<div class="outline-text-3" id="text-1-1">
<p>
基本的输入输出使用 <code>iostream</code> 对象，其中 <code>cin</code> 是输入流对象， <code>cout</code> 是输出流对象，
<code>std</code> 是变量的命名空间。
</p>

<table id="org9d143cf">


<colgroup>
<col  class="org-right">

<col  class="org-right">
</colgroup>
<tbody>
<tr>
<td class="org-right">5</td>
<td class="org-right">6</td>
</tr>
</tbody>
</table>

<div class="org-src-container">
<pre class="src src-C++"><span style="color: #18b2b2;">int</span> <span style="color: #ff8700;">v1</span> = 0, <span style="color: #ff8700;">v2</span> = 0;

<span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">&lt;&lt; &#36816;&#31639;&#31526;&#20250;&#36820;&#22238;&#24038;&#20391;&#30340; iostream &#23545;&#35937;</span>
<span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">std::endl &#20250; flush stream buffer</span>
<span style="color: #1f5bff;">std</span>::cout &lt;&lt; <span style="color: #ff1f8b;">"Enter two numbers:"</span> &lt;&lt; <span style="color: #1f5bff;">std</span>::endl;

<span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">&#31561;&#20215;&#20110; std::cin &gt;&gt; v1; std::cin &gt;&gt; v2;</span>
<span style="color: #1f5bff;">std</span>::cin &gt;&gt; v1 &gt;&gt; v2;
<span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">&#20026;&#26041;&#20415;&#28436;&#31034;&#65292;&#20351;&#29992; table: input-1 &#20013;&#30340;&#25968;&#25454;&#20316;&#20026;&#36755;&#20837;&#25968;&#25454;</span>
v1 = input<span style="color: #cc0000; font-weight: bold;">[</span>0<span style="color: #cc0000; font-weight: bold;">][</span>0<span style="color: #cc0000; font-weight: bold;">]</span>;
v2 = input<span style="color: #cc0000; font-weight: bold;">[</span>0<span style="color: #cc0000; font-weight: bold;">][</span>1<span style="color: #cc0000; font-weight: bold;">]</span>;
<span style="color: #1f5bff;">std</span>::cout &lt;&lt; <span style="color: #ff1f8b;">"The sum of "</span> &lt;&lt; v1 &lt;&lt; <span style="color: #ff1f8b;">" and "</span> &lt;&lt; v2
&lt;&lt; <span style="color: #ff1f8b;">" is "</span> &lt;&lt; v1 + v2 &lt;&lt; <span style="color: #1f5bff;">std</span>::endl;
</pre>
</div>

<pre class="example">
Enter two numbers:
The sum of 5 and 6 is 11
</pre>
</div>
</div>

<div id="outline-container-org6b614cb" class="outline-3">
<h3 id="org6b614cb"><span class="section-number-3">1.2</span> 使用循环读取标准输入</h3>
<div class="outline-text-3" id="text-1-2">
<div class="org-src-container">
<pre class="src src-C++"><span style="color: #18b2b2;">int</span> <span style="color: #ff8700;">sum</span> = 0, <span style="color: #ff8700;">val</span> = 0;

<span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">&#37325;&#22797;&#35835;&#21462;&#21040; EOF &#26102;&#32467;&#26463;&#65292;&#22312; UNIX &#31995;&#32479;&#20013;&#20351;&#29992; Ctrl-D</span>
<span style="color: #00af00;">while</span> <span style="color: #cc0000; font-weight: bold;">(</span><span style="color: #1f5bff;">std</span>::cin &gt;&gt; val<span style="color: #cc0000; font-weight: bold;">)</span> <span style="color: #cc0000; font-weight: bold;">{</span>
  sum += val;
 <span style="color: #cc0000; font-weight: bold;">}</span>

<span style="color: #1f5bff;">std</span>::cout &lt;&lt; <span style="color: #ff1f8b;">"Sum is: "</span>
&lt;&lt; sum &lt;&lt; <span style="color: #1f5bff;">std</span>::endl;
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orga952bb9" class="outline-2">
<h2 id="orga952bb9"><span class="section-number-2">2</span> 变量和基本类型</h2>
<div class="outline-text-2" id="text-2">

<figure>
<img src="./C++-学习记录/Screenshot_20200527_215053_QbzyBU.png" alt="Screenshot_20200527_215053_QbzyBU.png">

<figcaption><span class="figure-number">Figure 1: </span>指定字面值的类型</figcaption>
</figure>
</div>

<div id="outline-container-org7efe20a" class="outline-3">
<h3 id="org7efe20a"><span class="section-number-3">2.1</span> 可以用先定义的变量去初始化后定义的变量</h3>
<div class="outline-text-3" id="text-2-1">
<div class="org-src-container">
<pre class="src src-C++"><span style="color: #18b2b2;">double</span> <span style="color: #ff8700;">price</span> = 109.99, <span style="color: #ff8700;">discount</span> = price * 0.16;
</pre>
</div>
</div>
</div>
<div id="outline-container-orgecc7ff5" class="outline-3">
<h3 id="orgecc7ff5"><span class="section-number-3">2.2</span> 列表初始化</h3>
<div class="outline-text-3" id="text-2-2">
<p>
以下的 4 条初始化语句都是合法的
</p>
<div class="org-src-container">
<pre class="src src-C++"><span style="color: #18b2b2;">int</span> <span style="color: #ff8700;">units_sold</span> = 0;
<span style="color: #18b2b2;">int</span> <span style="color: #ff8700;">units_sold</span> = <span style="color: #cc0000; font-weight: bold;">{</span>0<span style="color: #cc0000; font-weight: bold;">}</span>;
<span style="color: #18b2b2;">int</span> <span style="color: #ff8700;">units_sold</span><span style="color: #cc0000; font-weight: bold;">{</span>0<span style="color: #cc0000; font-weight: bold;">}</span>;
<span style="color: #18b2b2;">int</span> <span style="color: #ff8700;">units_sold</span><span style="color: #cc0000; font-weight: bold;">(</span>0<span style="color: #cc0000; font-weight: bold;">)</span>;
</pre>
</div>

<p>
如果我们使用列表初始化且初始值存在丢失信息的风险时，编译器将报错
</p>
<div class="org-src-container">
<pre class="src src-C++"><span style="color: #18b2b2;">long</span> <span style="color: #18b2b2;">double</span> <span style="color: #ff8700;">ld</span> = 3.1415926536;
<span style="color: #18b2b2;">int</span> <span style="color: #ff8700;">a</span><span style="color: #cc0000; font-weight: bold;">{</span>ld<span style="color: #cc0000; font-weight: bold;">}</span>, b = <span style="color: #cc0000; font-weight: bold;">{</span>ld<span style="color: #cc0000; font-weight: bold;">}</span>;  <span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">&#38169;&#35823;&#65306;&#36716;&#25442;&#26410;&#25191;&#34892;&#65292;&#22240;&#20026;&#23384;&#22312;&#20002;&#22833;&#20449;&#24687;&#30340;&#39118;&#38505;</span>
<span style="color: #18b2b2;">int</span> <span style="color: #ef2929;">c</span><span style="color: #cc0000; font-weight: bold;">(</span>ld<span style="color: #cc0000; font-weight: bold;">)</span>, <span style="color: #ff8700;">d</span> = ld;    <span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">&#27491;&#30830;&#65306;&#36716;&#25442;&#25191;&#34892;&#65292;&#19988;&#30830;&#23454;&#20002;&#22833;&#20102;&#37096;&#20998;&#20540;</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org6461f73" class="outline-3">
<h3 id="org6461f73"><span class="section-number-3">2.3</span> 默认初始化</h3>
<div class="outline-text-3" id="text-2-3">
<p>
在未显式初始化时，全局的变量会被初始化为 0 ，函数内部的变量不初始化
</p>
<div class="org-src-container">
<pre class="src src-C++"><span style="color: #1f5bff;">std</span>::<span style="color: #18b2b2;">string</span> <span style="color: #ff8700;">global_str</span>;
<span style="color: #18b2b2;">int</span> <span style="color: #ff8700;">global_int</span>;

<span style="color: #18b2b2;">int</span> <span style="color: #ef2929;">main</span><span style="color: #cc0000; font-weight: bold;">(</span><span style="color: #18b2b2;">int</span> <span style="color: #ff8700;">argc</span>, <span style="color: #18b2b2;">char</span> *<span style="color: #ff8700;">argv</span><span style="color: #1f5bff; font-weight: bold;">[]</span><span style="color: #cc0000; font-weight: bold;">)</span>
<span style="color: #cc0000; font-weight: bold;">{</span>
  <span style="color: #18b2b2;">int</span> <span style="color: #ff8700;">local_int</span>;
  <span style="color: #1f5bff;">std</span>::<span style="color: #18b2b2;">string</span> <span style="color: #ff8700;">local_str</span>;
  <span style="color: #1f5bff;">std</span>::cout &lt;&lt; <span style="color: #ff1f8b;">"Global string is: "</span> &lt;&lt; global_str &lt;&lt; <span style="color: #1f5bff;">std</span>::endl;
  <span style="color: #1f5bff;">std</span>::cout &lt;&lt; <span style="color: #ff1f8b;">"Global int is: "</span>    &lt;&lt; global_int &lt;&lt; <span style="color: #1f5bff;">std</span>::endl;
  <span style="color: #1f5bff;">std</span>::cout &lt;&lt; <span style="color: #ff1f8b;">"Local string is: "</span>  &lt;&lt; local_str  &lt;&lt; <span style="color: #1f5bff;">std</span>::endl;
  <span style="color: #1f5bff;">std</span>::cout &lt;&lt; <span style="color: #ff1f8b;">"Local int is: "</span>     &lt;&lt; local_int  &lt;&lt; <span style="color: #1f5bff;">std</span>::endl;
  <span style="color: #00af00;">return</span> 0;
<span style="color: #cc0000; font-weight: bold;">}</span>
</pre>
</div>

<pre class="example">
Global string is: 
Global int is: 0
Local string is: 
Local int is: 21949
</pre>
</div>
</div>

<div id="outline-container-org38331f5" class="outline-3">
<h3 id="org38331f5"><span class="section-number-3">2.4</span> 声明与定义</h3>
<div class="outline-text-3" id="text-2-4">
<p>
声明用来创建一个符号，定义用来创建实体、分配内存甚至初始化。如果只是想声明变量需
要使用 <code>extern</code> 关键字，声明变量一般使用在分离式编译中。如果有一个变量我们希望在多
个文件中使用，我们只能在一个文件中进行定义，在其它文件中进行声明。此时 <code>extern</code> 关
键字会告诉编译器这个变量只是在此处声明，定义需要去其它文件中找，此时该变量也就是
一个全局变量，如果试图在函数体内部初始化一个 <code>extern</code> 标记的变量，将引发错误。
</p>
<div class="org-src-container">
<pre class="src src-C++"><span style="color: #00af00;">extern</span> <span style="color: #18b2b2;">int</span> <span style="color: #ff8700;">i</span>;              <span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">&#22768;&#26126; i &#32780;&#38750;&#23450;&#20041; i</span>
<span style="color: #18b2b2;">int</span> <span style="color: #ff8700;">j</span>;                     <span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">&#22768;&#26126;&#24182;&#23450;&#20041; j</span>
<span style="color: #00af00;">extern</span> <span style="color: #18b2b2;">double</span> <span style="color: #ff8700;">pi</span> = 3.1416; <span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">&#26174;&#24335;&#21021;&#22987;&#21270;&#37117;&#20250;&#25104;&#20026;&#23450;&#20041;</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org80f2c4b" class="outline-3">
<h3 id="org80f2c4b"><span class="section-number-3">2.5</span> 变量标识符</h3>
<div class="outline-text-3" id="text-2-5">
<p>
与 Python 不同，C++ 中的标识符不能以两个连续的下画线开头，也不能以下画线紧连大写
字母开头。此外，定义在函数体外的标识符不能以下画线开头。因此以下标识符都是不合法
的
</p>
<div class="org-src-container">
<pre class="src src-C++"><span style="color: #18b2b2;">float</span> <span style="color: #ff8700;">_global_price</span>;

<span style="color: #18b2b2;">int</span> <span style="color: #ef2929;">main</span><span style="color: #cc0000; font-weight: bold;">()</span> <span style="color: #cc0000; font-weight: bold;">{</span>
  <span style="color: #18b2b2;">int</span> <span style="color: #ff8700;">__num</span>;
  <span style="color: #18b2b2;">float</span> <span style="color: #ff8700;">_Price</span>;

  <span style="color: #00af00;">return</span> 0;
<span style="color: #cc0000; font-weight: bold;">}</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org5b0e878" class="outline-3">
<h3 id="org5b0e878"><span class="section-number-3">2.6</span> 引用</h3>
<div class="outline-text-3" id="text-2-6">
<p>
引用（reference）是为对象起了另外一个名字。如果学过 Python 中的引用，这里应该比
较好理解，引用以及原始对象都指向内存中的同一区域。但引用本身不是一个对象，因此不
能定义引用的引用，也不能定义指向引用的指针。
</p>
<div class="org-src-container">
<pre class="src src-C++"><span style="color: #18b2b2;">int</span> <span style="color: #ff8700;">iVal</span> = 1024;
<span style="color: #18b2b2;">int</span> &amp;<span style="color: #ff8700;">refVal</span> = ival;      <span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">refVal &#25351;&#21521; iVal</span>
<span style="color: #18b2b2;">int</span> &amp;<span style="color: #ff8700;">refVal2</span>;            <span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">&#25253;&#38169;&#65306;&#24341;&#29992;&#24517;&#39035;&#34987;&#21021;&#22987;&#21270;</span>
<span style="color: #18b2b2;">int</span> &amp;<span style="color: #ff8700;">refVal3</span> = refVal;   <span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">&#25253;&#38169;&#65306;&#19981;&#33021;&#23450;&#20041;&#24341;&#29992;&#30340;&#24341;&#29992;</span>
<span style="color: #18b2b2;">int</span> *<span style="color: #ff8700;">val_ptr</span> = &amp;refVal;  <span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">&#25253;&#38169;&#65306;&#19981;&#33021;&#23450;&#20041;&#24341;&#29992;&#30340;&#25351;&#38024;</span>
</pre>
</div>

<p>
以下为一个示例
</p>
<div class="org-src-container">
<pre class="src src-C++"><span style="color: #18b2b2;">int</span> <span style="color: #ff8700;">i</span>, &amp;<span style="color: #ff8700;">ri</span> = i;
i = 5; ri = 10;
<span style="color: #1f5bff;">std</span>::cout &lt;&lt; i &lt;&lt; <span style="color: #ff1f8b;">" "</span> &lt;&lt; ri &lt;&lt; <span style="color: #1f5bff;">std</span>::endl;
</pre>
</div>

<pre class="example">
10 10
</pre>
</div>
</div>

<div id="outline-container-org0df3463" class="outline-3">
<h3 id="org0df3463"><span class="section-number-3">2.7</span> 空指针</h3>
<div class="outline-text-3" id="text-2-7">
<div class="org-src-container">
<pre class="src src-C++"><span style="color: #b218b2;">#include</span> <span style="color: #cc0000; font-weight: bold;">&lt;</span><span style="color: #ff1f8b;">cstdlib</span><span style="color: #cc0000; font-weight: bold;">&gt;</span>

<span style="color: #18b2b2;">int</span> *<span style="color: #ff8700;">p1</span> = <span style="color: #1f5bff;">nullptr</span>;         <span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">&#31561;&#20215;&#20110; int *p1 = 0;</span>
<span style="color: #18b2b2;">int</span> *<span style="color: #ff8700;">p2</span> = 0;               <span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">&#30452;&#25509;&#23558; p2 &#21021;&#22987;&#21270;&#20026;&#23383;&#38754;&#24120;&#37327; 0</span>
<span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">C &#35821;&#35328;&#30340;&#20889;&#27861;&#65292;&#38656;&#35201;&#39318;&#20808; #include &lt;cstdlib&gt;</span>
<span style="color: #18b2b2;">int</span> *<span style="color: #ff8700;">p3</span> = <span style="color: #1f5bff;">NULL</span>;            <span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">&#31561;&#20215;&#20110; int *p3 = 0;</span>

<span style="color: #1f5bff;">std</span>::cout &lt;&lt; <span style="color: #ff1f8b;">"p1 is "</span> &lt;&lt; p1 &lt;&lt; <span style="color: #1f5bff;">std</span>::endl;
<span style="color: #1f5bff;">std</span>::cout &lt;&lt; <span style="color: #ff1f8b;">"p2 is "</span> &lt;&lt; p2 &lt;&lt; <span style="color: #1f5bff;">std</span>::endl;
<span style="color: #1f5bff;">std</span>::cout &lt;&lt; <span style="color: #ff1f8b;">"p3 is "</span> &lt;&lt; p3 &lt;&lt; <span style="color: #1f5bff;">std</span>::endl;
</pre>
</div>

<pre class="example">
p1 is 0
p2 is 0
p3 is 0
</pre>
</div>
</div>

<div id="outline-container-orgab10d25" class="outline-3">
<h3 id="orgab10d25"><span class="section-number-3">2.8</span> <code>void*</code> 指针</h3>
<div class="outline-text-3" id="text-2-8">
<p>
<code>void*</code> 指针是一类特殊的指针类型，只记录对象的地址而不记录对象的内存空间大小
</p>
<div class="org-src-container">
<pre class="src src-C++"><span style="color: #18b2b2;">double</span> <span style="color: #ff8700;">obj</span> = 3.14, *<span style="color: #ff8700;">pd</span> = &amp;obj;
<span style="color: #18b2b2;">void</span> *<span style="color: #ff8700;">pv</span> = &amp;obj;
pv = pd;
</pre>
</div>
</div>
</div>

<div id="outline-container-org4ca440d" class="outline-3">
<h3 id="org4ca440d"><span class="section-number-3">2.9</span> <code>const</code> 常量限定符</h3>
</div>
<div id="outline-container-orgfce063f" class="outline-3">
<h3 id="orgfce063f"><span class="section-number-3">2.10</span> 命名空间的 <code>using</code> 声明</h3>
<div class="outline-text-3" id="text-2-10">
<div class="org-src-container">
<pre class="src src-C++"><span style="color: #00af00;">using</span> <span style="color: #1f5bff;">std</span>::<span style="color: #18b2b2;">cin</span>; <span style="color: #00af00;">using</span> <span style="color: #1f5bff;">std</span>::<span style="color: #18b2b2;">endl</span>;

<span style="color: #18b2b2;">int</span> <span style="color: #ff8700;">i</span>;
cin &gt;&gt; i;                 <span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">&#27491;&#30830;&#65306;cin &#21644; std::cin &#21547;&#20041;&#30456;&#21516;</span>
cout &lt;&lt; i;                <span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">&#38169;&#35823;&#65306;&#27809;&#26377;&#23545;&#24212;&#30340; using &#22768;&#26126;&#65292;&#24517;&#39035;&#20351;&#29992;&#23436;&#25972;&#30340;&#21517;&#23383;</span>
<span style="color: #1f5bff;">std</span>::cout &lt;&lt; i &lt;&lt; endl&gt;;  <span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">&#27491;&#30830;&#65306;&#26174;&#24335;&#22320;&#20174; std &#20013;&#20351;&#29992; cout</span>
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-org0a002c5" class="outline-2">
<h2 id="org0a002c5"><span class="section-number-2">3</span> 字符串、向量和数组</h2>
<div class="outline-text-2" id="text-3">
</div>
<div id="outline-container-org45d5483" class="outline-3">
<h3 id="org45d5483"><span class="section-number-3">3.1</span> 标准库 <code>string</code></h3>
<div class="outline-text-3" id="text-3-1">
<p>
引入头文件与声明命名空间
</p>
<div class="org-src-container">
<pre class="src src-C++"><span style="color: #b218b2;">#include</span> <span style="color: #cc0000; font-weight: bold;">&lt;</span><span style="color: #ff1f8b;">string</span><span style="color: #cc0000; font-weight: bold;">&gt;</span>
<span style="color: #00af00;">using</span> <span style="color: #1f5bff;">std</span>::<span style="color: #18b2b2;">string</span>;
</pre>
</div>
</div>
<div id="outline-container-org0e00a29" class="outline-4">
<h4 id="org0e00a29"><span class="section-number-4">3.1.1</span> 定义和初始化</h4>
<div class="outline-text-4" id="text-3-1-1">
<div class="org-src-container">
<pre class="src src-C++"><span style="color: #00af00;">using</span> <span style="color: #1f5bff;">std</span>::<span style="color: #18b2b2;">string</span>;

<span style="color: #18b2b2;">string</span> <span style="color: #ff8700;">s1</span>;            <span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">&#40664;&#35748;&#21021;&#22987;&#21270;&#65292;s1 &#26159;&#19968;&#20010;&#31354;&#23383;&#31526;&#20018;</span>
<span style="color: #18b2b2;">string</span> <span style="color: #ff8700;">s2</span> = s1;       <span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">s2 &#26159; s1 &#30340;&#21103;&#26412;</span>
<span style="color: #18b2b2;">string</span> <span style="color: #ff8700;">s3</span> = <span style="color: #ff1f8b;">"hello"</span>;  <span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">s3 &#26159;&#23383;&#31526;&#20018;&#23383;&#38754;&#20540;&#30340;&#21103;&#26412;</span>
<span style="color: #18b2b2;">string</span> <span style="color: #ff8700;">s4</span><span style="color: #cc0000; font-weight: bold;">(</span><span style="color: #ff1f8b;">"hello"</span><span style="color: #cc0000; font-weight: bold;">)</span>;   <span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">s4 &#30340;&#20869;&#23481;&#20026; "hello"</span>
<span style="color: #18b2b2;">string</span> <span style="color: #ff8700;">s5</span><span style="color: #cc0000; font-weight: bold;">(</span>10, <span style="color: #ff1f8b;">'c'</span><span style="color: #cc0000; font-weight: bold;">)</span>;   <span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">s5 &#30340;&#20869;&#23481;&#20026; "cccccccccc"</span>
</pre>
</div>

<p>
s2, s3 的初始化方法为拷贝初始化，s4, s5 的初始化方法为直接初始化。
</p>
</div>
</div>
<div id="outline-container-org455bc17" class="outline-4">
<h4 id="org455bc17"><span class="section-number-4">3.1.2</span> 为 string 对象赋值</h4>
<div class="outline-text-4" id="text-3-1-2">
<div class="org-src-container">
<pre class="src src-C++"><span style="color: #00af00;">using</span> <span style="color: #00af00;">namespace</span> <span style="color: #1f5bff;">std</span>;

<span style="color: #18b2b2;">string</span> <span style="color: #ff8700;">s1</span>, <span style="color: #ff8700;">s2</span><span style="color: #cc0000; font-weight: bold;">(</span>10, <span style="color: #ff1f8b;">'c'</span><span style="color: #cc0000; font-weight: bold;">)</span>;
s1 = s2;       <span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">&#29992; s2 &#30340;&#20540;&#36171;&#20540; s1&#65292;&#30456;&#24403;&#20110;&#25335;&#36125;&#20102; string &#23545;&#35937;</span>
s2 = <span style="color: #ff1f8b;">"Hello"</span>;  <span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">&#29992;&#23383;&#38754;&#20540;&#24120;&#37327;&#36171;&#20540; s2</span>

cout &lt;&lt; <span style="color: #ff1f8b;">"s1 is: "</span> &lt;&lt; s1 &lt;&lt; endl;
cout &lt;&lt; <span style="color: #ff1f8b;">"s2 is: "</span> &lt;&lt; s2 &lt;&lt; endl;
</pre>
</div>

<pre class="example">
s1 is: cccccccccc
s2 is: Hello
</pre>
</div>
</div>

<div id="outline-container-orge7e72f4" class="outline-4">
<h4 id="orge7e72f4"><span class="section-number-4">3.1.3</span> 读写 string 对象</h4>
<div class="outline-text-4" id="text-3-1-3">
<div class="org-src-container">
<pre class="src src-C++"><span style="color: #00af00;">using</span> <span style="color: #00af00;">namespace</span> <span style="color: #1f5bff;">std</span>;
<span style="color: #18b2b2;">string</span> <span style="color: #ff8700;">s</span>;            <span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">&#22768;&#26126;&#19968;&#20010;&#31354;&#23383;&#31526;&#20018;</span>

cin &gt;&gt; s;
s = <span style="color: #ff1f8b;">"Hello"</span>;
cout &lt;&lt; s &lt;&lt; endl;
</pre>
</div>

<pre class="example">
Hello
</pre>
</div>
</div>

<div id="outline-container-org44af7b5" class="outline-4">
<h4 id="org44af7b5"><span class="section-number-4">3.1.4</span> 使用 <code>getline</code> 读取一整行</h4>
<div class="outline-text-4" id="text-3-1-4">
<div class="org-src-container">
<pre class="src src-C++"><span style="color: #00af00;">using</span> <span style="color: #00af00;">namespace</span> <span style="color: #1f5bff;">std</span>;
<span style="color: #18b2b2;">string</span> <span style="color: #ff8700;">line</span>;

<span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">getline &#27599;&#27425;&#35835;&#21462;&#21040;&#25442;&#34892;&#31526;&#65288;&#21253;&#25324;&#25442;&#34892;&#31526;&#65289;&#65292;&#23384;&#20837; string &#23545;&#35937;&#20013;&#65288;&#19981;&#21253;&#25324;&#25442;&#34892;&#31526;&#65289;</span>
<span style="color: #00af00;">while</span> <span style="color: #cc0000; font-weight: bold;">(</span>getline<span style="color: #1f5bff; font-weight: bold;">(</span>cin, line<span style="color: #1f5bff; font-weight: bold;">)</span><span style="color: #cc0000; font-weight: bold;">)</span>
  cout &lt;&lt; line &lt;&lt; endl;
</pre>
</div>
</div>
</div>

<div id="outline-container-orga2752ab" class="outline-4">
<h4 id="orga2752ab"><span class="section-number-4">3.1.5</span> <code>empty</code> 和 <code>size</code></h4>
<div class="outline-text-4" id="text-3-1-5">
<table id="org6ca9924">
<caption class="t-above"><span class="table-number">Table 1:</span> 多行文本</caption>

<colgroup>
<col  class="org-left">
</colgroup>
<tbody>
<tr>
<td class="org-left">First line.</td>
</tr>

<tr>
<td class="org-left">Second line.</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">This is a long line.</td>
</tr>
</tbody>
</table>

<p>
使用上表中的数据演示 string 对象 <code>empty</code> 和 <code>size</code> 方法的使用
</p>

<div class="org-src-container">
<pre class="src src-C++"><span style="color: #00af00;">using</span> <span style="color: #00af00;">namespace</span> <span style="color: #1f5bff;">std</span>;

<span style="color: #18b2b2;">string</span> <span style="color: #ff8700;">s</span>;
<span style="color: #18b2b2;">int</span> <span style="color: #ff8700;">row</span>;

<span style="color: #00af00;">for</span> <span style="color: #cc0000; font-weight: bold;">(</span>row = 0; row &lt; lines_rows; row++<span style="color: #cc0000; font-weight: bold;">)</span> <span style="color: #cc0000; font-weight: bold;">{</span>
  s = lines<span style="color: #1f5bff; font-weight: bold;">[</span>row<span style="color: #1f5bff; font-weight: bold;">][</span>0<span style="color: #1f5bff; font-weight: bold;">]</span>;
  <span style="color: #00af00;">if</span> <span style="color: #1f5bff; font-weight: bold;">(</span>s.empty<span style="color: #00af00; font-weight: bold;">()</span><span style="color: #1f5bff; font-weight: bold;">)</span> <span style="color: #1f5bff; font-weight: bold;">{</span>
    cout &lt;&lt; <span style="color: #ff1f8b;">"Line "</span> &lt;&lt; row + 1 &lt;&lt; <span style="color: #ff1f8b;">" is empty"</span> &lt;&lt; endl;
  <span style="color: #1f5bff; font-weight: bold;">}</span> <span style="color: #00af00;">else</span> <span style="color: #1f5bff; font-weight: bold;">{</span>
    cout &lt;&lt; <span style="color: #ff1f8b;">"Line "</span> &lt;&lt; row + 1 &lt;&lt; <span style="color: #ff1f8b;">"'s length is "</span> &lt;&lt; s.size<span style="color: #00af00; font-weight: bold;">()</span> &lt;&lt; endl;
  <span style="color: #1f5bff; font-weight: bold;">}</span>
<span style="color: #cc0000; font-weight: bold;">}</span>
</pre>
</div>

<pre class="example">
Line 1's length is 11
Line 2's length is 12
Line 3 is empty
Line 4's length is 20
</pre>
</div>
</div>

<div id="outline-container-orga68e102" class="outline-4">
<h4 id="orga68e102"><span class="section-number-4">3.1.6</span> 比较 string 对象</h4>
<div class="outline-text-4" id="text-3-1-6">
<p>
类似于 C 中的 <code>strcmp</code> 函数，依次比较各字符的字典序
</p>
<div class="org-src-container">
<pre class="src src-C++"><span style="color: #00af00;">using</span> <span style="color: #00af00;">namespace</span> <span style="color: #1f5bff;">std</span>;

<span style="color: #18b2b2;">string</span> <span style="color: #ff8700;">s1</span><span style="color: #cc0000; font-weight: bold;">(</span><span style="color: #ff1f8b;">"hello"</span><span style="color: #cc0000; font-weight: bold;">)</span>;
<span style="color: #18b2b2;">string</span> <span style="color: #ff8700;">s2</span><span style="color: #cc0000; font-weight: bold;">(</span><span style="color: #ff1f8b;">"world"</span><span style="color: #cc0000; font-weight: bold;">)</span>;

<span style="color: #00af00;">if</span> <span style="color: #cc0000; font-weight: bold;">(</span>s1 &gt; s2<span style="color: #cc0000; font-weight: bold;">)</span>
  cout &lt;&lt; <span style="color: #ff1f8b;">"s1 is bigger than s2."</span> &lt;&lt; endl;
<span style="color: #00af00;">else</span>
  cout &lt;&lt; <span style="color: #ff1f8b;">"s2 is bigger than s1."</span> &lt;&lt; endl;
</pre>
</div>

<pre class="example">
s2 is bigger than s1.
</pre>
</div>
</div>

<div id="outline-container-org0ffdeb7" class="outline-4">
<h4 id="org0ffdeb7"><span class="section-number-4">3.1.7</span> string 对象相加</h4>
<div class="outline-text-4" id="text-3-1-7">
<div class="org-src-container">
<pre class="src src-C++"><span style="color: #00af00;">using</span> <span style="color: #00af00;">namespace</span> <span style="color: #1f5bff;">std</span>;

<span style="color: #18b2b2;">string</span> <span style="color: #ff8700;">s1</span> = <span style="color: #ff1f8b;">"Hello, "</span>;
<span style="color: #18b2b2;">string</span> <span style="color: #ff8700;">s2</span> = <span style="color: #ff1f8b;">"world."</span>;
cout &lt;&lt; s1 + s2 &lt;&lt; endl;
s1 += s2;
cout &lt;&lt; s1 &lt;&lt; endl;
</pre>
</div>

<pre class="example">
Hello, world.
Hello, world.
</pre>
</div>
</div>

<div id="outline-container-org385bcb3" class="outline-4">
<h4 id="org385bcb3"><span class="section-number-4">3.1.8</span> 字面值与 string 对象相加</h4>
<div class="outline-text-4" id="text-3-1-8">
<div class="org-src-container">
<pre class="src src-C++"><span style="color: #00af00;">using</span> <span style="color: #00af00;">namespace</span> <span style="color: #1f5bff;">std</span>;

<span style="color: #18b2b2;">string</span> <span style="color: #ff8700;">s1</span> = <span style="color: #ff1f8b;">"hello"</span>, <span style="color: #ff8700;">s2</span> = <span style="color: #ff1f8b;">"world"</span>;
<span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">&#38656;&#35201;&#20445;&#35777;&#27599;&#27425;&#21152;&#27861;&#36816;&#31639;&#26102;&#33267;&#23569;&#26377;&#19968;&#20010;&#26159; string &#23545;&#35937;</span>
<span style="color: #18b2b2;">string</span> <span style="color: #ff8700;">s3</span> = s1 + <span style="color: #ff1f8b;">", "</span> + s2 + <span style="color: #ff1f8b;">'!'</span>;
cout &lt;&lt; s3 &lt;&lt; endl;
</pre>
</div>

<pre class="example">
hello, world!
</pre>
</div>
</div>

<div id="outline-container-orgc93abd3" class="outline-4">
<h4 id="orgc93abd3"><span class="section-number-4">3.1.9</span> 处理 string 对象中的字符</h4>
<div class="outline-text-4" id="text-3-1-9">
<p>
用基于范围的 for 语句遍历 string 对象中的字符
</p>
<div class="org-src-container">
<pre class="src src-C++"><span style="color: #00af00;">using</span> <span style="color: #00af00;">namespace</span> <span style="color: #1f5bff;">std</span>;

<span style="color: #18b2b2;">string</span> <span style="color: #ff8700;">str</span><span style="color: #cc0000; font-weight: bold;">(</span><span style="color: #ff1f8b;">"some string"</span><span style="color: #cc0000; font-weight: bold;">)</span>;
<span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">&#22522;&#20110;&#33539;&#22260;&#30340; for &#35821;&#21477;</span>
<span style="color: #00af00;">for</span> <span style="color: #cc0000; font-weight: bold;">(</span><span style="color: #00af00;">auto</span> <span style="color: #ff8700;">c</span> : str<span style="color: #cc0000; font-weight: bold;">)</span>
  cout &lt;&lt; c &lt;&lt; <span style="color: #ff1f8b;">" | "</span>;
</pre>
</div>

<pre class="example">
s | o | m | e |   | s | t | r | i | n | g |
</pre>


<p>
统计 string 对象中的标点符号个数
</p>
<div class="org-src-container">
<pre class="src src-C++"><span style="color: #00af00;">using</span> <span style="color: #00af00;">namespace</span> <span style="color: #1f5bff;">std</span>;

<span style="color: #18b2b2;">string</span> <span style="color: #ff8700;">s</span><span style="color: #cc0000; font-weight: bold;">(</span><span style="color: #ff1f8b;">"Hello, world!!!"</span><span style="color: #cc0000; font-weight: bold;">)</span>;
<span style="color: #00af00;">decltype</span><span style="color: #cc0000; font-weight: bold;">(</span>s.size<span style="color: #1f5bff; font-weight: bold;">()</span><span style="color: #cc0000; font-weight: bold;">)</span> <span style="color: #ff8700;">punct_count</span> = 0;
<span style="color: #00af00;">for</span> <span style="color: #cc0000; font-weight: bold;">(</span><span style="color: #00af00;">auto</span> <span style="color: #ff8700;">c</span> : s<span style="color: #cc0000; font-weight: bold;">)</span>
  <span style="color: #00af00;">if</span> <span style="color: #cc0000; font-weight: bold;">(</span>ispunct<span style="color: #1f5bff; font-weight: bold;">(</span>c<span style="color: #1f5bff; font-weight: bold;">)</span><span style="color: #cc0000; font-weight: bold;">)</span>
    ++punct_count;

cout &lt;&lt; punct_count &lt;&lt; <span style="color: #ff1f8b;">" punctuation characters in "</span> &lt;&lt; s &lt;&lt; endl;
</pre>
</div>

<pre class="example">
4 punctuation characters in Hello, world!!!
</pre>


<p>
更改 string 对象中的字符，此时需要使用引用
</p>
<div class="org-src-container">
<pre class="src src-C++"><span style="color: #00af00;">using</span> <span style="color: #00af00;">namespace</span> <span style="color: #1f5bff;">std</span>;

<span style="color: #18b2b2;">string</span> <span style="color: #ff8700;">s1</span><span style="color: #cc0000; font-weight: bold;">(</span><span style="color: #ff1f8b;">"Talk is cheap, "</span><span style="color: #cc0000; font-weight: bold;">)</span>;
<span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">&#20351;&#29992;&#33539;&#22260;&#30340; for &#24490;&#29615;</span>
<span style="color: #00af00;">for</span> <span style="color: #cc0000; font-weight: bold;">(</span><span style="color: #00af00;">auto</span> &amp;<span style="color: #ff8700;">c</span> : s1<span style="color: #cc0000; font-weight: bold;">)</span>
  c = toupper<span style="color: #cc0000; font-weight: bold;">(</span>c<span style="color: #cc0000; font-weight: bold;">)</span>;

cout &lt;&lt; s1 &lt;&lt; endl;

<span style="color: #18b2b2;">string</span> <span style="color: #ff8700;">s2</span><span style="color: #cc0000; font-weight: bold;">(</span><span style="color: #ff1f8b;">"show me the code!"</span><span style="color: #cc0000; font-weight: bold;">)</span>;
<span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">&#20351;&#29992;&#20256;&#32479;&#30340; for &#24490;&#29615;</span>
<span style="color: #00af00;">for</span> <span style="color: #cc0000; font-weight: bold;">(</span><span style="color: #00af00;">decltype</span><span style="color: #1f5bff; font-weight: bold;">(</span>s2.size<span style="color: #00af00; font-weight: bold;">()</span><span style="color: #1f5bff; font-weight: bold;">)</span> <span style="color: #ff8700;">i</span> = 0; i &lt; s2.size<span style="color: #1f5bff; font-weight: bold;">()</span>; i++<span style="color: #cc0000; font-weight: bold;">)</span>
  <span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">string &#23545;&#35937;&#30340;&#32034;&#24341;&#36820;&#22238;&#25351;&#21521;&#23545;&#24212;&#23383;&#31526;&#30340;&#19968;&#20010;&#24341;&#29992;</span>
  s2<span style="color: #cc0000; font-weight: bold;">[</span>i<span style="color: #cc0000; font-weight: bold;">]</span> = toupper<span style="color: #cc0000; font-weight: bold;">(</span>s2<span style="color: #1f5bff; font-weight: bold;">[</span>i<span style="color: #1f5bff; font-weight: bold;">]</span><span style="color: #cc0000; font-weight: bold;">)</span>;

cout &lt;&lt; s2 &lt;&lt; endl;
</pre>
</div>

<pre class="example">
TALK IS CHEAP, 
SHOW ME THE CODE!
</pre>
</div>
</div>

<div id="outline-container-org3daef82" class="outline-4">
<h4 id="org3daef82"><span class="section-number-4">3.1.10</span> 使用字符串数组初始化 string 对象</h4>
<div class="outline-text-4" id="text-3-1-10">
<div class="org-src-container">
<pre class="src src-C++"><span style="color: #00af00;">using</span> <span style="color: #00af00;">namespace</span> <span style="color: #1f5bff;">std</span>;

<span style="color: #18b2b2;">char</span> <span style="color: #ff8700;">str</span><span style="color: #cc0000; font-weight: bold;">[]</span> = <span style="color: #ff1f8b;">"Hello, world!"</span>;   <span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">&#21021;&#22987;&#21270; C &#39118;&#26684;&#30340;&#23383;&#31526;&#20018;</span>
<span style="color: #18b2b2;">string</span> <span style="color: #ef2929;">s</span><span style="color: #cc0000; font-weight: bold;">(</span>str<span style="color: #cc0000; font-weight: bold;">)</span>;                  <span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">&#20351;&#29992;&#23383;&#31526;&#20018;&#25968;&#32452;&#21021;&#22987;&#21270; string &#23545;&#35937;</span>
cout &lt;&lt; s &lt;&lt; endl;
</pre>
</div>

<pre class="example">
Hello, world!
</pre>
</div>
</div>

<div id="outline-container-orgbe54c31" class="outline-4">
<h4 id="orgbe54c31"><span class="section-number-4">3.1.11</span> 从 string 对象中获取 C 风格的字符串数组指针</h4>
<div class="outline-text-4" id="text-3-1-11">
<div class="org-src-container">
<pre class="src src-C++"><span style="color: #00af00;">using</span> <span style="color: #00af00;">namespace</span> <span style="color: #1f5bff;">std</span>;

<span style="color: #18b2b2;">string</span> <span style="color: #ff8700;">s</span><span style="color: #cc0000; font-weight: bold;">(</span><span style="color: #ff1f8b;">"Hello, world!"</span><span style="color: #cc0000; font-weight: bold;">)</span>;
<span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">&#33719;&#21462; C &#39118;&#26684;&#30340;&#23383;&#31526;&#20018;&#25968;&#32452;&#25351;&#38024;&#65292;&#24182;&#19988;&#25351;&#21521; string &#20013;&#30340;&#23383;&#31526;&#20018;&#25968;&#32452;</span>
<span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">&#19981;&#24212;&#35813;&#20351;&#29992;&#35813;&#25351;&#38024;&#20462;&#25913;&#25968;&#32452;&#20869;&#23481;&#65292;&#22240;&#27492;&#20351;&#29992; const &#38480;&#23450;&#31526;</span>
<span style="color: #00af00;">const</span> <span style="color: #18b2b2;">char</span> *<span style="color: #ff8700;">str</span> = s.c_str<span style="color: #cc0000; font-weight: bold;">()</span>;
cout &lt;&lt; str &lt;&lt; endl;
</pre>
</div>

<pre class="example">
Hello, world!
</pre>
</div>
</div>
</div>

<div id="outline-container-org9cd5bb2" class="outline-3">
<h3 id="org9cd5bb2"><span class="section-number-3">3.2</span> 标准库类型 <code>vector</code></h3>
<div class="outline-text-3" id="text-3-2">
<p>
引入头文件与声明命名空间， <code>vector</code> 是一个类模板
</p>
<div class="org-src-container">
<pre class="src src-C++"><span style="color: #b218b2;">#include</span> <span style="color: #cc0000; font-weight: bold;">&lt;</span><span style="color: #ff1f8b;">vector</span><span style="color: #cc0000; font-weight: bold;">&gt;</span>
<span style="color: #00af00;">using</span> <span style="color: #1f5bff;">std</span>::<span style="color: #18b2b2;">vector</span>;
</pre>
</div>
</div>
<div id="outline-container-orga3732a3" class="outline-4">
<h4 id="orga3732a3"><span class="section-number-4">3.2.1</span> 定义和初始化</h4>
<div class="outline-text-4" id="text-3-2-1">
<div class="org-src-container">
<pre class="src src-C++"><span style="color: #b218b2;">#include</span> <span style="color: #cc0000; font-weight: bold;">&lt;</span><span style="color: #ff1f8b;">vector</span><span style="color: #cc0000; font-weight: bold;">&gt;</span>
<span style="color: #00af00;">using</span> <span style="color: #1f5bff;">std</span>::<span style="color: #18b2b2;">vector</span>;

<span style="color: #18b2b2;">vector</span><span style="color: #cc0000; font-weight: bold;">&lt;</span>T<span style="color: #cc0000; font-weight: bold;">&gt;</span> <span style="color: #ff8700;">v1</span>;                 <span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">v1 &#26159;&#19968;&#20010;&#31354; vector &#65292;&#23427;&#28508;&#22312;&#30340;&#20803;&#32032;&#26159; T &#31867;&#22411;</span>
<span style="color: #18b2b2;">vector</span><span style="color: #cc0000; font-weight: bold;">&lt;</span>T<span style="color: #cc0000; font-weight: bold;">&gt;</span> <span style="color: #ef2929;">v2</span><span style="color: #cc0000; font-weight: bold;">(</span>v1<span style="color: #cc0000; font-weight: bold;">)</span>;             <span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">v2 &#21253;&#21547;&#26377; v1 &#25152;&#26377;&#20803;&#32032;&#30340;&#21103;&#26412;</span>
<span style="color: #18b2b2;">vector</span><span style="color: #cc0000; font-weight: bold;">&lt;</span>T<span style="color: #cc0000; font-weight: bold;">&gt;</span> <span style="color: #ff8700;">v3</span> = v1;            <span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">&#31561;&#20215;&#20110; v3(v1)</span>
<span style="color: #18b2b2;">vector</span><span style="color: #cc0000; font-weight: bold;">&lt;</span>T<span style="color: #cc0000; font-weight: bold;">&gt;</span> <span style="color: #ef2929;">v4</span><span style="color: #cc0000; font-weight: bold;">(</span>n, val<span style="color: #cc0000; font-weight: bold;">)</span>;         <span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">&#21253;&#21547; n &#20010;&#37325;&#22797;&#30340; val</span>
<span style="color: #18b2b2;">vector</span><span style="color: #cc0000; font-weight: bold;">&lt;</span>T<span style="color: #cc0000; font-weight: bold;">&gt;</span> <span style="color: #ef2929;">v5</span><span style="color: #cc0000; font-weight: bold;">(</span>n<span style="color: #cc0000; font-weight: bold;">)</span>;              <span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">&#21253;&#21547; n &#20010;&#37325;&#22797;&#30340; T &#31867;&#22411;&#20803;&#32032;&#24182;&#25191;&#34892;&#40664;&#35748;&#21021;&#22987;&#21270;</span>
<span style="color: #18b2b2;">vector</span><span style="color: #cc0000; font-weight: bold;">&lt;</span>T<span style="color: #cc0000; font-weight: bold;">&gt;</span> <span style="color: #ff8700;">v6</span><span style="color: #cc0000; font-weight: bold;">{</span>a, b, c<span style="color: #ef2929;">...</span><span style="color: #cc0000; font-weight: bold;">}</span>;     <span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">&#29992; a, b, c... &#25191;&#34892;&#21021;&#22987;&#21270;</span>
<span style="color: #18b2b2;">vector</span><span style="color: #cc0000; font-weight: bold;">&lt;</span>T<span style="color: #cc0000; font-weight: bold;">&gt;</span> <span style="color: #ff8700;">v7</span> = <span style="color: #cc0000; font-weight: bold;">{</span>a, b, c<span style="color: #ef2929;">...</span><span style="color: #cc0000; font-weight: bold;">}</span>;  <span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">&#31561;&#20215;&#20110; v7{a, b, c...}</span>
<span style="color: #18b2b2;">vector</span><span style="color: #cc0000; font-weight: bold;">&lt;</span>T<span style="color: #cc0000; font-weight: bold;">&gt;</span> <span style="color: #ff8700;">v8</span> = <span style="color: #cc0000; font-weight: bold;">(</span>a, b, c<span style="color: #ef2929;">...</span><span style="color: #cc0000; font-weight: bold;">)</span>;  <span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">&#38169;&#35823;</span>
</pre>
</div>

<p>
默认初始化
</p>
<div class="org-src-container">
<pre class="src src-C++"><span style="color: #18b2b2;">vector</span><span style="color: #cc0000; font-weight: bold;">&lt;</span><span style="color: #18b2b2;">int</span><span style="color: #cc0000; font-weight: bold;">&gt;</span> <span style="color: #ff8700;">ivec</span><span style="color: #cc0000; font-weight: bold;">(</span>10<span style="color: #cc0000; font-weight: bold;">)</span>;     <span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">10 &#20010;&#20803;&#32032;&#65292;&#27599;&#20010;&#37117;&#21021;&#22987;&#21270;&#20026; 0</span>
<span style="color: #18b2b2;">vector</span><span style="color: #cc0000; font-weight: bold;">&lt;</span><span style="color: #18b2b2;">string</span><span style="color: #cc0000; font-weight: bold;">&gt;</span> <span style="color: #ff8700;">svec</span><span style="color: #cc0000; font-weight: bold;">(</span>10<span style="color: #cc0000; font-weight: bold;">)</span>;  <span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">10 &#20010;&#20803;&#32032;&#65292;&#27599;&#20010;&#37117;&#26086;&#19979;&#20154;&#31354; string &#23545;&#35937;</span>
</pre>
</div>

<p>
括号内的数字是元素数量还是初始化，要看用的是花括号还是圆括号。花括号和圆括号具有
完全不同的含义，圆括号表示实例化对象，花括号代表列表初始化，但在当编译器发现提供
的元素无法使用列表初始化时，会 fallback 到默认的圆括号实例化对象。
</p>
<div class="org-src-container">
<pre class="src src-C++"><span style="color: #18b2b2;">vector</span><span style="color: #cc0000; font-weight: bold;">&lt;</span><span style="color: #18b2b2;">int</span><span style="color: #cc0000; font-weight: bold;">&gt;</span> <span style="color: #ff8700;">v1</span><span style="color: #cc0000; font-weight: bold;">(</span>10<span style="color: #cc0000; font-weight: bold;">)</span>;      <span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">v1 &#26377; 10 &#20010;&#20803;&#32032;&#65292;&#27599;&#20010;&#20540;&#37117;&#26159; 0</span>
<span style="color: #18b2b2;">vector</span><span style="color: #cc0000; font-weight: bold;">&lt;</span><span style="color: #18b2b2;">int</span><span style="color: #cc0000; font-weight: bold;">&gt;</span> <span style="color: #ff8700;">v2</span><span style="color: #cc0000; font-weight: bold;">{</span>10<span style="color: #cc0000; font-weight: bold;">}</span>;      <span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">v2 &#26377; 1 &#20010;&#20803;&#32032;&#65292;&#20540;&#20026; 10</span>
<span style="color: #18b2b2;">vector</span><span style="color: #cc0000; font-weight: bold;">&lt;</span><span style="color: #18b2b2;">int</span><span style="color: #cc0000; font-weight: bold;">&gt;</span> <span style="color: #ff8700;">v3</span><span style="color: #cc0000; font-weight: bold;">(</span>10, 1<span style="color: #cc0000; font-weight: bold;">)</span>;   <span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">v3 &#26377; 10 &#20010;&#20803;&#32032;&#65292;&#27599;&#20010;&#20540;&#37117;&#26159; 1</span>
<span style="color: #18b2b2;">vector</span><span style="color: #cc0000; font-weight: bold;">&lt;</span><span style="color: #18b2b2;">int</span><span style="color: #cc0000; font-weight: bold;">&gt;</span> <span style="color: #ff8700;">v4</span><span style="color: #cc0000; font-weight: bold;">{</span>10, 1<span style="color: #cc0000; font-weight: bold;">}</span>;   <span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">v4 &#26377; 2 &#20010;&#20803;&#32032;&#65292;&#20540;&#20998;&#21035;&#26159; 10 &#21644; 1</span>

<span style="color: #18b2b2;">vector</span><span style="color: #cc0000; font-weight: bold;">&lt;</span><span style="color: #18b2b2;">string</span><span style="color: #cc0000; font-weight: bold;">&gt;</span> <span style="color: #ff8700;">v5</span><span style="color: #cc0000; font-weight: bold;">{</span><span style="color: #ff1f8b;">"hi"</span><span style="color: #cc0000; font-weight: bold;">}</span>;      <span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">&#21015;&#34920;&#21021;&#22987;&#21270;&#65306;v5 &#26377;&#19968;&#20010;&#20803;&#32032;</span>
<span style="color: #18b2b2;">vector</span><span style="color: #cc0000; font-weight: bold;">&lt;</span><span style="color: #18b2b2;">string</span><span style="color: #cc0000; font-weight: bold;">&gt;</span> <span style="color: #ff8700;">v6</span><span style="color: #cc0000; font-weight: bold;">(</span><span style="color: #ff1f8b;">"hi"</span><span style="color: #cc0000; font-weight: bold;">)</span>;      <span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">&#38169;&#35823;&#65306;&#19981;&#33021;&#20351;&#29992;&#23383;&#31526;&#20018;&#23383;&#38754;&#20540;&#26500;&#24314; vector &#23545;&#35937;</span>
<span style="color: #18b2b2;">vector</span><span style="color: #cc0000; font-weight: bold;">&lt;</span><span style="color: #18b2b2;">string</span><span style="color: #cc0000; font-weight: bold;">&gt;</span> <span style="color: #ff8700;">v7</span><span style="color: #cc0000; font-weight: bold;">{</span>10<span style="color: #cc0000; font-weight: bold;">}</span>;        <span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">v7 &#26377; 10 &#20010;&#40664;&#35748;&#21021;&#22987;&#21270;&#30340;&#20803;&#32032;</span>
<span style="color: #18b2b2;">vector</span><span style="color: #cc0000; font-weight: bold;">&lt;</span><span style="color: #18b2b2;">string</span><span style="color: #cc0000; font-weight: bold;">&gt;</span> <span style="color: #ff8700;">v8</span><span style="color: #cc0000; font-weight: bold;">{</span>10, <span style="color: #ff1f8b;">"hi"</span><span style="color: #cc0000; font-weight: bold;">}</span>;  <span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">v8 &#26377; 10 &#20010;&#20540;&#20026; "hi" &#30340;&#20803;&#32032;</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org12e77a7" class="outline-4">
<h4 id="org12e77a7"><span class="section-number-4">3.2.2</span> 向 vector 对象中添加元素</h4>
<div class="outline-text-4" id="text-3-2-2">
<div class="org-src-container">
<pre class="src src-C++"><span style="color: #00af00;">using</span> <span style="color: #00af00;">namespace</span> <span style="color: #1f5bff;">std</span>;

<span style="color: #18b2b2;">vector</span><span style="color: #cc0000; font-weight: bold;">&lt;</span><span style="color: #18b2b2;">int</span><span style="color: #cc0000; font-weight: bold;">&gt;</span> <span style="color: #ff8700;">iv</span>;
<span style="color: #00af00;">for</span> <span style="color: #cc0000; font-weight: bold;">(</span><span style="color: #18b2b2;">int</span> <span style="color: #ff8700;">i</span> = 0; i &lt; 10; i++<span style="color: #cc0000; font-weight: bold;">)</span> <span style="color: #cc0000; font-weight: bold;">{</span>
  iv.push_back<span style="color: #1f5bff; font-weight: bold;">(</span>i<span style="color: #1f5bff; font-weight: bold;">)</span>;
<span style="color: #cc0000; font-weight: bold;">}</span>
<span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">&#22914;&#26524;&#24490;&#29615;&#20307;&#20869;&#37096;&#21253;&#21547;&#26377;&#25913;&#21464; vector &#38271;&#24230;&#30340;&#35821;&#21477;&#65292;&#21017;&#19981;&#33021;&#20351;&#29992;&#33539;&#22260; for &#24490;&#29615;</span>
<span style="color: #00af00;">for</span> <span style="color: #cc0000; font-weight: bold;">(</span><span style="color: #00af00;">auto</span> <span style="color: #ff8700;">num</span> : iv<span style="color: #cc0000; font-weight: bold;">)</span> <span style="color: #cc0000; font-weight: bold;">{</span>
  cout &lt;&lt; num &lt;&lt; <span style="color: #ff1f8b;">", "</span>;
<span style="color: #cc0000; font-weight: bold;">}</span>
</pre>
</div>

<pre class="example">
0, 1, 2, 3, 4, 5, 6, 7, 8, 9,
</pre>
</div>
</div>

<div id="outline-container-orga4571a8" class="outline-4">
<h4 id="orga4571a8"><span class="section-number-4">3.2.3</span> 其它 vector 操作</h4>
<div class="outline-text-4" id="text-3-2-3">
<p>
vector 对象的其它操作与 string 对象类似
</p>

<table id="orgd8e4f72">
<caption class="t-above"><span class="table-number">Table 2:</span> 一些单词</caption>

<colgroup>
<col  class="org-left">

<col  class="org-left">

<col  class="org-left">

<col  class="org-left">
</colgroup>
<tbody>
<tr>
<td class="org-left">Keep</td>
<td class="org-left">it</td>
<td class="org-left">simple</td>
<td class="org-left">stupid</td>
</tr>
</tbody>
</table>

<div class="org-src-container">
<pre class="src src-C++"><span style="color: #00af00;">using</span> <span style="color: #00af00;">namespace</span> <span style="color: #1f5bff;">std</span>;

<span style="color: #18b2b2;">vector</span><span style="color: #cc0000; font-weight: bold;">&lt;</span><span style="color: #18b2b2;">string</span><span style="color: #cc0000; font-weight: bold;">&gt;</span> <span style="color: #ff8700;">vstrings</span>;
<span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">&#23558; string &#23545;&#35937;&#21152;&#20837;&#21040; vector &#20013;</span>
<span style="color: #00af00;">for</span> <span style="color: #cc0000; font-weight: bold;">(</span><span style="color: #18b2b2;">int</span> <span style="color: #ff8700;">col</span> = 0; col &lt; input_cols; col++<span style="color: #cc0000; font-weight: bold;">)</span> <span style="color: #cc0000; font-weight: bold;">{</span>
  vstrings.push_back<span style="color: #1f5bff; font-weight: bold;">(</span>input<span style="color: #00af00; font-weight: bold;">[</span>0<span style="color: #00af00; font-weight: bold;">][</span>col<span style="color: #00af00; font-weight: bold;">]</span><span style="color: #1f5bff; font-weight: bold;">)</span>;
<span style="color: #cc0000; font-weight: bold;">}</span>
<span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">&#23558; vector &#23545;&#35937;&#20013;&#30340;&#27599;&#20010; string &#23545;&#35937;&#20013;&#30340;&#27599;&#20010;&#23383;&#31526;&#36716;&#25442;&#20026;&#22823;&#20889;&#65292;&#27880;&#24847; *&#24341;&#29992;*</span>
<span style="color: #00af00;">for</span> <span style="color: #cc0000; font-weight: bold;">(</span><span style="color: #18b2b2;">string</span> &amp;<span style="color: #ff8700;">s</span> : vstrings<span style="color: #cc0000; font-weight: bold;">)</span> <span style="color: #cc0000; font-weight: bold;">{</span>
  <span style="color: #00af00;">for</span> <span style="color: #1f5bff; font-weight: bold;">(</span><span style="color: #00af00;">auto</span> &amp;<span style="color: #ff8700;">c</span> : s<span style="color: #1f5bff; font-weight: bold;">)</span> <span style="color: #1f5bff; font-weight: bold;">{</span>
    c = toupper<span style="color: #00af00; font-weight: bold;">(</span>c<span style="color: #00af00; font-weight: bold;">)</span>;
  <span style="color: #1f5bff; font-weight: bold;">}</span>
<span style="color: #cc0000; font-weight: bold;">}</span>
<span style="color: #00af00;">for</span> <span style="color: #cc0000; font-weight: bold;">(</span><span style="color: #18b2b2;">string</span> <span style="color: #ff8700;">s</span> : vstrings<span style="color: #cc0000; font-weight: bold;">)</span> <span style="color: #cc0000; font-weight: bold;">{</span>
  cout &lt;&lt; s &lt;&lt;endl;
<span style="color: #cc0000; font-weight: bold;">}</span>
</pre>
</div>

<pre class="example">
KEEP
IT
SIMPLE
STUPID
</pre>
</div>
</div>

<div id="outline-container-org872cfb5" class="outline-4">
<h4 id="org872cfb5"><span class="section-number-4">3.2.4</span> 用数组初始化 vector 对象</h4>
<div class="outline-text-4" id="text-3-2-4">
<div class="org-src-container">
<pre class="src src-C++"><span style="color: #00af00;">using</span> <span style="color: #00af00;">namespace</span> <span style="color: #1f5bff;">std</span>;

<span style="color: #18b2b2;">int</span> <span style="color: #ff8700;">int_arr</span><span style="color: #cc0000; font-weight: bold;">[]</span> = <span style="color: #cc0000; font-weight: bold;">{</span>0, 1, 2, 3, 4<span style="color: #cc0000; font-weight: bold;">}</span>;
<span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">&#25351;&#26126;&#25968;&#32452;&#30340; begin &#21644; end &#25351;&#38024;</span>
<span style="color: #18b2b2;">vector</span><span style="color: #cc0000; font-weight: bold;">&lt;</span><span style="color: #18b2b2;">int</span><span style="color: #cc0000; font-weight: bold;">&gt;</span> <span style="color: #ef2929;">ivec1</span><span style="color: #cc0000; font-weight: bold;">(</span><span style="color: #18b2b2;">begin</span><span style="color: #1f5bff; font-weight: bold;">(</span><span style="color: #ff8700;">int_arr</span><span style="color: #1f5bff; font-weight: bold;">)</span>, <span style="color: #18b2b2;">end</span><span style="color: #1f5bff; font-weight: bold;">(</span><span style="color: #ff8700;">int_arr</span><span style="color: #1f5bff; font-weight: bold;">)</span><span style="color: #cc0000; font-weight: bold;">)</span>;
<span style="color: #00af00;">for</span> <span style="color: #cc0000; font-weight: bold;">(</span><span style="color: #00af00;">auto</span> <span style="color: #ff8700;">i</span> : ivec1<span style="color: #cc0000; font-weight: bold;">)</span> <span style="color: #cc0000; font-weight: bold;">{</span>
  cout &lt;&lt; i &lt;&lt; <span style="color: #ff1f8b;">", "</span>;
<span style="color: #cc0000; font-weight: bold;">}</span>
cout &lt;&lt; endl;

<span style="color: #18b2b2;">vector</span><span style="color: #cc0000; font-weight: bold;">&lt;</span><span style="color: #18b2b2;">int</span><span style="color: #cc0000; font-weight: bold;">&gt;</span> <span style="color: #ef2929;">ivec2</span><span style="color: #cc0000; font-weight: bold;">(</span>int_arr, int_arr + 5<span style="color: #cc0000; font-weight: bold;">)</span>;
<span style="color: #00af00;">for</span> <span style="color: #cc0000; font-weight: bold;">(</span><span style="color: #00af00;">auto</span> <span style="color: #ff8700;">i</span> : ivec2<span style="color: #cc0000; font-weight: bold;">)</span> <span style="color: #cc0000; font-weight: bold;">{</span>
  cout &lt;&lt; i &lt;&lt; <span style="color: #ff1f8b;">". "</span>;
<span style="color: #cc0000; font-weight: bold;">}</span>
cout &lt;&lt; endl;
</pre>
</div>

<pre class="example">
0, 1, 2, 3, 4, 
0. 1. 2. 3. 4.
</pre>
</div>
</div>
</div>

<div id="outline-container-orge0f0b1f" class="outline-3">
<h3 id="orge0f0b1f"><span class="section-number-3">3.3</span> 迭代器</h3>
<div class="outline-text-3" id="text-3-3">
<p>
C++ 中的迭代器与 Python 中的含义有一些区别，Python 中的迭代器指的是可迭代的容器，
而 C++ 中指的是指向元素的指针对象。相较于下标索引，迭代器的好处是所有标准库容器
都支持迭代器运算
</p>


<figure>
<img src="./C++-学习记录/Screenshot_20200529_121858_HkqmoF.png" alt="Screenshot_20200529_121858_HkqmoF.png">

<figcaption><span class="figure-number">Figure 2: </span>迭代器与迭代器类型</figcaption>
</figure>

<div class="org-src-container">
<pre class="src src-C++"><span style="color: #18b2b2;">vector</span><span style="color: #cc0000; font-weight: bold;">&lt;</span>T<span style="color: #cc0000; font-weight: bold;">&gt;</span> <span style="color: #ff8700;">vec</span>;
<span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">&#30001;&#32534;&#35793;&#22120;&#20915;&#23450; b &#21644; e &#30340;&#31867;&#22411;</span>
<span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">b &#34920;&#31034;&#31532;&#19968;&#20010;&#20803;&#32032;&#65292;e &#34920;&#31034; vec &#23614;&#20803;&#32032;&#30340;&#19979;&#19968;&#20301;&#32622;&#65292;&#22240;&#27492;&#20063;&#34987;&#31216;&#20026;&#23614;&#21518;&#36845;&#20195;&#22120;</span>
<span style="color: #00af00;">auto</span> <span style="color: #ff8700;">b</span> = vec.begin<span style="color: #cc0000; font-weight: bold;">()</span>, <span style="color: #ff8700;">e</span> = vec.end<span style="color: #cc0000; font-weight: bold;">()</span>;

<span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">&#20107;&#23454;&#19978;&#26631;&#20934;&#24211;&#20351;&#29992; iterator &#21644; const_interator &#26469;&#34920;&#31034;&#36845;&#20195;&#22120;&#30340;&#31867;&#22411;</span>
<span style="color: #1f5bff;">vector</span><span style="color: #cc0000; font-weight: bold;">&lt;</span><span style="color: #18b2b2;">int</span><span style="color: #cc0000; font-weight: bold;">&gt;</span>::<span style="color: #18b2b2;">iterator</span> <span style="color: #ff8700;">it1</span>;         <span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">&#35835;&#20889; vector&lt;int&gt; &#30340;&#20803;&#32032;</span>
<span style="color: #1f5bff;">string</span>::<span style="color: #18b2b2;">iterator</span> <span style="color: #ff8700;">it2</span>;              <span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">&#35835;&#20889; string &#23545;&#35937;&#20013;&#30340;&#23383;&#31526;</span>
<span style="color: #1f5bff;">vector</span><span style="color: #cc0000; font-weight: bold;">&lt;</span><span style="color: #18b2b2;">int</span><span style="color: #cc0000; font-weight: bold;">&gt;</span>::<span style="color: #18b2b2;">const_iterator</span> <span style="color: #ff8700;">it3</span>;   <span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">&#21482;&#33021;&#35835;</span>
<span style="color: #1f5bff;">string</span>::<span style="color: #18b2b2;">const_iterator</span> <span style="color: #ff8700;">it4</span>;        <span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">&#21482;&#33021;&#35835;</span>
</pre>
</div>
</div>

<div id="outline-container-org385b70a" class="outline-4">
<h4 id="org385b70a"><span class="section-number-4">3.3.1</span> 迭代器运算</h4>
<div class="outline-text-4" id="text-3-3-1">
<div class="org-src-container">
<pre class="src src-C++">*iter;            <span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">&#36820;&#22238; iter &#25152;&#25351;&#20803;&#32032;&#30340;&#24341;&#29992;</span>
iter-&gt;mem;        <span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">&#31561;&#20215;&#20110; (*iter).mem</span>
++iter;           <span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">&#25351;&#21521;&#23481;&#22120;&#20013;&#30340;&#19979;&#19968;&#20803;&#32032;</span>
--iter;           <span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">&#25351;&#21521;&#23481;&#22120;&#20013;&#30340;&#19978;&#19968;&#20803;&#32032;</span>
iter + n;         <span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">&#36820;&#22238;&#26032;&#36845;&#20195;&#22120;&#21521;&#21069;&#31227;&#21160; n &#20010;&#21333;&#20301;</span>
iter - n;         <span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">&#36820;&#22238;&#26032;&#36845;&#20195;&#22120;&#21521;&#21518;&#31227;&#21160; n &#20010;&#21333;&#20301;</span>
iter1 == iter2;   <span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">&#26159;&#21542;&#25351;&#21521;&#21516;&#19968;&#20803;&#32032;</span>
iter1 != iter2;   <span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">&#26159;&#21542;&#25351;&#21521;&#21516;&#19968;&#20803;&#32032;</span>
iter1 - iter2;    <span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">&#36820;&#22238;&#36845;&#20195;&#22120;&#30340;&#36317;&#31163;</span>
</pre>
</div>

<p>
将字符串改为大写的两种方式，对比下标运算与迭代器
</p>
<div class="org-src-container">
<pre class="src src-C++"><span style="color: #00af00;">using</span> <span style="color: #00af00;">namespace</span> <span style="color: #1f5bff;">std</span>;
<span style="color: #18b2b2;">string</span> <span style="color: #ff8700;">s1</span><span style="color: #cc0000; font-weight: bold;">(</span><span style="color: #ff1f8b;">"Keep it simple stupid"</span><span style="color: #cc0000; font-weight: bold;">)</span>;
<span style="color: #00af00;">for</span> <span style="color: #cc0000; font-weight: bold;">(</span><span style="color: #18b2b2;">int</span> <span style="color: #ff8700;">i</span> = 0; i &lt; s1.size<span style="color: #1f5bff; font-weight: bold;">()</span>; i++<span style="color: #cc0000; font-weight: bold;">)</span>
  s1<span style="color: #cc0000; font-weight: bold;">[</span>i<span style="color: #cc0000; font-weight: bold;">]</span> = toupper<span style="color: #cc0000; font-weight: bold;">(</span>s1<span style="color: #1f5bff; font-weight: bold;">[</span>i<span style="color: #1f5bff; font-weight: bold;">]</span><span style="color: #cc0000; font-weight: bold;">)</span>;
cout &lt;&lt; s1 &lt;&lt; endl;

<span style="color: #18b2b2;">string</span> <span style="color: #ff8700;">s2</span><span style="color: #cc0000; font-weight: bold;">(</span><span style="color: #ff1f8b;">"Keep it simple stupid"</span><span style="color: #cc0000; font-weight: bold;">)</span>;
<span style="color: #00af00;">for</span> <span style="color: #cc0000; font-weight: bold;">(</span><span style="color: #00af00;">auto</span> <span style="color: #ff8700;">iter</span> = s2.begin<span style="color: #1f5bff; font-weight: bold;">()</span>; iter != s2.end<span style="color: #1f5bff; font-weight: bold;">()</span>; iter++<span style="color: #cc0000; font-weight: bold;">)</span>
  *iter = toupper<span style="color: #cc0000; font-weight: bold;">(</span>*iter<span style="color: #cc0000; font-weight: bold;">)</span>;
cout &lt;&lt; s2 &lt;&lt; endl;
</pre>
</div>

<pre class="example">
KEEP IT SIMPLE STUPID
KEEP IT SIMPLE STUPID
</pre>
</div>
</div>

<div id="outline-container-orgd8c8280" class="outline-4">
<h4 id="orgd8c8280"><span class="section-number-4">3.3.2</span> <code>begin</code> 和 <code>end</code> 运算符</h4>
<div class="outline-text-4" id="text-3-3-2">
<p>
默认情况下 begin 和 end 返回的迭代器具体类型由容器的类型决定
</p>

<div class="org-src-container">
<pre class="src src-C++"><span style="color: #18b2b2;">vector</span><span style="color: #cc0000; font-weight: bold;">&lt;</span><span style="color: #18b2b2;">int</span><span style="color: #cc0000; font-weight: bold;">&gt;</span> <span style="color: #ff8700;">v</span>;
<span style="color: #00af00;">const</span> <span style="color: #18b2b2;">vector</span><span style="color: #cc0000; font-weight: bold;">&lt;</span><span style="color: #18b2b2;">int</span><span style="color: #cc0000; font-weight: bold;">&gt;</span> <span style="color: #ff8700;">cv</span>;
<span style="color: #00af00;">auto</span> <span style="color: #ff8700;">it</span> = v.begin<span style="color: #cc0000; font-weight: bold;">()</span>;      <span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">it &#30340;&#31867;&#22411;&#26159; vector&lt;int&gt;::iterator</span>
<span style="color: #00af00;">auto</span> <span style="color: #ff8700;">cit</span> = cv.begin<span style="color: #cc0000; font-weight: bold;">()</span>;    <span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">cit &#30340;&#31867;&#22411;&#26159; vector&lt;int&gt;::const_iterator</span>
</pre>
</div>

<p>
C++ 11 标准引入了两个新函数 <code>cbegin</code> 和 <code>cend</code> ，不论 vector 对象是否本身是常量，返
回的迭代器都是 <code>const_iterator</code>
</p>

<div class="org-src-container">
<pre class="src src-C++"><span style="color: #00af00;">auto</span> <span style="color: #ff8700;">cit</span> = v.cbegin<span style="color: #cc0000; font-weight: bold;">()</span>;
</pre>
</div>
</div>
</div>

<div id="outline-container-org2342ffe" class="outline-4">
<h4 id="org2342ffe"><span class="section-number-4">3.3.3</span> 迭代器算数运算</h4>
<div class="outline-text-4" id="text-3-3-3">
<div class="org-src-container">
<pre class="src src-C++"><span style="color: #00af00;">using</span> <span style="color: #00af00;">namespace</span> <span style="color: #1f5bff;">std</span>;

<span style="color: #18b2b2;">vector</span><span style="color: #cc0000; font-weight: bold;">&lt;</span><span style="color: #18b2b2;">int</span><span style="color: #cc0000; font-weight: bold;">&gt;</span> <span style="color: #ff8700;">vi</span><span style="color: #cc0000; font-weight: bold;">(</span>10<span style="color: #cc0000; font-weight: bold;">)</span>;
<span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">&#20004;&#20010;&#36845;&#20195;&#22120;&#30340;&#24046;&#26159; difference_type &#31867;&#22411;</span>
cout &lt;&lt; <span style="color: #ff1f8b;">"Begin - end is: "</span> &lt;&lt; vi.begin<span style="color: #cc0000; font-weight: bold;">()</span> - vi.end<span style="color: #cc0000; font-weight: bold;">()</span> &lt;&lt; endl;
cout &lt;&lt; <span style="color: #ff1f8b;">"End - begin is: "</span> &lt;&lt; vi.end<span style="color: #cc0000; font-weight: bold;">()</span> - vi.begin<span style="color: #cc0000; font-weight: bold;">()</span> &lt;&lt; endl;
</pre>
</div>

<pre class="example">
Begin - end is: -10
End - begin is: 10
</pre>
</div>
</div>
</div>
<div id="outline-container-orgcd83887" class="outline-3">
<h3 id="orgcd83887"><span class="section-number-3">3.4</span> 数组</h3>
<div class="outline-text-3" id="text-3-4">
<p>
C++ 中的数组与 C 中基本一致，也同时支持指针和下标索引操作。定义数组时必须指针数
组的类型，不允许用 <code>auto</code> 关键字由初始值的列表推断类型。
</p>

<div class="org-src-container">
<pre class="src src-C++"><span style="color: #18b2b2;">int</span> *<span style="color: #ff8700;">ptrs</span><span style="color: #cc0000; font-weight: bold;">[</span>10<span style="color: #cc0000; font-weight: bold;">]</span>;             <span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">ptrs &#26159;&#21547;&#26377; 10 &#20010;&#25972;&#22411;&#25351;&#38024;&#30340;&#25968;&#32452;</span>
<span style="color: #18b2b2;">int</span> &amp;<span style="color: #ff8700;">refs</span><span style="color: #cc0000; font-weight: bold;">[</span>10<span style="color: #cc0000; font-weight: bold;">]</span> = <span style="color: #ef2929;">...</span>;       <span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">&#38169;&#35823;&#65306;&#19981;&#23384;&#22312;&#24341;&#29992;&#30340;&#25968;&#32452;</span>
<span style="color: #18b2b2;">int</span> <span style="color: #cc0000; font-weight: bold;">(</span>*<span style="color: #ff8700;">Parray</span><span style="color: #cc0000; font-weight: bold;">)[</span>10<span style="color: #cc0000; font-weight: bold;">]</span> = &amp;arr;  <span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">Parray &#25351;&#21521;&#19968;&#20010;&#21547;&#26377; 10 &#20010;&#25972;&#25968;&#30340;&#25968;&#32452;</span>
<span style="color: #18b2b2;">int</span> <span style="color: #cc0000; font-weight: bold;">(</span>&amp;<span style="color: #ff8700;">arrRef</span><span style="color: #cc0000; font-weight: bold;">)[</span>10<span style="color: #cc0000; font-weight: bold;">]</span> = arr;   <span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">arrRef &#24341;&#29992;&#19968;&#20010;&#21547;&#26377; 10 &#20010;&#25972;&#25968;&#30340;&#25968;&#32452;</span>
</pre>
</div>
</div>

<div id="outline-container-org46adc2f" class="outline-4">
<h4 id="org46adc2f"><span class="section-number-4">3.4.1</span> 范围 for 语句</h4>
<div class="outline-text-4" id="text-3-4-1">
<p>
数组也可以使用范围 for 语句
</p>

<div class="org-src-container">
<pre class="src src-C++"><span style="color: #00af00;">using</span> <span style="color: #00af00;">namespace</span> <span style="color: #1f5bff;">std</span>;

<span style="color: #18b2b2;">int</span> <span style="color: #ff8700;">arr</span><span style="color: #cc0000; font-weight: bold;">[]</span> = <span style="color: #cc0000; font-weight: bold;">{</span>0, 1, 2, 3, 4<span style="color: #cc0000; font-weight: bold;">}</span>;
<span style="color: #00af00;">for</span> <span style="color: #cc0000; font-weight: bold;">(</span><span style="color: #00af00;">auto</span> <span style="color: #ff8700;">i</span> : arr<span style="color: #cc0000; font-weight: bold;">)</span>
  cout &lt;&lt; i &lt;&lt; <span style="color: #ff1f8b;">" | "</span>;
cout &lt;&lt; endl;
</pre>
</div>

<pre class="example">
0 | 1 | 2 | 3 | 4 |
</pre>
</div>
</div>

<div id="outline-container-orgebc441a" class="outline-4">
<h4 id="orgebc441a"><span class="section-number-4">3.4.2</span> 数组中的自动类型推断</h4>
<div class="outline-text-4" id="text-3-4-2">
<div class="org-src-container">
<pre class="src src-C++"><span style="color: #18b2b2;">int</span> <span style="color: #ff8700;">a1</span><span style="color: #cc0000; font-weight: bold;">[]</span> =  <span style="color: #cc0000; font-weight: bold;">{</span>0, 1, 2, 3, 4<span style="color: #cc0000; font-weight: bold;">}</span>;
<span style="color: #00af00;">auto</span> <span style="color: #ef2929;">a2</span><span style="color: #cc0000; font-weight: bold;">(</span>a1<span style="color: #cc0000; font-weight: bold;">)</span>;                        <span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">a2 &#26159;&#19968;&#20010;&#25972;&#22411;&#25351;&#38024;&#65292;&#25351;&#21521; a1 &#30340;&#31532;&#19968;&#20010;&#20803;&#32032;</span>

<span style="color: #00af00;">decltype</span><span style="color: #cc0000; font-weight: bold;">(</span>a1<span style="color: #cc0000; font-weight: bold;">)</span> <span style="color: #ff8700;">a3</span> = <span style="color: #cc0000; font-weight: bold;">{</span>0, 1, 2, 3, 4<span style="color: #cc0000; font-weight: bold;">}</span>;  <span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">a3 &#26159;&#19968;&#20010;&#25968;&#32452;&#23545;&#35937;</span>
a3 = a1;                            <span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">&#38169;&#35823;&#65306;&#19981;&#33021;&#29992;&#25351;&#38024;&#32473;&#25968;&#32452;&#36171;&#20540;</span>
a3<span style="color: #cc0000; font-weight: bold;">[</span>0<span style="color: #cc0000; font-weight: bold;">]</span> = 2;                          <span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">&#27491;&#30830;</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org2a83ee3" class="outline-4">
<h4 id="org2a83ee3"><span class="section-number-4">3.4.3</span> 标准库函数 <code>begin</code> 和 <code>end</code></h4>
<div class="outline-text-4" id="text-3-4-3">
<p>
C++ 11 新标准引入了 <code>begin</code> 和 <code>end</code> 函数，定义在 <code>iterator</code> 头文件中
</p>

<div class="org-src-container">
<pre class="src src-C++"><span style="color: #00af00;">using</span> <span style="color: #00af00;">namespace</span> <span style="color: #1f5bff;">std</span>;

<span style="color: #18b2b2;">int</span> <span style="color: #ff8700;">ia</span><span style="color: #cc0000; font-weight: bold;">[]</span> = <span style="color: #cc0000; font-weight: bold;">{</span>0, 1, 2, 3, 4<span style="color: #cc0000; font-weight: bold;">}</span>;
<span style="color: #18b2b2;">int</span> *<span style="color: #ff8700;">begin_</span> = begin<span style="color: #cc0000; font-weight: bold;">(</span>ia<span style="color: #cc0000; font-weight: bold;">)</span>;
<span style="color: #18b2b2;">int</span> *<span style="color: #ff8700;">end_</span> = end<span style="color: #cc0000; font-weight: bold;">(</span>ia<span style="color: #cc0000; font-weight: bold;">)</span>;
<span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">&#19979;&#26631;&#22914;&#25351;&#38024;&#65292;begin_[0] &#31561;&#20215;&#20110; *(begin_ + 0)</span>
<span style="color: #b2b2b2; font-style: italic;">//             </span><span style="color: #b2b2b2; font-style: italic;">end_[-1] &#31561;&#20215;&#20110; *(end_ - 1)</span>
<span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">&#38656;&#27880;&#24847;&#65306;&#26631;&#20934;&#24211;&#31867;&#22411;&#22914; string &#21644; vector &#30340;&#19979;&#26631;&#19981;&#33021;&#26159;&#36127;&#20540;</span>
cout &lt;&lt; <span style="color: #ff1f8b;">"First elements is: "</span> &lt;&lt; begin_<span style="color: #cc0000; font-weight: bold;">[</span>0<span style="color: #cc0000; font-weight: bold;">]</span> &lt;&lt; endl;
cout &lt;&lt; <span style="color: #ff1f8b;">"Last elements is: "</span> &lt;&lt; end_<span style="color: #cc0000; font-weight: bold;">[</span>-1<span style="color: #cc0000; font-weight: bold;">]</span> &lt;&lt; endl;
</pre>
</div>

<pre class="example">
First elements is: 0
Last elements is: 4
</pre>
</div>
</div>

<div id="outline-container-org41db26c" class="outline-4">
<h4 id="org41db26c"><span class="section-number-4">3.4.4</span> 指针的差值</h4>
<div class="outline-text-4" id="text-3-4-4">
<p>
指针的差值与迭代器类似，同样只能对同种类型的指针作差，更近一步，参与运算的两个指
针要指向同一数组中的元素。对不同数组中的指针作差属于未定义的行为，并且也没有意义。
指针相减的结果是 <code>ptrdiff_t</code> 类型，同样是带符号类型，定义在 <code>cstddef</code> 头文件中。
</p>
</div>
</div>
<div id="outline-container-orgbb96256" class="outline-4">
<h4 id="orgbb96256"><span class="section-number-4">3.4.5</span> 多维数组与下标</h4>
<div class="outline-text-4" id="text-3-4-5">
<div class="org-src-container">
<pre class="src src-C++"><span style="color: #00af00;">using</span> <span style="color: #00af00;">namespace</span> <span style="color: #1f5bff;">std</span>;

<span style="color: #00af00;">constexpr</span> <span style="color: #18b2b2;">size_t</span> <span style="color: #ff8700;">rows</span> = 3, <span style="color: #ff8700;">cols</span> = 4;
<span style="color: #18b2b2;">int</span> <span style="color: #ff8700;">ia</span><span style="color: #cc0000; font-weight: bold;">[</span>rows<span style="color: #cc0000; font-weight: bold;">][</span>cols<span style="color: #cc0000; font-weight: bold;">]</span>;
<span style="color: #00af00;">for</span> <span style="color: #cc0000; font-weight: bold;">(</span><span style="color: #18b2b2;">size_t</span> <span style="color: #ff8700;">i</span> = 0; i != rows; i++<span style="color: #cc0000; font-weight: bold;">)</span> <span style="color: #cc0000; font-weight: bold;">{</span>
  <span style="color: #00af00;">for</span> <span style="color: #1f5bff; font-weight: bold;">(</span><span style="color: #18b2b2;">size_t</span> <span style="color: #ff8700;">j</span> = 0; j != cols; j++<span style="color: #1f5bff; font-weight: bold;">)</span> <span style="color: #1f5bff; font-weight: bold;">{</span>
    ia<span style="color: #00af00; font-weight: bold;">[</span>i<span style="color: #00af00; font-weight: bold;">][</span>j<span style="color: #00af00; font-weight: bold;">]</span> = i * cols + j;
  <span style="color: #1f5bff; font-weight: bold;">}</span>
<span style="color: #cc0000; font-weight: bold;">}</span>

<span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">&#36825;&#20010;&#24490;&#29615;&#20013;&#27809;&#26377;&#20219;&#20309;&#20889;&#25805;&#20316;&#65292;&#20294;&#36824;&#26159;&#23558;&#22806;&#23618;&#30340;&#25511;&#21046;&#21464;&#37327;&#22768;&#26126;&#25104;&#20102;&#24341;&#29992;&#31867;&#22411;</span>
<span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">&#36825;&#26159;&#20026;&#20102;&#36991;&#20813;&#25968;&#32452;&#34987;&#33258;&#21160;&#36716;&#25104;&#25351;&#38024;</span>
<span style="color: #00af00;">for</span> <span style="color: #cc0000; font-weight: bold;">(</span><span style="color: #00af00;">const</span> <span style="color: #00af00;">auto</span> &amp;<span style="color: #ff8700;">row</span> : ia<span style="color: #cc0000; font-weight: bold;">)</span> <span style="color: #cc0000; font-weight: bold;">{</span>
  <span style="color: #00af00;">for</span> <span style="color: #1f5bff; font-weight: bold;">(</span><span style="color: #00af00;">auto</span> <span style="color: #ff8700;">col</span> : row<span style="color: #1f5bff; font-weight: bold;">)</span>
    cout &lt;&lt; col &lt;&lt; <span style="color: #ff1f8b;">", "</span>;
  cout &lt;&lt; endl;
<span style="color: #cc0000; font-weight: bold;">}</span>
</pre>
</div>

<pre class="example">
0, 1, 2, 3, 
4, 5, 6, 7, 
8, 9, 10, 11,
</pre>
</div>
</div>

<div id="outline-container-org53d7a5e" class="outline-4">
<h4 id="org53d7a5e"><span class="section-number-4">3.4.6</span> 多维数组与指针</h4>
<div class="outline-text-4" id="text-3-4-6">
<div class="org-src-container">
<pre class="src src-C++"><span style="color: #00af00;">using</span> <span style="color: #00af00;">namespace</span> <span style="color: #1f5bff;">std</span>;

<span style="color: #18b2b2;">int</span> <span style="color: #ff8700;">ia</span><span style="color: #cc0000; font-weight: bold;">[</span>3<span style="color: #cc0000; font-weight: bold;">][</span>4<span style="color: #cc0000; font-weight: bold;">]</span>;
<span style="color: #18b2b2;">int</span> <span style="color: #cc0000; font-weight: bold;">(</span>*<span style="color: #ff8700;">p</span><span style="color: #cc0000; font-weight: bold;">)[</span>4<span style="color: #cc0000; font-weight: bold;">]</span> = ia;   <span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">p &#25351;&#21521;&#21547;&#26377; 4 &#20010; int &#30340;&#25968;&#32452;</span>
p = &amp;ia<span style="color: #cc0000; font-weight: bold;">[</span>2<span style="color: #cc0000; font-weight: bold;">]</span>;

<span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">&#20351;&#29992; auto &#33258;&#21160;&#25512;&#26029;&#25968;&#32452;&#25351;&#38024;&#31867;&#22411;</span>
<span style="color: #00af00;">for</span> <span style="color: #cc0000; font-weight: bold;">(</span><span style="color: #00af00;">auto</span> <span style="color: #ff8700;">p</span> = ia; p != ia + 3; p++<span style="color: #cc0000; font-weight: bold;">)</span> <span style="color: #cc0000; font-weight: bold;">{</span>
  <span style="color: #00af00;">for</span> <span style="color: #1f5bff; font-weight: bold;">(</span><span style="color: #00af00;">auto</span> <span style="color: #ff8700;">q</span> = *p; q != *p + 4; q++<span style="color: #1f5bff; font-weight: bold;">)</span> <span style="color: #1f5bff; font-weight: bold;">{</span>
    *q = q - *ia;
  <span style="color: #1f5bff; font-weight: bold;">}</span>
<span style="color: #cc0000; font-weight: bold;">}</span>

<span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">&#20351;&#29992; begin &#21644; end &#20989;&#25968;</span>
<span style="color: #00af00;">for</span> <span style="color: #cc0000; font-weight: bold;">(</span><span style="color: #00af00;">auto</span> <span style="color: #ff8700;">p</span> = begin<span style="color: #1f5bff; font-weight: bold;">(</span>ia<span style="color: #1f5bff; font-weight: bold;">)</span>; p != end<span style="color: #1f5bff; font-weight: bold;">(</span>ia<span style="color: #1f5bff; font-weight: bold;">)</span>; p++<span style="color: #cc0000; font-weight: bold;">)</span> <span style="color: #cc0000; font-weight: bold;">{</span>
  <span style="color: #00af00;">for</span> <span style="color: #1f5bff; font-weight: bold;">(</span><span style="color: #00af00;">auto</span> <span style="color: #ff8700;">q</span> = begin<span style="color: #00af00; font-weight: bold;">(</span>*p<span style="color: #00af00; font-weight: bold;">)</span>; q != end<span style="color: #00af00; font-weight: bold;">(</span>*p<span style="color: #00af00; font-weight: bold;">)</span>; q++<span style="color: #1f5bff; font-weight: bold;">)</span> <span style="color: #1f5bff; font-weight: bold;">{</span>
    cout &lt;&lt; *q &lt;&lt; <span style="color: #ff1f8b;">", "</span>;
  <span style="color: #1f5bff; font-weight: bold;">}</span>
  cout &lt;&lt; endl;
<span style="color: #cc0000; font-weight: bold;">}</span>
</pre>
</div>

<pre class="example">
0, 1, 2, 3, 
4, 5, 6, 7, 
8, 9, 10, 11,
</pre>
</div>
</div>

<div id="outline-container-org2d51d50" class="outline-4">
<h4 id="org2d51d50"><span class="section-number-4">3.4.7</span> 类型别名简化多维数组指针</h4>
<div class="outline-text-4" id="text-3-4-7">
<div class="org-src-container">
<pre class="src src-C++"><span style="color: #00af00;">using</span> <span style="color: #00af00;">namespace</span> <span style="color: #1f5bff;">std</span>;

<span style="color: #00af00;">using</span> <span style="color: #18b2b2;">int_array</span> = <span style="color: #18b2b2;">int</span><span style="color: #cc0000; font-weight: bold;">[</span>4<span style="color: #cc0000; font-weight: bold;">]</span>;   <span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">&#26032;&#26631;&#20934;&#30340;&#31867;&#22411;&#21035;&#21517;&#22768;&#26126;</span>
<span style="color: #00af00;">typedef</span> <span style="color: #18b2b2;">int</span> <span style="color: #18b2b2;">int_array</span><span style="color: #cc0000; font-weight: bold;">[</span>4<span style="color: #cc0000; font-weight: bold;">]</span>;   <span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">&#31561;&#20215;&#30340; typedef &#31867;&#22411;&#21035;&#21517;</span>

<span style="color: #00af00;">for</span> <span style="color: #cc0000; font-weight: bold;">(</span><span style="color: #18b2b2;">int_array</span> *<span style="color: #ff8700;">p</span> = ia; p != ia + 3; p++<span style="color: #cc0000; font-weight: bold;">)</span>
  <span style="color: #00af00;">for</span> <span style="color: #cc0000; font-weight: bold;">(</span><span style="color: #18b2b2;">int</span> *<span style="color: #ff8700;">q</span> = *p; q != 4; q++<span style="color: #cc0000; font-weight: bold;">)</span>
    *q = q - *ia;
</pre>
</div>
</div>
</div>
</div>
</div>
<div id="outline-container-orgf5aa759" class="outline-2">
<h2 id="orgf5aa759"><span class="section-number-2">4</span> 表达式</h2>
<div class="outline-text-2" id="text-4">
</div>
<div id="outline-container-org9f524e7" class="outline-3">
<h3 id="org9f524e7"><span class="section-number-3">4.1</span> 优先使用递增递减运算符的后置版本</h3>
<div class="outline-text-3" id="text-4-1">

<figure>
<img src="./C++-学习记录/Screenshot_20200531_171609_pgiWcp.png" alt="Screenshot_20200531_171609_pgiWcp.png">

</figure>
</div>
</div>
<div id="outline-container-org9e7b687" class="outline-3">
<h3 id="org9e7b687"><span class="section-number-3">4.2</span> 运算对象可按任意顺序求值</h3>
<div class="outline-text-3" id="text-4-2">
<div class="org-src-container">
<pre class="src src-C++"><span style="color: #00af00;">while</span> <span style="color: #cc0000; font-weight: bold;">(</span>beg != s.end<span style="color: #1f5bff; font-weight: bold;">()</span> &amp;&amp; <span style="color: #cc0000;">!</span>isspace<span style="color: #1f5bff; font-weight: bold;">(</span>*beg<span style="color: #1f5bff; font-weight: bold;">)</span><span style="color: #cc0000; font-weight: bold;">)</span>
  *beg = toupper<span style="color: #cc0000; font-weight: bold;">(</span>*beg++<span style="color: #cc0000; font-weight: bold;">)</span>;   <span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">&#38169;&#35823;&#65306;&#36171;&#20540;&#35821;&#21477;&#26410;&#23450;&#20041;</span>
*beg = toupper<span style="color: #cc0000; font-weight: bold;">(</span>*beg<span style="color: #cc0000; font-weight: bold;">)</span>;       <span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">&#22914;&#26524;&#20808;&#27714;&#24038;&#20391;&#30340;&#20540;</span>
*<span style="color: #cc0000; font-weight: bold;">(</span>beg + 1<span style="color: #cc0000; font-weight: bold;">)</span> = toupper<span style="color: #cc0000; font-weight: bold;">(</span>*beg<span style="color: #cc0000; font-weight: bold;">)</span>; <span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">&#22914;&#26524;&#20808;&#27714;&#21491;&#20391;&#30340;&#20540;</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgc3ad58c" class="outline-3">
<h3 id="orgc3ad58c"><span class="section-number-3">4.3</span> 强制类型转换</h3>
<div class="outline-text-3" id="text-4-3">
<div class="org-src-container">
<pre class="src src-C++"><span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">cast-name&lt;type&gt;(expression)</span>

<span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">&#29992; static_cast &#23558; j &#24378;&#21046;&#36716;&#25442;&#20026; double</span>
<span style="color: #18b2b2;">double</span> <span style="color: #ff8700;">slope</span> = <span style="color: #00af00;">static_cast</span><span style="color: #cc0000; font-weight: bold;">&lt;</span><span style="color: #18b2b2;">double</span><span style="color: #cc0000; font-weight: bold;">&gt;(</span>j<span style="color: #cc0000; font-weight: bold;">)</span> / i;
<span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">&#29992; const_cast &#25913;&#21464;&#36816;&#31639;&#23545;&#35937;&#24213;&#23618; const</span>
<span style="color: #00af00;">const</span> <span style="color: #18b2b2;">char</span> *<span style="color: #ff8700;">pc</span>;
<span style="color: #18b2b2;">char</span> *<span style="color: #ff8700;">p</span> = <span style="color: #00af00;">const_cast</span><span style="color: #cc0000; font-weight: bold;">&lt;</span><span style="color: #18b2b2;">char</span>*<span style="color: #cc0000; font-weight: bold;">&gt;(</span>pc<span style="color: #cc0000; font-weight: bold;">)</span>;   <span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">&#21512;&#27861;&#65292;&#20294;&#36890;&#36807; p &#20889;&#20540;&#26159;&#26410;&#23450;&#20041;&#30340;</span>
<span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">C &#39118;&#26684;&#30340;&#24378;&#21046;&#31867;&#22411;&#36716;&#25442;</span>
<span style="color: #18b2b2;">double</span> <span style="color: #ff8700;">slope</span> = <span style="color: #cc0000; font-weight: bold;">(</span><span style="color: #18b2b2;">double</span><span style="color: #cc0000; font-weight: bold;">)</span> j / i;
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-orgbbe1109" class="outline-2">
<h2 id="orgbbe1109"><span class="section-number-2">5</span> 语句</h2>
<div class="outline-text-2" id="text-5">
</div>
<div id="outline-container-orgbf50691" class="outline-3">
<h3 id="orgbf50691"><span class="section-number-3">5.1</span> try 语句块与异常处理</h3>
<div class="outline-text-3" id="text-5-1">
<p>
在 C++ 中，异常处理包括：
</p>
<ul class="org-ul">
<li><code>throw</code> 表达式，用于抛出异常</li>
<li><code>try</code> 语句块，包含一个或多个 <code>catch</code> 子句</li>
<li>一套 <code>异常类</code> ，用于在 <code>throw</code> 表达式和相关 <code>catch</code> 子句间传递异常的具体信息</li>
</ul>
</div>

<div id="outline-container-org43bd9ea" class="outline-4">
<h4 id="org43bd9ea"><span class="section-number-4">5.1.1</span> throw 表达式</h4>
<div class="outline-text-4" id="text-5-1-1">
<p>
如下代码片断的功能为检查两个 <code>Sales_item</code> 对象是否具有相同的 <code>ISBN</code> ，是的话输出两个
对象的和，不是的话返回失败
</p>
<div class="org-src-container">
<pre class="src src-C++"><span style="color: #18b2b2;">Sales_item</span> <span style="color: #ff8700;">item1</span>, <span style="color: #ff8700;">item2</span>;
cin &gt;&gt; item1 &gt;&gt; item2;

<span style="color: #00af00;">if</span> <span style="color: #cc0000; font-weight: bold;">(</span>item1.isbn<span style="color: #1f5bff; font-weight: bold;">()</span> == item2.isbn<span style="color: #1f5bff; font-weight: bold;">()</span><span style="color: #cc0000; font-weight: bold;">)</span> <span style="color: #cc0000; font-weight: bold;">{</span>
  cout &lt;&lt; item1 + item2 &lt;&lt; endl;
  <span style="color: #00af00;">return</span> 0;
 <span style="color: #cc0000; font-weight: bold;">}</span> <span style="color: #00af00;">else</span> <span style="color: #cc0000; font-weight: bold;">{</span>
  cerr &lt;&lt; <span style="color: #ff1f8b;">"Data must refer to same ISBN"</span> &lt;&lt; endl;
  <span style="color: #00af00;">return</span> -1;
 <span style="color: #cc0000; font-weight: bold;">}</span>
</pre>
</div>

<p>
但在实际的程序中，我们可以会想在其它位置处理错误，此时我们不再直接输出一条信息，
而是抛出一个异常
</p>
<div class="org-src-container">
<pre class="src src-C++"><span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">&#33509; ISBN &#19981;&#30456;&#21516;&#25243;&#20986;&#24322;&#24120;</span>
<span style="color: #00af00;">if</span> <span style="color: #cc0000; font-weight: bold;">(</span>item1.isbn<span style="color: #1f5bff; font-weight: bold;">()</span> != item2.isbn<span style="color: #1f5bff; font-weight: bold;">()</span><span style="color: #cc0000; font-weight: bold;">)</span>
  <span style="color: #00af00;">throw</span> runtime_error<span style="color: #cc0000; font-weight: bold;">(</span><span style="color: #ff1f8b;">"Data must refer to same ISBN"</span><span style="color: #cc0000; font-weight: bold;">)</span>;
cout &lt;&lt; item1 + item2 &lt;&lt; endl;
</pre>
</div>

<p>
其中 <code>runtime_error</code> 是标准异常类型的一种，定义在 <code>stdexcept</code> 头文件中。
</p>
</div>
</div>

<div id="outline-container-orgffd7382" class="outline-4">
<h4 id="orgffd7382"><span class="section-number-4">5.1.2</span> <code>try</code> 语句块</h4>
<div class="outline-text-4" id="text-5-1-2">
<div class="org-src-container">
<pre class="src src-C++"><span style="color: #00af00;">try</span> <span style="color: #cc0000; font-weight: bold;">{</span>
  program-statements;
 <span style="color: #cc0000; font-weight: bold;">}</span> <span style="color: #00af00;">catch</span> <span style="color: #cc0000; font-weight: bold;">(</span>exception-declaration<span style="color: #cc0000; font-weight: bold;">)</span> <span style="color: #cc0000; font-weight: bold;">{</span>
  handler-statements;
 <span style="color: #cc0000; font-weight: bold;">}</span> <span style="color: #00af00;">catch</span> <span style="color: #cc0000; font-weight: bold;">(</span>exception-declaration<span style="color: #cc0000; font-weight: bold;">)</span> <span style="color: #cc0000; font-weight: bold;">{</span>
  handler-statements;
 <span style="color: #cc0000; font-weight: bold;">}</span> <span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">...</span>
</pre>
</div>

<p>
为代码加上错误处理
</p>

<div class="org-src-container">
<pre class="src src-C++"><span style="color: #00af00;">while</span> <span style="color: #cc0000; font-weight: bold;">(</span>cin &gt;&gt; item1 &gt;&gt; item2<span style="color: #cc0000; font-weight: bold;">)</span> <span style="color: #cc0000; font-weight: bold;">{</span>
  <span style="color: #00af00;">try</span> <span style="color: #1f5bff; font-weight: bold;">{</span>
    <span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">&#27492;&#22788;&#28155;&#21152;&#20004;&#20010; Sales_item &#23545;&#35937;&#30340;&#20195;&#30721;</span>
    <span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">&#22914;&#26524;&#22833;&#36133;&#25243;&#20986;&#19968;&#20010; runtime_error &#24322;&#24120;</span>
  <span style="color: #1f5bff; font-weight: bold;">}</span> <span style="color: #00af00;">catch</span> <span style="color: #1f5bff; font-weight: bold;">(</span><span style="color: #18b2b2;">runtime_error</span> <span style="color: #ff8700;">err</span><span style="color: #1f5bff; font-weight: bold;">)</span> <span style="color: #1f5bff; font-weight: bold;">{</span>
    <span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">&#25552;&#37266;&#29992;&#25143;&#20004;&#20010; ISBN &#24517;&#39035;&#19968;&#33268;&#65292;&#35810;&#38382;&#26159;&#21542;&#37325;&#26032;&#36755;&#20837;</span>
    cout &lt;&lt; err.what<span style="color: #00af00; font-weight: bold;">()</span>
         &lt;&lt; <span style="color: #ff1f8b;">"\nTry Again?(y/n)"</span> &lt;&lt; endl;
    <span style="color: #18b2b2;">char</span> <span style="color: #ff8700;">c</span>;
    cin &gt;&gt; c;
    <span style="color: #00af00;">if</span> <span style="color: #00af00; font-weight: bold;">(</span><span style="color: #cc0000;">!</span>cin || c == <span style="color: #ff1f8b;">'n'</span><span style="color: #00af00; font-weight: bold;">)</span>
      <span style="color: #00af00;">break</span>;
  <span style="color: #1f5bff; font-weight: bold;">}</span>
 <span style="color: #cc0000; font-weight: bold;">}</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgec22492" class="outline-4">
<h4 id="orgec22492"><span class="section-number-4">5.1.3</span> 异常类</h4>
<div class="outline-text-4" id="text-5-1-3">
<p>
<code>&lt;stdexcept&gt;</code> 中定义了一些异常类
</p>


<figure>
<img src="./C++-学习记录/Screenshot_20200531_194606_v3CH8o.png" alt="Screenshot_20200531_194606_v3CH8o.png">

<figcaption><span class="figure-number">Figure 4: </span>&lt;stdexcept&gt; 中定义的异常类</figcaption>
</figure>
</div>
</div>
</div>
</div>
<div id="outline-container-orgd607f7b" class="outline-2">
<h2 id="orgd607f7b"><span class="section-number-2">6</span> 函数</h2>
<div class="outline-text-2" id="text-6">
</div>
<div id="outline-container-orge5b9c5d" class="outline-3">
<h3 id="orge5b9c5d"><span class="section-number-3">6.1</span> 参数传递</h3>
<div class="outline-text-3" id="text-6-1">
</div>
<div id="outline-container-org4d0aec0" class="outline-4">
<h4 id="org4d0aec0"><span class="section-number-4">6.1.1</span> 值传递和引用传递</h4>
<div class="outline-text-4" id="text-6-1-1">
<p>
当形参是引用类型时，对应的实参是被引用传递，函数是被传引用调用；当实参的值被拷贝
给形参时，形参和实参是两个独立的对象，此时实参被值传递，函数是被传值调用
</p>

<div class="org-src-container">
<pre class="src src-C++"><span style="color: #00af00;">using</span> <span style="color: #00af00;">namespace</span> <span style="color: #1f5bff;">std</span>;

<span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">&#20256;&#24341;&#29992;&#21442;&#25968;&#65292;&#20351;&#29992;&#24341;&#29992;&#26469;&#36991;&#20813;&#23545;&#35937;&#25335;&#36125;&#65292;&#27492;&#26102;&#30340;&#20316;&#29992;&#19982;&#25351;&#38024;&#31867;&#20284;</span>
<span style="color: #18b2b2;">void</span> <span style="color: #ef2929;">mul2</span><span style="color: #cc0000; font-weight: bold;">(</span><span style="color: #18b2b2;">int</span> &amp;<span style="color: #ff8700;">i</span><span style="color: #cc0000; font-weight: bold;">)</span> <span style="color: #cc0000; font-weight: bold;">{</span>
  i *= 2;
<span style="color: #cc0000; font-weight: bold;">}</span>

<span style="color: #18b2b2;">int</span> <span style="color: #ef2929;">main</span><span style="color: #cc0000; font-weight: bold;">(</span><span style="color: #18b2b2;">int</span> <span style="color: #ff8700;">argc</span>, <span style="color: #18b2b2;">char</span> *<span style="color: #ff8700;">argv</span><span style="color: #1f5bff; font-weight: bold;">[]</span><span style="color: #cc0000; font-weight: bold;">)</span>
<span style="color: #cc0000; font-weight: bold;">{</span>
  <span style="color: #18b2b2;">int</span> <span style="color: #ff8700;">i</span> = 3;
  mul2<span style="color: #1f5bff; font-weight: bold;">(</span>i<span style="color: #1f5bff; font-weight: bold;">)</span>;
  cout &lt;&lt; <span style="color: #ff1f8b;">"i is "</span> &lt;&lt; i &lt;&lt; endl;
  <span style="color: #00af00;">return</span> 0;
<span style="color: #cc0000; font-weight: bold;">}</span>
</pre>
</div>

<pre class="example">
i is 6
</pre>
</div>
</div>

<div id="outline-container-org02af77e" class="outline-4">
<h4 id="org02af77e"><span class="section-number-4">6.1.2</span> const 形参和实参</h4>
<div class="outline-text-4" id="text-6-1-2">
<p>
和其它初始化过程一样，当用实参初始化形参时会忽略掉顶层 const，换句话说，形参的顶
层 const 被忽略掉了。当形参有顶层 const 时，传给它常量对象或者非常量对象都是可以
的
</p>

<div class="org-src-container">
<pre class="src src-C++"><span style="color: #00af00;">using</span> <span style="color: #00af00;">namespace</span> <span style="color: #1f5bff;">std</span>;

<span style="color: #18b2b2;">void</span> <span style="color: #ef2929;">fcn</span><span style="color: #cc0000; font-weight: bold;">(</span><span style="color: #00af00;">const</span> <span style="color: #18b2b2;">int</span> <span style="color: #ff8700;">i</span><span style="color: #cc0000; font-weight: bold;">)</span> <span style="color: #cc0000; font-weight: bold;">{</span>
  <span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">fcn &#33021;&#22815;&#35835;&#21462; i&#65292;&#20294;&#19981;&#33021;&#21521; i &#20889;&#20540;</span>
  cout &lt;&lt; i &lt;&lt; endl;
<span style="color: #cc0000; font-weight: bold;">}</span>

<span style="color: #18b2b2;">int</span> <span style="color: #ef2929;">main</span><span style="color: #cc0000; font-weight: bold;">(</span><span style="color: #18b2b2;">int</span> <span style="color: #ff8700;">argc</span>, <span style="color: #18b2b2;">char</span> *<span style="color: #ff8700;">argv</span><span style="color: #1f5bff; font-weight: bold;">[]</span><span style="color: #cc0000; font-weight: bold;">)</span>
<span style="color: #cc0000; font-weight: bold;">{</span>
  <span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">&#21521; fcn &#20013;&#20256;&#20837;&#24120;&#37327;&#25110;&#38750;&#24120;&#37327;&#37117;&#26159;&#21512;&#27861;&#30340;</span>
  <span style="color: #00af00;">const</span> <span style="color: #18b2b2;">int</span> <span style="color: #ff8700;">a</span> = 0;
  <span style="color: #18b2b2;">int</span> <span style="color: #ff8700;">b</span> = 1;
  fcn<span style="color: #1f5bff; font-weight: bold;">(</span>a<span style="color: #1f5bff; font-weight: bold;">)</span>;
  fcn<span style="color: #1f5bff; font-weight: bold;">(</span>b<span style="color: #1f5bff; font-weight: bold;">)</span>;
  <span style="color: #00af00;">return</span> 0;
<span style="color: #cc0000; font-weight: bold;">}</span>
</pre>
</div>

<pre class="example">
0
1
</pre>


<p>
形参的初始化方法与变量的初始化方法是一样的，可以使用非常量初始化一个底层 const
对象，但反过来不合法；同时一个普通的引用必须用同类型的对象初始化
</p>

<div class="org-src-container">
<pre class="src src-C++"><span style="color: #18b2b2;">int</span> <span style="color: #ff8700;">i</span> = 42;
<span style="color: #00af00;">const</span> <span style="color: #18b2b2;">int</span> *<span style="color: #ff8700;">cp</span> = &amp;i;   <span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">&#27491;&#30830;&#65306;&#20294;&#26159;&#19981;&#33021;&#36890;&#36807; cp &#25913;&#21464; i</span>
<span style="color: #00af00;">const</span> <span style="color: #18b2b2;">int</span> &amp;<span style="color: #ff8700;">r</span> = i;     <span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">&#27491;&#30830;&#65306;&#20294;&#26159;&#19981;&#33021;&#36890;&#36807; r &#25913;&#21464; i</span>
<span style="color: #00af00;">const</span> <span style="color: #18b2b2;">int</span> &amp;<span style="color: #ff8700;">r2</span> = 42;   <span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">&#27491;&#30830;&#65306;</span>
<span style="color: #18b2b2;">int</span> *<span style="color: #ff8700;">p</span> = cp;          <span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">&#38169;&#35823;&#65306;p &#30340;&#31867;&#22411;&#21644; cp &#30340;&#31867;&#22411;&#19981;&#21305;&#37197;</span>
<span style="color: #18b2b2;">int</span> &amp;<span style="color: #ff8700;">r3</span> = r;          <span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">&#38169;&#35823;&#65306;r3 &#30340;&#31867;&#22411;&#21644; r &#30340;&#31867;&#22411;&#19981;&#21305;&#37197;</span>
<span style="color: #18b2b2;">int</span> &amp;<span style="color: #ff8700;">r4</span> = 42;         <span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">&#38169;&#35823;&#65306;&#19981;&#33021;&#29992;&#23383;&#38754;&#20540;&#21021;&#22987;&#21270;&#19968;&#20010;&#38750;&#24120;&#37327;&#24341;&#29992;</span>

<span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">&#23558;&#21516;&#26679;&#30340;&#21021;&#22987;&#21270;&#35268;&#21017;&#24212;&#29992;&#21040;&#21442;&#25968;&#20256;&#36882;&#19978;&#21487;&#24471;</span>
<span style="color: #18b2b2;">int</span> <span style="color: #ff8700;">i</span> = 0;
<span style="color: #00af00;">const</span> <span style="color: #18b2b2;">int</span> <span style="color: #ff8700;">ci</span> = i;
<span style="color: #1f5bff;">string</span>::<span style="color: #18b2b2;">size_type</span> <span style="color: #ff8700;">ctr</span> = 0;
reset<span style="color: #cc0000; font-weight: bold;">(</span>&amp;i<span style="color: #cc0000; font-weight: bold;">)</span>;            <span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">&#35843;&#29992;&#24418;&#21442;&#31867;&#22411;&#26159; int* &#30340; reset &#20989;&#25968;</span>
reset<span style="color: #cc0000; font-weight: bold;">(</span>&amp;ci<span style="color: #cc0000; font-weight: bold;">)</span>;           <span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">&#38169;&#35823;&#65306;&#19981;&#33021;&#29992;&#25351;&#21521; const int &#23545;&#35937;&#30340;&#25351;&#38024;&#21021;&#22987;&#21270; int*</span>
reset<span style="color: #cc0000; font-weight: bold;">(</span>i<span style="color: #cc0000; font-weight: bold;">)</span>;             <span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">&#35843;&#29992;&#24418;&#21442;&#31867;&#22411;&#26159; int&amp; &#30340; reset &#20989;&#25968;</span>
reset<span style="color: #cc0000; font-weight: bold;">(</span>ci<span style="color: #cc0000; font-weight: bold;">)</span>;            <span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">&#38169;&#35823;&#65306;&#19981;&#33021;&#25226;&#26222;&#36890;&#24341;&#29992;&#32465;&#23450;&#21040; const &#23545;&#35937; ci &#19978;</span>
reset<span style="color: #cc0000; font-weight: bold;">(</span>42<span style="color: #cc0000; font-weight: bold;">)</span>;            <span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">&#38169;&#35823;&#65306;&#19981;&#33021;&#25226;&#26222;&#36890;&#21464;&#37327;&#32465;&#23450;&#21040;&#23383;&#38754;&#20540;&#19978;</span>
reset<span style="color: #cc0000; font-weight: bold;">(</span>ctr<span style="color: #cc0000; font-weight: bold;">)</span>;           <span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">&#38169;&#35823;&#65306;&#31867;&#22411;&#19981;&#21305;&#37197;&#65292;ctr &#26159;&#26080;&#31526;&#21495;&#31867;&#22411;</span>
</pre>
</div>

<p>
函数形参应尽量使用常量引用，一方面会给调用者一种误导，即函数可以修改它的实参值。
此外，使用引用而非常量引用也会极大地限制函数所能接受的实参类型。
</p>

<div class="org-src-container">
<pre class="src src-C++"><span style="color: #1f5bff;">string</span>::<span style="color: #18b2b2;">size_type</span> <span style="color: #ef2929;">find_char</span><span style="color: #cc0000; font-weight: bold;">(</span><span style="color: #18b2b2;">string</span> &amp;<span style="color: #ff8700;">s</span>, <span style="color: #18b2b2;">char</span> <span style="color: #ff8700;">c</span>,
                            <span style="color: #1f5bff;">string</span>::<span style="color: #18b2b2;">size_type</span> &amp;<span style="color: #ff8700;">occurs</span><span style="color: #cc0000; font-weight: bold;">)</span>;

<span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">find_char &#20989;&#25968;&#21482;&#33021;&#20316;&#29992;&#20110; string &#23545;&#35937;&#65292;&#20256;&#20837;&#23383;&#38754;&#20540;&#24120;&#37327;&#20250;&#21457;&#29983;&#38169;&#35823;</span>
find_char<span style="color: #cc0000; font-weight: bold;">(</span><span style="color: #ff1f8b;">"Hello, world!"</span>, <span style="color: #ff1f8b;">'o'</span>, ctr<span style="color: #cc0000; font-weight: bold;">)</span>;
</pre>
</div>

<p>
判断 string 对象中是否含有大写字母
</p>

<div class="org-src-container">
<pre class="src src-C++"><span style="color: #00af00;">using</span> <span style="color: #00af00;">namespace</span> <span style="color: #1f5bff;">std</span>;

<span style="color: #18b2b2;">bool</span> <span style="color: #ef2929;">if_string_upper</span><span style="color: #cc0000; font-weight: bold;">(</span><span style="color: #00af00;">const</span> <span style="color: #18b2b2;">string</span> &amp;<span style="color: #ff8700;">s</span><span style="color: #cc0000; font-weight: bold;">)</span> <span style="color: #cc0000; font-weight: bold;">{</span>
  <span style="color: #00af00;">for</span> <span style="color: #1f5bff; font-weight: bold;">(</span><span style="color: #00af00;">const</span> <span style="color: #00af00;">auto</span> &amp;<span style="color: #ff8700;">c</span> : s<span style="color: #1f5bff; font-weight: bold;">)</span> <span style="color: #1f5bff; font-weight: bold;">{</span>
    <span style="color: #00af00;">if</span> <span style="color: #00af00; font-weight: bold;">(</span>isupper<span style="color: #ff4ea3; font-weight: bold;">(</span>c<span style="color: #ff4ea3; font-weight: bold;">)</span><span style="color: #00af00; font-weight: bold;">)</span>
      <span style="color: #00af00;">return</span> <span style="color: #1f5bff;">true</span>;
  <span style="color: #1f5bff; font-weight: bold;">}</span>
  <span style="color: #00af00;">return</span> <span style="color: #1f5bff;">false</span>;
<span style="color: #cc0000; font-weight: bold;">}</span>

<span style="color: #18b2b2;">int</span> <span style="color: #ef2929;">main</span><span style="color: #cc0000; font-weight: bold;">(</span><span style="color: #18b2b2;">int</span> <span style="color: #ff8700;">argc</span>, <span style="color: #18b2b2;">char</span> *<span style="color: #ff8700;">argv</span><span style="color: #1f5bff; font-weight: bold;">[]</span><span style="color: #cc0000; font-weight: bold;">)</span>
<span style="color: #cc0000; font-weight: bold;">{</span>
  <span style="color: #00af00;">const</span> <span style="color: #18b2b2;">string</span> <span style="color: #ff8700;">s1</span><span style="color: #1f5bff; font-weight: bold;">(</span><span style="color: #ff1f8b;">"Hello, world!"</span><span style="color: #1f5bff; font-weight: bold;">)</span>; <span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">string &#24120;&#37327;&#23545;&#35937;&#20316;&#20026;&#21442;&#25968;&#21512;&#27861;</span>
  <span style="color: #18b2b2;">string</span> <span style="color: #ff8700;">s2</span><span style="color: #1f5bff; font-weight: bold;">(</span><span style="color: #ff1f8b;">"hello, code!"</span><span style="color: #1f5bff; font-weight: bold;">)</span>;        <span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">string &#26222;&#36890;&#23545;&#35937;&#20250;&#33258;&#21160;&#38544;&#34255;&#24418;&#21442;&#30340; const</span>
  <span style="color: #00af00;">const</span> <span style="color: #18b2b2;">char</span> *<span style="color: #ff8700;">s3</span><span style="color: #1f5bff; font-weight: bold;">(</span><span style="color: #ff1f8b;">"hello, c++!"</span><span style="color: #1f5bff; font-weight: bold;">)</span>;    <span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">char * &#24120;&#37327;&#25351;&#38024;&#20250;&#34987;&#36716;&#21270;&#20026; string &#23545;&#35937;</span>

  <span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">*&#27880;&#24847;* &lt;&lt; &#30340;&#20248;&#20808;&#32423;&#39640;&#20110; a? b: c &#36816;&#31639;&#65292;&#27492;&#22788;&#24517;&#39035;&#26377;&#25324;&#21495;</span>
  cout &lt;&lt; <span style="color: #1f5bff; font-weight: bold;">(</span>if_string_upper<span style="color: #00af00; font-weight: bold;">(</span>s1<span style="color: #00af00; font-weight: bold;">)</span>? <span style="color: #ff1f8b;">"Find"</span>: <span style="color: #ff1f8b;">"Not find"</span><span style="color: #1f5bff; font-weight: bold;">)</span>
       &lt;&lt; <span style="color: #ff1f8b;">" capital letters in "</span> &lt;&lt; s1 &lt;&lt; endl;
  cout &lt;&lt; <span style="color: #1f5bff; font-weight: bold;">(</span>if_string_upper<span style="color: #00af00; font-weight: bold;">(</span>s2<span style="color: #00af00; font-weight: bold;">)</span>? <span style="color: #ff1f8b;">"Find"</span>: <span style="color: #ff1f8b;">"Not find"</span><span style="color: #1f5bff; font-weight: bold;">)</span>
       &lt;&lt; <span style="color: #ff1f8b;">" capital letters in "</span> &lt;&lt; s2 &lt;&lt; endl;
  cout &lt;&lt; <span style="color: #1f5bff; font-weight: bold;">(</span>if_string_upper<span style="color: #00af00; font-weight: bold;">(</span>s3<span style="color: #00af00; font-weight: bold;">)</span>? <span style="color: #ff1f8b;">"Find"</span>: <span style="color: #ff1f8b;">"Not find"</span><span style="color: #1f5bff; font-weight: bold;">)</span>
       &lt;&lt; <span style="color: #ff1f8b;">" capital letters in "</span> &lt;&lt; s3 &lt;&lt; endl;
  <span style="color: #00af00;">return</span> 0;
<span style="color: #cc0000; font-weight: bold;">}</span>
</pre>
</div>

<pre class="example">
Find capital letters in Hello, world!
Not find capital letters in hello, code!
Not find capital letters in hello, c++!
</pre>
</div>
</div>

<div id="outline-container-orgf16616c" class="outline-4">
<h4 id="orgf16616c"><span class="section-number-4">6.1.3</span> 传递数组长度</h4>
<div class="outline-text-4" id="text-6-1-3">
<p>
数组无法以值传递的方式使用数组参数，因此实际传递的是首元素的指针
</p>

<div class="org-src-container">
<pre class="src src-C++"><span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">&#20197;&#19979;&#19977;&#31181;&#24418;&#24335;&#26159;&#30456;&#21516;&#30340;&#65292;&#27599;&#20010;&#20989;&#25968;&#25163;&#20013;&#26377;&#19968;&#20010; const int* &#31867;&#22411;&#30340;&#24418;&#21442;</span>
<span style="color: #18b2b2;">void</span> <span style="color: #ef2929;">print</span><span style="color: #cc0000; font-weight: bold;">(</span><span style="color: #00af00;">const</span> <span style="color: #18b2b2;">int</span>*<span style="color: #cc0000; font-weight: bold;">)</span>;
<span style="color: #18b2b2;">void</span> <span style="color: #ef2929;">print</span><span style="color: #cc0000; font-weight: bold;">(</span><span style="color: #00af00;">const</span> <span style="color: #18b2b2;">int</span><span style="color: #1f5bff; font-weight: bold;">[]</span><span style="color: #cc0000; font-weight: bold;">)</span>;
<span style="color: #18b2b2;">void</span> <span style="color: #ef2929;">print</span><span style="color: #cc0000; font-weight: bold;">(</span><span style="color: #00af00;">const</span> <span style="color: #18b2b2;">int</span><span style="color: #1f5bff; font-weight: bold;">[</span>10<span style="color: #1f5bff; font-weight: bold;">]</span><span style="color: #cc0000; font-weight: bold;">)</span>; <span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">&#27492;&#22788;&#30340;&#32500;&#24230;&#34920;&#31034;&#25105;&#20204;&#26399;&#26395;&#25968;&#32452;&#21547;&#26377;&#30340;&#20803;&#32032;&#20010;&#25968;&#65292;&#23454;&#38469;&#19981;&#19968;</span>
                           <span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">&#23450;</span>
</pre>
</div>

<p>
因数组是以指针的形式传递给函数的，因此函数无法知道数组长度的信息，有三种常用的技
术用于传递长度信息
</p>

<div class="org-src-container">
<pre class="src src-C++"><span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">&#31532;&#19968;&#31181;&#26159;&#35201;&#27714;&#25968;&#32452;&#26412;&#36523;&#21253;&#21547;&#19968;&#20010;&#32467;&#26463;&#26631;&#35760;</span>
<span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">&#26368;&#20856;&#22411;&#30340;&#23601;&#26159; C &#39118;&#26684;&#30340;&#23383;&#31526;&#20018;&#65292;&#20197;&#21450;&#21629;&#20196;&#34892;&#21442;&#25968;&#20256;&#20837;&#30340; argv</span>
<span style="color: #18b2b2;">void</span> <span style="color: #ef2929;">print</span><span style="color: #cc0000; font-weight: bold;">(</span><span style="color: #00af00;">const</span> <span style="color: #18b2b2;">char</span> *<span style="color: #ff8700;">cp</span><span style="color: #cc0000; font-weight: bold;">)</span> <span style="color: #cc0000; font-weight: bold;">{</span>
  <span style="color: #00af00;">if</span> <span style="color: #1f5bff; font-weight: bold;">(</span>cp<span style="color: #1f5bff; font-weight: bold;">)</span>
    <span style="color: #00af00;">while</span> <span style="color: #1f5bff; font-weight: bold;">(</span>*cp<span style="color: #1f5bff; font-weight: bold;">)</span>
      cout &lt;&lt; *cp++;
<span style="color: #cc0000; font-weight: bold;">}</span>

<span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">&#31532;&#20108;&#31181;&#26159;&#27169;&#20223;&#26631;&#20934;&#24211;&#35268;&#33539;&#65292;&#20256;&#36882;&#39318;&#23614;&#25351;&#38024;</span>
<span style="color: #18b2b2;">void</span> <span style="color: #ef2929;">print</span><span style="color: #cc0000; font-weight: bold;">(</span><span style="color: #00af00;">const</span> <span style="color: #18b2b2;">int</span> *<span style="color: #ff8700;">beg</span>, <span style="color: #00af00;">const</span> <span style="color: #18b2b2;">int</span> *<span style="color: #ff8700;">end</span><span style="color: #cc0000; font-weight: bold;">)</span> <span style="color: #cc0000; font-weight: bold;">{</span>
  <span style="color: #00af00;">while</span> <span style="color: #1f5bff; font-weight: bold;">(</span>beg != end<span style="color: #1f5bff; font-weight: bold;">)</span>
    cout &lt;&lt; *beg++ &lt;&lt; endl;
<span style="color: #cc0000; font-weight: bold;">}</span>

<span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">&#31532;&#19977;&#31181;&#26159;&#26174;&#24335;&#20256;&#36882;&#19968;&#20010;&#34920;&#31034;&#25968;&#32452;&#22823;&#23567;&#30340;&#24418;&#21442;&#65292;&#20063;&#26159; C &#39118;&#26684; API &#24120;&#29992;&#30340;&#26041;&#27861;</span>
<span style="color: #18b2b2;">void</span> <span style="color: #ef2929;">print</span><span style="color: #cc0000; font-weight: bold;">(</span><span style="color: #00af00;">const</span> <span style="color: #18b2b2;">int</span> <span style="color: #ff8700;">ia</span><span style="color: #1f5bff; font-weight: bold;">[]</span>, <span style="color: #18b2b2;">size_t</span> <span style="color: #ff8700;">size</span><span style="color: #cc0000; font-weight: bold;">)</span> <span style="color: #cc0000; font-weight: bold;">{</span>
  <span style="color: #00af00;">for</span> <span style="color: #1f5bff; font-weight: bold;">(</span><span style="color: #18b2b2;">size_t</span> <span style="color: #ff8700;">i</span> = 0; i != size; ++i<span style="color: #1f5bff; font-weight: bold;">)</span> <span style="color: #1f5bff; font-weight: bold;">{</span>
    cout &lt;&lt; ia<span style="color: #00af00; font-weight: bold;">[</span>i<span style="color: #00af00; font-weight: bold;">]</span> &lt;&lt; endl;
  <span style="color: #1f5bff; font-weight: bold;">}</span>
<span style="color: #cc0000; font-weight: bold;">}</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-orgff8d8e7" class="outline-4">
<h4 id="orgff8d8e7"><span class="section-number-4">6.1.4</span> 使用引用传递数组</h4>
<div class="outline-text-4" id="text-6-1-4">
<div class="org-src-container">
<pre class="src src-C++"><span style="color: #00af00;">using</span> <span style="color: #00af00;">namespace</span> <span style="color: #1f5bff;">std</span>;

<span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">&#25968;&#32452;&#24341;&#29992;&#24418;&#21442;&#38656;&#35201;&#26126;&#30830;&#22320;&#25351;&#20986;&#25968;&#32452;&#30340;&#38271;&#24230;&#65292;&#24182;&#19988;&#24517;&#39035;&#19982;&#20256;&#20837;&#30340;&#25968;&#32452;&#38271;&#24230;&#19968;&#33268;</span>
<span style="color: #18b2b2;">void</span> <span style="color: #ef2929;">print</span><span style="color: #cc0000; font-weight: bold;">(</span><span style="color: #18b2b2;">int</span> <span style="color: #1f5bff; font-weight: bold;">(</span>&amp;<span style="color: #ff8700;">arr</span><span style="color: #1f5bff; font-weight: bold;">)[</span>5<span style="color: #1f5bff; font-weight: bold;">]</span><span style="color: #cc0000; font-weight: bold;">)</span> <span style="color: #cc0000; font-weight: bold;">{</span>
  <span style="color: #00af00;">for</span> <span style="color: #1f5bff; font-weight: bold;">(</span><span style="color: #00af00;">auto</span> <span style="color: #ff8700;">ele</span>: arr<span style="color: #1f5bff; font-weight: bold;">)</span>
    cout &lt;&lt; ele &lt;&lt; <span style="color: #ff1f8b;">", "</span>;
<span style="color: #cc0000; font-weight: bold;">}</span>

<span style="color: #18b2b2;">int</span> <span style="color: #ef2929;">main</span><span style="color: #cc0000; font-weight: bold;">()</span> <span style="color: #cc0000; font-weight: bold;">{</span>
  <span style="color: #18b2b2;">int</span> <span style="color: #ff8700;">arr</span><span style="color: #1f5bff; font-weight: bold;">[</span>5<span style="color: #1f5bff; font-weight: bold;">]</span> = <span style="color: #1f5bff; font-weight: bold;">{</span>0, 1, 2, 3, 4<span style="color: #1f5bff; font-weight: bold;">}</span>;
  print<span style="color: #1f5bff; font-weight: bold;">(</span>arr<span style="color: #1f5bff; font-weight: bold;">)</span>;
  <span style="color: #00af00;">return</span> 0;
<span style="color: #cc0000; font-weight: bold;">}</span>
</pre>
</div>

<pre class="example">
0, 1, 2, 3, 4,
</pre>
</div>
</div>

<div id="outline-container-orgd266c04" class="outline-4">
<h4 id="orgd266c04"><span class="section-number-4">6.1.5</span> 可变长参数列表</h4>
<div class="outline-text-4" id="text-6-1-5">
<p>
C++ 11 新标准提供了两种主要的方法
</p>
<ul class="org-ul">
<li>如果所有实参的类型相同，可以使用一命名为 <code>initializer_list</code> 的标准库类型</li>
<li>如果实参的类型不同，可以编写可变参数模板</li>
</ul>

<p>
同时 C++ 提供了一个与 C 函数交互的接口 <code>...</code> 形参，猜测类似于 C 中的可变长参数宏。
此功能一般只用于与 C 函数交互，因为其对对象拷贝的支持不好
</p>

<div class="org-src-container">
<pre class="src src-C++"><span style="color: #18b2b2;">initializer_list</span><span style="color: #cc0000; font-weight: bold;">&lt;</span>T<span style="color: #cc0000; font-weight: bold;">&gt;</span> <span style="color: #ff8700;">lst</span>;             <span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">&#40664;&#35748;&#21021;&#22987;&#21270;</span>
<span style="color: #18b2b2;">initializer_list</span><span style="color: #cc0000; font-weight: bold;">&lt;</span>T<span style="color: #cc0000; font-weight: bold;">&gt;</span> <span style="color: #ff8700;">lst</span><span style="color: #cc0000; font-weight: bold;">{</span>a, b, c<span style="color: #ef2929;">...</span><span style="color: #cc0000; font-weight: bold;">}</span>; <span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">lst &#20013;&#30340;&#20803;&#32032;&#26159;&#23545;&#24212;&#21021;&#22987;&#20540;&#30340;&#21103;&#26412;&#65292;&#19988;&#20026; const</span>

lst2<span style="color: #cc0000; font-weight: bold;">(</span>lst<span style="color: #cc0000; font-weight: bold;">)</span>;      <span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">&#25335;&#36125;&#25110;&#36171;&#20540;&#19981;&#20250;&#25335;&#36125;&#20803;&#32032;&#65292;&#21363;&#27973;&#25335;&#36125;</span>
lst2 = lst;

lst.size<span style="color: #cc0000; font-weight: bold;">()</span>;
lst.begin<span style="color: #cc0000; font-weight: bold;">()</span>;
lst.end<span style="color: #cc0000; font-weight: bold;">()</span>;
</pre>
</div>

<div class="org-src-container">
<pre class="src src-C++"><span style="color: #00af00;">using</span> <span style="color: #00af00;">namespace</span> <span style="color: #1f5bff;">std</span>;

<span style="color: #18b2b2;">void</span> <span style="color: #ef2929;">error_msg</span><span style="color: #cc0000; font-weight: bold;">(</span><span style="color: #18b2b2;">error_code</span> <span style="color: #ff8700;">e</span>, <span style="color: #18b2b2;">initializer_list</span><span style="color: #1f5bff; font-weight: bold;">&lt;</span><span style="color: #18b2b2;">string</span><span style="color: #1f5bff; font-weight: bold;">&gt;</span> <span style="color: #ff8700;">ls</span><span style="color: #cc0000; font-weight: bold;">)</span> <span style="color: #cc0000; font-weight: bold;">{</span>
  cout &lt;&lt; e.message<span style="color: #1f5bff; font-weight: bold;">()</span> &lt;&lt; <span style="color: #ff1f8b;">": "</span>;
  <span style="color: #00af00;">for</span> <span style="color: #1f5bff; font-weight: bold;">(</span><span style="color: #00af00;">auto</span> <span style="color: #ff8700;">beg</span> = ls.begin<span style="color: #00af00; font-weight: bold;">()</span>; beg != ls.end<span style="color: #00af00; font-weight: bold;">()</span>; ++beg<span style="color: #1f5bff; font-weight: bold;">)</span>
    cout &lt;&lt; *beg &lt;&lt; <span style="color: #ff1f8b;">" "</span>;
<span style="color: #cc0000; font-weight: bold;">}</span>

<span style="color: #18b2b2;">int</span> <span style="color: #ef2929;">main</span><span style="color: #cc0000; font-weight: bold;">()</span> <span style="color: #cc0000; font-weight: bold;">{</span>
  <span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">&#29992;&#23454;&#21442;&#21021;&#22987;&#21270;&#24418;&#21442;</span>
  error_msg<span style="color: #1f5bff; font-weight: bold;">(</span>error_code<span style="color: #00af00; font-weight: bold;">()</span>, <span style="color: #00af00; font-weight: bold;">{</span><span style="color: #ff1f8b;">"Hello"</span>, <span style="color: #ff1f8b;">"world,"</span>, <span style="color: #ff1f8b;">"hello"</span>, <span style="color: #ff1f8b;">"C++!"</span><span style="color: #00af00; font-weight: bold;">}</span><span style="color: #1f5bff; font-weight: bold;">)</span>;
  <span style="color: #00af00;">return</span> 0;
<span style="color: #cc0000; font-weight: bold;">}</span>
</pre>
</div>

<pre class="example">
Success: Hello world, hello C++!
</pre>


<p>
省略符形参只能出现在形参列表的最后一个位置，无外乎两种形式
</p>

<div class="org-src-container">
<pre class="src src-C++"><span style="color: #18b2b2;">void</span> <span style="color: #ff8700;">foo</span><span style="color: #cc0000; font-weight: bold;">(</span>param_list, <span style="color: #ef2929;">...</span><span style="color: #cc0000; font-weight: bold;">)</span>;
<span style="color: #18b2b2;">void</span> <span style="color: #ff8700;">foo</span><span style="color: #cc0000; font-weight: bold;">(</span><span style="color: #ef2929;">...</span><span style="color: #cc0000; font-weight: bold;">)</span>;
</pre>
</div>
</div>
</div>
<div id="outline-container-org77d9457" class="outline-4">
<h4 id="org77d9457"><span class="section-number-4">6.1.6</span> 函数返回值</h4>
<div class="outline-text-4" id="text-6-1-6">
<p>
返回值与与形参传递的方式完全一样，但一定注意变量的生命周期。 <b>不要返回局部对象的
引用或指针，在函数返回时，栈上的局部对象也会析构</b>
</p>

<div class="org-src-container">
<pre class="src src-C++"><span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">&#35813;&#20989;&#25968;&#20005;&#37325;&#38169;&#35823;</span>
<span style="color: #00af00;">const</span> <span style="color: #18b2b2;">string</span> &amp;<span style="color: #ef2929;">foo</span><span style="color: #cc0000; font-weight: bold;">()</span> <span style="color: #cc0000; font-weight: bold;">{</span>
  <span style="color: #18b2b2;">string</span> <span style="color: #ff8700;">ret</span>;

  <span style="color: #00af00;">if</span> <span style="color: #1f5bff; font-weight: bold;">(</span><span style="color: #cc0000;">!</span>ret.empty<span style="color: #00af00; font-weight: bold;">()</span><span style="color: #1f5bff; font-weight: bold;">)</span>
    <span style="color: #00af00;">return</span> ret;     <span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">&#38169;&#35823;&#65306;&#35797;&#22270;&#36820;&#22238;&#23616;&#37096;&#21464;&#37327;&#30340;&#24341;&#29992;</span>
  <span style="color: #00af00;">else</span>
    <span style="color: #00af00;">return</span> <span style="color: #ff1f8b;">"Empty"</span>; <span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">&#38169;&#35823;&#65306;&#23383;&#38754;&#20540;&#20250;&#34987;&#33258;&#21160;&#36716;&#25442;&#20026;&#19968;&#20010;&#23616;&#37096;&#20020;&#26102; string &#23545;&#35937;</span>
<span style="color: #cc0000; font-weight: bold;">}</span>
</pre>
</div>

<p>
函数的返回类型决定函数调用是否是左值，调用一个返回引用的函数得到左值，其它返回类
型得到右值。
</p>

<div class="org-src-container">
<pre class="src src-C++"><span style="color: #00af00;">using</span> <span style="color: #00af00;">namespace</span> <span style="color: #1f5bff;">std</span>;

<span style="color: #18b2b2;">char</span> &amp;<span style="color: #ef2929;">get_char</span><span style="color: #cc0000; font-weight: bold;">(</span><span style="color: #18b2b2;">string</span> &amp;<span style="color: #ff8700;">str</span>, <span style="color: #1f5bff;">string</span>::<span style="color: #18b2b2;">size_type</span> <span style="color: #ff8700;">ix</span><span style="color: #cc0000; font-weight: bold;">)</span> <span style="color: #cc0000; font-weight: bold;">{</span>
  <span style="color: #00af00;">return</span> str<span style="color: #1f5bff; font-weight: bold;">[</span>ix<span style="color: #1f5bff; font-weight: bold;">]</span>;
<span style="color: #cc0000; font-weight: bold;">}</span>

<span style="color: #18b2b2;">int</span> <span style="color: #ef2929;">main</span><span style="color: #cc0000; font-weight: bold;">()</span> <span style="color: #cc0000; font-weight: bold;">{</span>
  <span style="color: #18b2b2;">string</span> <span style="color: #ff8700;">s</span><span style="color: #1f5bff; font-weight: bold;">(</span><span style="color: #ff1f8b;">"Hello, world!"</span><span style="color: #1f5bff; font-weight: bold;">)</span>;
  cout &lt;&lt; s &lt;&lt; endl;
  get_char<span style="color: #1f5bff; font-weight: bold;">(</span>s, 0<span style="color: #1f5bff; font-weight: bold;">)</span> = <span style="color: #ff1f8b;">'h'</span>;
  cout &lt;&lt; s &lt;&lt; endl;
<span style="color: #cc0000; font-weight: bold;">}</span>
</pre>
</div>

<pre class="example">
Hello, world!
hello, world!
</pre>


<p>
C++ 新标准规定，函数可以返回花括号包围的列表
</p>

<div class="org-src-container">
<pre class="src src-C++"><span style="color: #00af00;">using</span> <span style="color: #00af00;">namespace</span> <span style="color: #1f5bff;">std</span>;

<span style="color: #18b2b2;">string</span> <span style="color: #ef2929;">join</span><span style="color: #cc0000; font-weight: bold;">(</span><span style="color: #00af00;">const</span> <span style="color: #18b2b2;">vector</span><span style="color: #1f5bff; font-weight: bold;">&lt;</span><span style="color: #18b2b2;">string</span><span style="color: #1f5bff; font-weight: bold;">&gt;</span> &amp;<span style="color: #ff8700;">list</span><span style="color: #cc0000; font-weight: bold;">)</span> <span style="color: #cc0000; font-weight: bold;">{</span>
  <span style="color: #18b2b2;">string</span> <span style="color: #ff8700;">ret</span>;
  <span style="color: #00af00;">for</span> <span style="color: #1f5bff; font-weight: bold;">(</span><span style="color: #00af00;">auto</span> <span style="color: #ff8700;">s</span> = list.begin<span style="color: #00af00; font-weight: bold;">()</span>; s != list.end<span style="color: #00af00; font-weight: bold;">()</span>; ++s<span style="color: #1f5bff; font-weight: bold;">)</span>
    ret += <span style="color: #ff1f8b;">" "</span> + *s + <span style="color: #ff1f8b;">" "</span>;
  <span style="color: #00af00;">return</span> ret;
<span style="color: #cc0000; font-weight: bold;">}</span>

<span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">&#27492;&#22788;&#19981;&#20351;&#29992;&#24341;&#29992;&#26159;&#20026;&#20102;&#20063;&#33021;&#20256;&#36882;&#23383;&#31526;&#20018;&#23383;&#38754;&#20540;&#65292;&#24182;&#33258;&#21160;&#36716;&#25442;&#20026; string &#23545;&#35937;</span>
<span style="color: #18b2b2;">vector</span><span style="color: #cc0000; font-weight: bold;">&lt;</span><span style="color: #18b2b2;">string</span><span style="color: #cc0000; font-weight: bold;">&gt;</span> <span style="color: #ef2929;">process</span><span style="color: #cc0000; font-weight: bold;">(</span><span style="color: #00af00;">const</span> <span style="color: #18b2b2;">string</span> <span style="color: #ff8700;">s</span><span style="color: #cc0000; font-weight: bold;">)</span> <span style="color: #cc0000; font-weight: bold;">{</span>
  <span style="color: #00af00;">return</span> <span style="color: #1f5bff; font-weight: bold;">{</span><span style="color: #ff1f8b;">"String"</span>, <span style="color: #ff1f8b;">"is"</span>, s.empty<span style="color: #00af00; font-weight: bold;">()</span>? <span style="color: #ff1f8b;">"empty"</span>: s<span style="color: #1f5bff; font-weight: bold;">}</span>;
<span style="color: #cc0000; font-weight: bold;">}</span>

<span style="color: #18b2b2;">int</span> <span style="color: #ef2929;">main</span><span style="color: #cc0000; font-weight: bold;">()</span> <span style="color: #cc0000; font-weight: bold;">{</span>
  <span style="color: #18b2b2;">vector</span><span style="color: #1f5bff; font-weight: bold;">&lt;</span><span style="color: #18b2b2;">string</span><span style="color: #1f5bff; font-weight: bold;">&gt;</span> <span style="color: #ff8700;">a</span>, <span style="color: #ff8700;">b</span>;
  a = process<span style="color: #1f5bff; font-weight: bold;">(</span><span style="color: #ff1f8b;">""</span><span style="color: #1f5bff; font-weight: bold;">)</span>;
  b = process<span style="color: #1f5bff; font-weight: bold;">(</span><span style="color: #ff1f8b;">"Something"</span><span style="color: #1f5bff; font-weight: bold;">)</span>;

  cout &lt;&lt; join<span style="color: #1f5bff; font-weight: bold;">(</span>a<span style="color: #1f5bff; font-weight: bold;">)</span> &lt;&lt; endl;
  cout &lt;&lt; join<span style="color: #1f5bff; font-weight: bold;">(</span>b<span style="color: #1f5bff; font-weight: bold;">)</span> &lt;&lt; endl;
<span style="color: #cc0000; font-weight: bold;">}</span>
</pre>
</div>

<pre class="example">
String  is  empty 
String  is  Something
</pre>
</div>
</div>
<div id="outline-container-org9fb09b1" class="outline-4">
<h4 id="org9fb09b1"><span class="section-number-4">6.1.7</span> 返回数组指针</h4>
<div class="outline-text-4" id="text-6-1-7">
<p>
返回指向长度为 10 的 int 型数组的指针
</p>

<div class="org-src-container">
<pre class="src src-C++"><span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">C &#39118;&#26684;&#30340;&#20889;&#27861;&#20026;</span>
<span style="color: #18b2b2;">int</span> <span style="color: #cc0000; font-weight: bold;">(</span>*<span style="color: #ff8700;">func</span><span style="color: #1f5bff; font-weight: bold;">(</span><span style="color: #18b2b2;">int</span> i<span style="color: #1f5bff; font-weight: bold;">)</span><span style="color: #cc0000; font-weight: bold;">)[</span>10<span style="color: #cc0000; font-weight: bold;">]</span>;

<span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">&#20063;&#21487;&#20197;&#20351;&#29992;&#21035;&#21517;&#31616;&#21270;</span>
<span style="color: #00af00;">typedef</span> <span style="color: #18b2b2;">int</span> <span style="color: #18b2b2;">arrT</span><span style="color: #cc0000; font-weight: bold;">[</span>10<span style="color: #cc0000; font-weight: bold;">]</span>;
<span style="color: #18b2b2;">arrT</span> *<span style="color: #ef2929;">func</span><span style="color: #cc0000; font-weight: bold;">(</span><span style="color: #18b2b2;">int</span> <span style="color: #ff8700;">i</span><span style="color: #cc0000; font-weight: bold;">)</span>;

<span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">&#20351;&#29992; using&#65292;&#19982; typedef &#31561;&#20215;</span>
<span style="color: #00af00;">using</span> <span style="color: #18b2b2;">arrT</span> = <span style="color: #18b2b2;">int</span><span style="color: #cc0000; font-weight: bold;">[</span>10<span style="color: #cc0000; font-weight: bold;">]</span>;
<span style="color: #18b2b2;">arrT</span> *<span style="color: #ef2929;">func</span><span style="color: #cc0000; font-weight: bold;">(</span><span style="color: #18b2b2;">int</span> <span style="color: #ff8700;">i</span><span style="color: #cc0000; font-weight: bold;">)</span>;

<span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">C++ 11 &#26032;&#26631;&#20934;&#20013;&#21487;&#20197;&#20351;&#29992;&#23614;&#32622;&#36820;&#22238;&#31867;&#22411;</span>
<span style="color: #00af00;">auto</span> <span style="color: #ef2929;">func</span><span style="color: #cc0000; font-weight: bold;">(</span><span style="color: #18b2b2;">int</span> <span style="color: #ff8700;">i</span><span style="color: #cc0000; font-weight: bold;">)</span> -&gt; <span style="color: #18b2b2;">int</span><span style="color: #cc0000; font-weight: bold;">(</span>*<span style="color: #cc0000; font-weight: bold;">)[</span>10<span style="color: #cc0000; font-weight: bold;">]</span>;

<span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">&#20351;&#29992; decltype</span>
<span style="color: #18b2b2;">int</span> <span style="color: #ff8700;">odd</span><span style="color: #cc0000; font-weight: bold;">[]</span> = <span style="color: #cc0000; font-weight: bold;">{</span>1, 3, 5, 7, 9<span style="color: #cc0000; font-weight: bold;">}</span>;
<span style="color: #18b2b2;">int</span> <span style="color: #ff8700;">even</span><span style="color: #cc0000; font-weight: bold;">[]</span> = <span style="color: #cc0000; font-weight: bold;">{</span>0, 2, 4, 6, 8<span style="color: #cc0000; font-weight: bold;">}</span>;
<span style="color: #00af00;">decltype</span><span style="color: #cc0000; font-weight: bold;">(</span>odd<span style="color: #cc0000; font-weight: bold;">)</span> *<span style="color: #ef2929;">arrPtr</span><span style="color: #cc0000; font-weight: bold;">(</span><span style="color: #18b2b2;">int</span> <span style="color: #ff8700;">i</span><span style="color: #cc0000; font-weight: bold;">)</span> <span style="color: #cc0000; font-weight: bold;">{</span>
  <span style="color: #00af00;">return</span> <span style="color: #1f5bff; font-weight: bold;">(</span>i % 2<span style="color: #1f5bff; font-weight: bold;">)</span> ? &amp;odd: &amp;even;
<span style="color: #cc0000; font-weight: bold;">}</span>
</pre>
</div>

<p>
使用尾置返回类型定义函数的一个 demo
</p>

<div class="org-src-container">
<pre class="src src-C++"><span style="color: #00af00;">using</span> <span style="color: #00af00;">namespace</span> <span style="color: #1f5bff;">std</span>;

<span style="color: #00af00;">auto</span> <span style="color: #ef2929;">mul2</span><span style="color: #cc0000; font-weight: bold;">(</span><span style="color: #18b2b2;">int</span> <span style="color: #1f5bff; font-weight: bold;">(</span>&amp;<span style="color: #ff8700;">arr</span><span style="color: #1f5bff; font-weight: bold;">)[</span>5<span style="color: #1f5bff; font-weight: bold;">]</span><span style="color: #cc0000; font-weight: bold;">)</span> -&gt; <span style="color: #18b2b2;">int</span> <span style="color: #cc0000; font-weight: bold;">(</span>*<span style="color: #cc0000; font-weight: bold;">)[</span>5<span style="color: #cc0000; font-weight: bold;">]</span> <span style="color: #cc0000; font-weight: bold;">{</span>
  <span style="color: #00af00;">for</span> <span style="color: #1f5bff; font-weight: bold;">(</span><span style="color: #18b2b2;">int</span> &amp;<span style="color: #ff8700;">ele</span>: arr<span style="color: #1f5bff; font-weight: bold;">)</span>
    ele *= 2;
  <span style="color: #00af00;">return</span> &amp;arr;
<span style="color: #cc0000; font-weight: bold;">}</span>

<span style="color: #18b2b2;">void</span> <span style="color: #ef2929;">print</span><span style="color: #cc0000; font-weight: bold;">(</span><span style="color: #00af00;">const</span> <span style="color: #18b2b2;">int</span> <span style="color: #1f5bff; font-weight: bold;">(</span>*<span style="color: #ff8700;">arr</span><span style="color: #1f5bff; font-weight: bold;">)[</span>5<span style="color: #1f5bff; font-weight: bold;">]</span><span style="color: #cc0000; font-weight: bold;">)</span> <span style="color: #cc0000; font-weight: bold;">{</span>
  <span style="color: #00af00;">for</span> <span style="color: #1f5bff; font-weight: bold;">(</span><span style="color: #00af00;">const</span> <span style="color: #18b2b2;">int</span> &amp;<span style="color: #ff8700;">ele</span>: *arr<span style="color: #1f5bff; font-weight: bold;">)</span>
    cout &lt;&lt; ele &lt;&lt; <span style="color: #ff1f8b;">", "</span>;
<span style="color: #cc0000; font-weight: bold;">}</span>

<span style="color: #18b2b2;">int</span> <span style="color: #ef2929;">main</span><span style="color: #cc0000; font-weight: bold;">()</span> <span style="color: #cc0000; font-weight: bold;">{</span>
  <span style="color: #18b2b2;">int</span> <span style="color: #ff8700;">arr</span><span style="color: #1f5bff; font-weight: bold;">[</span>5<span style="color: #1f5bff; font-weight: bold;">]</span> = <span style="color: #1f5bff; font-weight: bold;">{</span>0, 1, 2, 3, 4<span style="color: #1f5bff; font-weight: bold;">}</span>;
  print<span style="color: #1f5bff; font-weight: bold;">(</span>mul2<span style="color: #00af00; font-weight: bold;">(</span>arr<span style="color: #00af00; font-weight: bold;">)</span><span style="color: #1f5bff; font-weight: bold;">)</span>;
<span style="color: #cc0000; font-weight: bold;">}</span>
</pre>
</div>

<pre class="example">
0, 2, 4, 6, 8,
</pre>
</div>
</div>
</div>

<div id="outline-container-orge7fb966" class="outline-3">
<h3 id="orge7fb966"><span class="section-number-3">6.2</span> 函数重载</h3>
<div class="outline-text-3" id="text-6-2">
<p>
如果同一作用域内的几个函数名字相同但形参列表不同，我们称之为重载（overloaded）函
数。
</p>

<div class="org-src-container">
<pre class="src src-C++"><span style="color: #18b2b2;">void</span> <span style="color: #ef2929;">print</span><span style="color: #cc0000; font-weight: bold;">(</span><span style="color: #00af00;">const</span> <span style="color: #18b2b2;">char</span> *<span style="color: #ff8700;">cp</span><span style="color: #cc0000; font-weight: bold;">)</span>;
<span style="color: #18b2b2;">void</span> <span style="color: #ef2929;">print</span><span style="color: #cc0000; font-weight: bold;">(</span><span style="color: #00af00;">const</span> <span style="color: #18b2b2;">char</span> *<span style="color: #ff8700;">beg</span>, <span style="color: #00af00;">const</span> <span style="color: #18b2b2;">char</span> *<span style="color: #ff8700;">end</span><span style="color: #cc0000; font-weight: bold;">)</span>;
<span style="color: #18b2b2;">void</span> <span style="color: #ef2929;">print</span><span style="color: #cc0000; font-weight: bold;">(</span><span style="color: #00af00;">const</span> <span style="color: #18b2b2;">int</span> *<span style="color: #ff8700;">beg</span>, <span style="color: #00af00;">const</span> <span style="color: #18b2b2;">int</span> *<span style="color: #ff8700;">end</span><span style="color: #cc0000; font-weight: bold;">)</span>;

<span style="color: #00af00;">const</span> <span style="color: #18b2b2;">char</span> *<span style="color: #ff8700;">s</span> = <span style="color: #ff1f8b;">"Hello, world!"</span>;
<span style="color: #18b2b2;">int</span> <span style="color: #ff8700;">j</span><span style="color: #cc0000; font-weight: bold;">[]</span> = <span style="color: #cc0000; font-weight: bold;">{</span>0, 1, 2, 3, 4<span style="color: #cc0000; font-weight: bold;">}</span>;

print<span style="color: #cc0000; font-weight: bold;">(</span>s<span style="color: #cc0000; font-weight: bold;">)</span>;
print<span style="color: #cc0000; font-weight: bold;">(</span>s, s + 5<span style="color: #cc0000; font-weight: bold;">)</span>;
print<span style="color: #cc0000; font-weight: bold;">(</span>begin<span style="color: #1f5bff; font-weight: bold;">(</span>j<span style="color: #1f5bff; font-weight: bold;">)</span>, end<span style="color: #1f5bff; font-weight: bold;">(</span>j<span style="color: #1f5bff; font-weight: bold;">)</span><span style="color: #cc0000; font-weight: bold;">)</span>;
</pre>
</div>

<p>
不允许定义两个参数完全相同但返回值不同的函数
</p>

<div class="org-src-container">
<pre class="src src-C++"><span style="color: #18b2b2;">Record</span> *<span style="color: #ef2929;">lookup</span><span style="color: #cc0000; font-weight: bold;">(</span><span style="color: #00af00;">const</span> <span style="color: #18b2b2;">Account</span>&amp;<span style="color: #cc0000; font-weight: bold;">)</span>;
<span style="color: #18b2b2;">bool</span> <span style="color: #ef2929;">lookup</span><span style="color: #cc0000; font-weight: bold;">(</span><span style="color: #00af00;">const</span> <span style="color: #18b2b2;">Account</span>&amp;<span style="color: #cc0000; font-weight: bold;">)</span>;    <span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">&#38169;&#35823;</span>
</pre>
</div>

<p>
顶层 <code>const</code> 不影响传入函数的对象，因此一个拥有顶层 <code>const</code> 的形参无法与另一个没有顶
层 <code>const</code> 形参的函数区分开来
</p>

<div class="org-src-container">
<pre class="src src-C++"><span style="color: #18b2b2;">Record</span> *<span style="color: #ef2929;">lookup</span><span style="color: #cc0000; font-weight: bold;">(</span>Account<span style="color: #cc0000; font-weight: bold;">)</span>;
<span style="color: #18b2b2;">Record</span> *<span style="color: #ef2929;">lookup</span><span style="color: #cc0000; font-weight: bold;">(</span><span style="color: #00af00;">const</span> <span style="color: #18b2b2;">Account</span><span style="color: #cc0000; font-weight: bold;">)</span>;  <span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">&#37325;&#22797;&#22768;&#26126;</span>

<span style="color: #18b2b2;">Record</span> *<span style="color: #ef2929;">lookup</span><span style="color: #cc0000; font-weight: bold;">(</span><span style="color: #18b2b2;">Account</span>*<span style="color: #cc0000; font-weight: bold;">)</span>;
<span style="color: #18b2b2;">Record</span> *<span style="color: #ef2929;">lookup</span><span style="color: #cc0000; font-weight: bold;">(</span><span style="color: #18b2b2;">Account</span>* <span style="color: #00af00;">const</span><span style="color: #cc0000; font-weight: bold;">)</span>;  <span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">&#37325;&#22797;&#22768;&#26126;</span>
</pre>
</div>

<p>
如果形参是某种类型的指针或引用，则通过区分其指向的是常量对象还是非常量对象可以实
现函数重载，此时的 <code>const</code> 是底层的
</p>

<div class="org-src-container">
<pre class="src src-C++"><span style="color: #18b2b2;">Record</span> *<span style="color: #ef2929;">lookup</span><span style="color: #cc0000; font-weight: bold;">(</span><span style="color: #18b2b2;">Account</span>&amp;<span style="color: #cc0000; font-weight: bold;">)</span>;
<span style="color: #18b2b2;">Record</span> *<span style="color: #ef2929;">lookup</span><span style="color: #cc0000; font-weight: bold;">(</span><span style="color: #00af00;">const</span> <span style="color: #18b2b2;">Account</span>&amp;<span style="color: #cc0000; font-weight: bold;">)</span>;  <span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">&#26032;&#20989;&#25968;&#65292;&#20316;&#29992;&#20110;&#24120;&#37327;&#24341;&#29992;</span>

<span style="color: #18b2b2;">Record</span> *<span style="color: #ef2929;">lookup</span><span style="color: #cc0000; font-weight: bold;">(</span><span style="color: #18b2b2;">Account</span>*<span style="color: #cc0000; font-weight: bold;">)</span>;
<span style="color: #18b2b2;">Record</span> *<span style="color: #ef2929;">lookup</span><span style="color: #cc0000; font-weight: bold;">(</span><span style="color: #00af00;">const</span> <span style="color: #18b2b2;">Account</span>*<span style="color: #cc0000; font-weight: bold;">)</span>;  <span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">&#26032;&#20989;&#25968;&#65292;&#20316;&#29992;&#20110;&#24120;&#37327;&#25351;&#38024;</span>
</pre>
</div>

<p>
因为 <code>const</code> 不能转换成其它类型，所以只能把 <code>const</code> 对象（或指向 <code>const</code> 的指针）传递
给 <code>const</code> 形参。相反的，非常量可以转换成 <code>const</code> ，所以上面的四个函数都能作用于非常
量对象和指向非常量的指针
</p>
</div>

<div id="outline-container-org241b003" class="outline-4">
<h4 id="org241b003"><span class="section-number-4">6.2.1</span> <code>const_cast</code> 与重载</h4>
<div class="outline-text-4" id="text-6-2-1">
<p>
<code>const_cast</code> 在重载函数的情景中很有用
</p>

<div class="org-src-container">
<pre class="src src-C++"><span style="color: #00af00;">using</span> <span style="color: #00af00;">namespace</span> <span style="color: #1f5bff;">std</span>;

<span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">&#27604;&#36739;&#20004;&#20010; string &#23545;&#35937;&#30340;&#38271;&#24230;&#65292;&#24182;&#36820;&#22238;&#36739;&#30701;&#30340;&#37027;&#20010;&#24341;&#29992;</span>
<span style="color: #00af00;">const</span> <span style="color: #18b2b2;">string</span> &amp;<span style="color: #ef2929;">shorter_string</span><span style="color: #cc0000; font-weight: bold;">(</span><span style="color: #00af00;">const</span> <span style="color: #18b2b2;">string</span> &amp;<span style="color: #ff8700;">s1</span>, <span style="color: #00af00;">const</span> <span style="color: #18b2b2;">string</span> &amp;<span style="color: #ff8700;">s2</span><span style="color: #cc0000; font-weight: bold;">)</span> <span style="color: #cc0000; font-weight: bold;">{</span>
  <span style="color: #00af00;">return</span> s1.size<span style="color: #1f5bff; font-weight: bold;">()</span> &lt;= s2.size<span style="color: #1f5bff; font-weight: bold;">()</span>? s1: s2;
<span style="color: #cc0000; font-weight: bold;">}</span>

<span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">&#21033;&#29992; const_cast &#23450;&#20041;&#19968;&#20010;&#38750;&#24120;&#37327;&#30340;&#29256;&#26412;</span>
<span style="color: #18b2b2;">string</span> &amp;<span style="color: #ef2929;">shorter_string</span><span style="color: #cc0000; font-weight: bold;">(</span><span style="color: #18b2b2;">string</span> &amp;<span style="color: #ff8700;">s1</span>, <span style="color: #18b2b2;">string</span> &amp;<span style="color: #ff8700;">s2</span><span style="color: #cc0000; font-weight: bold;">)</span> <span style="color: #cc0000; font-weight: bold;">{</span>
  <span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">&#20808;&#23558; s1 &#21644; s2 &#36716;&#25442;&#20026; const string &#23545;&#35937;&#30340;&#24341;&#29992;</span>
  <span style="color: #00af00;">auto</span> &amp;<span style="color: #ff8700;">r</span> = shorter_string<span style="color: #1f5bff; font-weight: bold;">(</span><span style="color: #00af00;">const_cast</span><span style="color: #00af00; font-weight: bold;">&lt;</span><span style="color: #00af00;">const</span> <span style="color: #18b2b2;">string</span> &amp;<span style="color: #00af00; font-weight: bold;">&gt;(</span>s1<span style="color: #00af00; font-weight: bold;">)</span>,
                           <span style="color: #00af00;">const_cast</span><span style="color: #00af00; font-weight: bold;">&lt;</span><span style="color: #00af00;">const</span> <span style="color: #18b2b2;">string</span> &amp;<span style="color: #00af00; font-weight: bold;">&gt;(</span>s2<span style="color: #00af00; font-weight: bold;">)</span><span style="color: #1f5bff; font-weight: bold;">)</span>;
  <span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">&#23558;&#36820;&#22238;&#20540;&#37325;&#26032;&#36716;&#25442;&#20026; string &#23545;&#35937;&#30340;&#24341;&#29992;</span>
  <span style="color: #00af00;">return</span> <span style="color: #00af00;">const_cast</span><span style="color: #1f5bff; font-weight: bold;">&lt;</span><span style="color: #18b2b2;">string</span> &amp;<span style="color: #1f5bff; font-weight: bold;">&gt;(</span>r<span style="color: #1f5bff; font-weight: bold;">)</span>;
<span style="color: #cc0000; font-weight: bold;">}</span>

<span style="color: #18b2b2;">int</span> <span style="color: #ef2929;">main</span><span style="color: #cc0000; font-weight: bold;">()</span> <span style="color: #cc0000; font-weight: bold;">{</span>
  <span style="color: #18b2b2;">string</span> <span style="color: #ff8700;">s1</span><span style="color: #1f5bff; font-weight: bold;">(</span><span style="color: #ff1f8b;">"Hello, world!"</span><span style="color: #1f5bff; font-weight: bold;">)</span>;
  <span style="color: #18b2b2;">string</span> <span style="color: #ff8700;">s2</span><span style="color: #1f5bff; font-weight: bold;">(</span><span style="color: #ff1f8b;">"Hello, C++!"</span><span style="color: #1f5bff; font-weight: bold;">)</span>;
  <span style="color: #00af00;">const</span> <span style="color: #18b2b2;">string</span> <span style="color: #ff8700;">cs1</span><span style="color: #1f5bff; font-weight: bold;">(</span><span style="color: #ff1f8b;">"Evil world."</span><span style="color: #1f5bff; font-weight: bold;">)</span>;
  <span style="color: #00af00;">const</span> <span style="color: #18b2b2;">string</span> <span style="color: #ff8700;">cs2</span><span style="color: #1f5bff; font-weight: bold;">(</span><span style="color: #ff1f8b;">"Evil C++."</span><span style="color: #1f5bff; font-weight: bold;">)</span>;
  cout &lt;&lt; <span style="color: #ff1f8b;">"The shorter string is: "</span> &lt;&lt; shorter_string<span style="color: #1f5bff; font-weight: bold;">(</span>s1, s2<span style="color: #1f5bff; font-weight: bold;">)</span> &lt;&lt; <span style="color: #ff1f8b;">"\n"</span>;
  cout &lt;&lt; <span style="color: #ff1f8b;">"The shorter string is: "</span> &lt;&lt; shorter_string<span style="color: #1f5bff; font-weight: bold;">(</span>cs1, cs2<span style="color: #1f5bff; font-weight: bold;">)</span> &lt;&lt; <span style="color: #ff1f8b;">"\n"</span>;
<span style="color: #cc0000; font-weight: bold;">}</span>
</pre>
</div>

<pre class="example">
The shorter string is: Hello, C++!
The shorter string is: Evil C++.
</pre>
</div>
</div>
<div id="outline-container-orgaa9c79b" class="outline-4">
<h4 id="orgaa9c79b"><span class="section-number-4">6.2.2</span> 调用重载的函数</h4>
<div class="outline-text-4" id="text-6-2-2">
<p>
把函数调用与一组重载函数中的某一个关联起来的过程叫做函数匹配，也叫做重载确定。
</p>

<p>
调用重载函数时有三种可能的结果
</p>
<ul class="org-ul">
<li>编译器找到一个与实参最佳匹配的函数，并生成调用函数的代码</li>
<li>找不到任何一个函数与调用的实参匹配，此时编译器发出 <code>无匹配</code> 的错误信息</li>
<li>有多于一个函数可以匹配，但都不是明显的最佳匹配，此时也将发生错误称为 <code>二义性调用</code></li>
</ul>
</div>
</div>
<div id="outline-container-org1c0d2d6" class="outline-4">
<h4 id="org1c0d2d6"><span class="section-number-4">6.2.3</span> 重载与作用域</h4>
<div class="outline-text-4" id="text-6-2-3">
<p>
重载发生在同一作用域，不同作用域的同名函数会发生掩盖（Mask）
</p>

<div class="org-src-container">
<pre class="src src-C++"><span style="color: #00af00;">using</span> <span style="color: #00af00;">namespace</span> <span style="color: #1f5bff;">std</span>;

<span style="color: #18b2b2;">string</span> <span style="color: #ef2929;">read</span><span style="color: #cc0000; font-weight: bold;">()</span>;
<span style="color: #18b2b2;">void</span> <span style="color: #ef2929;">print</span><span style="color: #cc0000; font-weight: bold;">(</span><span style="color: #00af00;">const</span> <span style="color: #18b2b2;">string</span> &amp;<span style="color: #cc0000; font-weight: bold;">)</span>;
<span style="color: #18b2b2;">void</span> <span style="color: #ef2929;">print</span><span style="color: #cc0000; font-weight: bold;">(</span><span style="color: #18b2b2;">double</span><span style="color: #cc0000; font-weight: bold;">)</span>;     <span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">&#22312;&#21516;&#19968;&#20316;&#29992;&#22495;&#20013;&#37325;&#36733; print &#20989;&#25968;</span>

<span style="color: #18b2b2;">void</span> <span style="color: #ef2929;">foo</span><span style="color: #cc0000; font-weight: bold;">(</span><span style="color: #18b2b2;">int</span> <span style="color: #ff8700;">ival</span><span style="color: #cc0000; font-weight: bold;">)</span> <span style="color: #cc0000; font-weight: bold;">{</span>
  <span style="color: #18b2b2;">bool</span> <span style="color: #ff8700;">read</span> = <span style="color: #1f5bff;">false</span>;    <span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">&#26032;&#20316;&#29992;&#22495;&#65292;&#38544;&#34255;&#20102;&#22806;&#23618;&#30340; read</span>
  <span style="color: #18b2b2;">string</span> <span style="color: #ff8700;">s</span> = read<span style="color: #1f5bff; font-weight: bold;">()</span>;    <span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">&#38169;&#35823;&#65306;&#27492;&#20316;&#29992;&#22495;&#20013; read &#26159;&#19968;&#20010;&#24067;&#23572;&#20540;</span>
  <span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">&#19981;&#22909;&#30340;&#20064;&#24815;&#65306;&#36890;&#24120;&#26469;&#35828;&#65292;&#22312;&#23616;&#37096;&#20316;&#29992;&#22495;&#20013;&#22768;&#26126;&#20989;&#25968;&#19981;&#26159;&#19968;&#20010;&#22909;&#20064;&#24815;</span>
  <span style="color: #18b2b2;">void</span> <span style="color: #ff8700;">print</span><span style="color: #1f5bff; font-weight: bold;">(</span><span style="color: #18b2b2;">int</span><span style="color: #1f5bff; font-weight: bold;">)</span>;      <span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">&#26032;&#20316;&#29992;&#22495;&#65292;&#38544;&#34255;&#20102;&#20043;&#21069;&#30340; print</span>
  print<span style="color: #1f5bff; font-weight: bold;">(</span><span style="color: #ff1f8b;">"Value: "</span><span style="color: #1f5bff; font-weight: bold;">)</span>;     <span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">&#38169;&#35823;&#65306;void print(const string &amp;) &#34987;&#38544;&#34255;&#20102;</span>
  print<span style="color: #1f5bff; font-weight: bold;">(</span>ival<span style="color: #1f5bff; font-weight: bold;">)</span>;          <span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">&#27491;&#30830;&#65306;&#24403;&#21069; print(int) &#21487;&#35265;</span>
<span style="color: #cc0000; font-weight: bold;">}</span>
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-org9f3e710" class="outline-3">
<h3 id="org9f3e710"><span class="section-number-3">6.3</span> 默认实参</h3>
<div class="outline-text-3" id="text-6-3">
<div class="org-src-container">
<pre class="src src-C++"><span style="color: #00af00;">typedef</span> <span style="color: #1f5bff;">string</span>::<span style="color: #18b2b2;">size_type</span> <span style="color: #18b2b2;">sz</span>;
<span style="color: #18b2b2;">string</span> <span style="color: #ef2929;">screen</span><span style="color: #cc0000; font-weight: bold;">(</span><span style="color: #18b2b2;">sz</span> <span style="color: #ff8700;">h</span>= 24, <span style="color: #18b2b2;">sz</span> <span style="color: #ff8700;">w</span> = 80, <span style="color: #18b2b2;">char</span> <span style="color: #ff8700;">background</span> = <span style="color: #ff1f8b;">'+'</span><span style="color: #cc0000; font-weight: bold;">)</span>;
</pre>
</div>
</div>

<div id="outline-container-orgc71b657" class="outline-4">
<h4 id="orgc71b657"><span class="section-number-4">6.3.1</span> 使用默认实参调用函数</h4>
<div class="outline-text-4" id="text-6-3-1">
<div class="org-src-container">
<pre class="src src-C++"><span style="color: #b218b2;">#include</span> <span style="color: #cc0000; font-weight: bold;">&lt;</span><span style="color: #ff1f8b;">iostream</span><span style="color: #cc0000; font-weight: bold;">&gt;</span>
<span style="color: #b218b2;">#include</span> <span style="color: #cc0000; font-weight: bold;">&lt;</span><span style="color: #ff1f8b;">sstream</span><span style="color: #cc0000; font-weight: bold;">&gt;</span>
<span style="color: #b218b2;">#include</span> <span style="color: #cc0000; font-weight: bold;">&lt;</span><span style="color: #ff1f8b;">string</span><span style="color: #cc0000; font-weight: bold;">&gt;</span>

<span style="color: #00af00;">using</span> <span style="color: #00af00;">namespace</span> <span style="color: #1f5bff;">std</span>;
<span style="color: #00af00;">typedef</span> <span style="color: #1f5bff;">string</span>::<span style="color: #18b2b2;">size_type</span> <span style="color: #18b2b2;">sz</span>;

<span style="color: #18b2b2;">string</span> <span style="color: #ef2929;">screen</span><span style="color: #cc0000; font-weight: bold;">(</span><span style="color: #18b2b2;">sz</span> <span style="color: #ff8700;">h</span>= 24, <span style="color: #18b2b2;">sz</span> <span style="color: #ff8700;">w</span> = 80, <span style="color: #18b2b2;">char</span> <span style="color: #ff8700;">background</span> = <span style="color: #ff1f8b;">'+'</span><span style="color: #cc0000; font-weight: bold;">)</span> <span style="color: #cc0000; font-weight: bold;">{</span>
  <span style="color: #18b2b2;">ostringstream</span> <span style="color: #ff8700;">ostr</span>;
  ostr &lt;&lt; <span style="color: #ff1f8b;">"Height is "</span> &lt;&lt; h &lt;&lt; <span style="color: #ff1f8b;">", width is "</span> &lt;&lt; w &lt;&lt; <span style="color: #ff1f8b;">", background is "</span> &lt;&lt; background;
  <span style="color: #00af00;">return</span> ostr.str<span style="color: #1f5bff; font-weight: bold;">()</span>;
<span style="color: #cc0000; font-weight: bold;">}</span>

<span style="color: #18b2b2;">int</span> <span style="color: #ef2929;">main</span><span style="color: #cc0000; font-weight: bold;">()</span> <span style="color: #cc0000; font-weight: bold;">{</span>
  cout &lt;&lt; screen<span style="color: #1f5bff; font-weight: bold;">()</span> &lt;&lt; endl;              <span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">&#31561;&#20215;&#20110; screen(24, 80, '+')</span>
  cout &lt;&lt; screen<span style="color: #1f5bff; font-weight: bold;">(</span>66<span style="color: #1f5bff; font-weight: bold;">)</span> &lt;&lt; endl;            <span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">&#31561;&#20215;&#20110; screen(66, 80, '+')</span>
  cout &lt;&lt; screen<span style="color: #1f5bff; font-weight: bold;">(</span>66, 256<span style="color: #1f5bff; font-weight: bold;">)</span> &lt;&lt; endl;       <span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">&#31561;&#20215;&#20110; screen(66, 256, '+')</span>
  cout &lt;&lt; screen<span style="color: #1f5bff; font-weight: bold;">(</span>66, 256, <span style="color: #ff1f8b;">'#'</span><span style="color: #1f5bff; font-weight: bold;">)</span> &lt;&lt; endl;  <span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">&#31561;&#20215;&#20110; screen(66, 256, '#')</span>
<span style="color: #cc0000; font-weight: bold;">}</span>
</pre>
</div>

<pre class="example">
Height is 24, width is 80, background is +
Height is 66, width is 80, background is +
Height is 66, width is 256, background is +
Height is 66, width is 256, background is #
</pre>
</div>
</div>

<div id="outline-container-org504e4a1" class="outline-4">
<h4 id="org504e4a1"><span class="section-number-4">6.3.2</span> 默认实参声明</h4>
<div class="outline-text-4" id="text-6-3-2">
<p>
函数一般只声明一次，但多次声明同一个函数也是合法的。有一点需要注意，在给定的作用
域中一个形参只能被赋予一次默认实参，函数的后续声明只能为之前那些没有默认值的形参
添加实参，并且该形参右侧的所有形参必须都有默认值。
</p>

<div class="org-src-container">
<pre class="src src-C++"><span style="color: #18b2b2;">string</span> <span style="color: #ef2929;">screen</span><span style="color: #cc0000; font-weight: bold;">(</span>sz, sz, <span style="color: #18b2b2;">char</span> = <span style="color: #ff1f8b;">'+'</span><span style="color: #cc0000; font-weight: bold;">)</span>;
<span style="color: #18b2b2;">string</span> <span style="color: #ef2929;">screen</span><span style="color: #cc0000; font-weight: bold;">(</span>sz, sz, <span style="color: #18b2b2;">char</span> = <span style="color: #ff1f8b;">'*'</span><span style="color: #cc0000; font-weight: bold;">)</span>;      <span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">&#38169;&#35823;&#65306;&#37325;&#22797;&#22768;&#26126;</span>
<span style="color: #18b2b2;">string</span> <span style="color: #ef2929;">screen</span><span style="color: #cc0000; font-weight: bold;">(</span>sz, sz = 80, <span style="color: #18b2b2;">char</span> = <span style="color: #ff1f8b;">'+'</span><span style="color: #cc0000; font-weight: bold;">)</span>; <span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">&#27491;&#30830;&#65306;&#28155;&#21152;&#40664;&#35748;&#23454;&#21442;</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgd090c24" class="outline-4">
<h4 id="orgd090c24"><span class="section-number-4">6.3.3</span> 默认实参初始值</h4>
<div class="outline-text-4" id="text-6-3-3">
<p>
局部变量不能作为默认实参，除此之外，只要表达式的类型能转换成形参所需的类型即可
</p>

<div class="org-src-container">
<pre class="src src-C++"><span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">w, def &#21644; h &#30340;&#22768;&#26126;&#24517;&#39035;&#20986;&#29616;&#22312;&#20989;&#25968;&#20043;&#22806;</span>
<span style="color: #18b2b2;">sz</span> <span style="color: #ff8700;">w</span> = 80;
<span style="color: #18b2b2;">char</span> <span style="color: #ff8700;">def</span> = <span style="color: #ff1f8b;">'+'</span>;
<span style="color: #18b2b2;">sz</span> <span style="color: #ef2929;">h</span><span style="color: #cc0000; font-weight: bold;">()</span>;
<span style="color: #18b2b2;">string</span> <span style="color: #ef2929;">screen</span><span style="color: #cc0000; font-weight: bold;">(</span>sz = h<span style="color: #1f5bff; font-weight: bold;">()</span>, sz = w, <span style="color: #18b2b2;">char</span> = def<span style="color: #cc0000; font-weight: bold;">)</span>;
<span style="color: #18b2b2;">string</span> <span style="color: #ff8700;">window</span> = screen<span style="color: #cc0000; font-weight: bold;">()</span>;  <span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">&#35843;&#29992; screen(h(), 80, '+')</span>

<span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">&#29992;&#20316;&#40664;&#35748;&#23454;&#21442;&#30340;&#21517;&#23383;&#22312;&#20989;&#25968;&#22768;&#26126;&#25152;&#22312;&#30340;&#20316;&#29992;&#22495;&#20869;&#35299;&#26512;&#65292;&#32780;&#36825;&#20123;&#21517;&#23383;&#30340;&#27714;&#20540;&#36807;&#31243;&#21457;&#29983;&#22312;&#20989;</span>
<span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">&#25968;&#35843;&#29992;&#26102;</span>
<span style="color: #18b2b2;">void</span> <span style="color: #ef2929;">foo</span><span style="color: #cc0000; font-weight: bold;">()</span> <span style="color: #cc0000; font-weight: bold;">{</span>
  def = <span style="color: #ff1f8b;">'*'</span>;              <span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">&#25913;&#21464;&#20102;&#40664;&#35748;&#23454;&#21442;&#24477;</span>
  <span style="color: #18b2b2;">sz</span> <span style="color: #ff8700;">w</span> = 100;             <span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">&#38544;&#34255;&#20102;&#22806;&#23618;&#23450;&#20041;&#30340; w&#65292;&#20294;&#26159;&#27809;&#26377;&#25913;&#21464;&#40664;&#35748;&#20540;</span>
  window = screen<span style="color: #1f5bff; font-weight: bold;">()</span>;      <span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">&#35843;&#29992; screen(h(), 80, '*')</span>
<span style="color: #cc0000; font-weight: bold;">}</span>
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-orgea5dbbb" class="outline-3">
<h3 id="orgea5dbbb"><span class="section-number-3">6.4</span> 内联函数和 <code>constexpr</code> 函数</h3>
<div class="outline-text-3" id="text-6-4">
<p>
函数入栈出栈有额外开销，使用 <code>inline</code> 关键字可以使函数在调用处展开。内联只是向编译
器发出一个请求，行为取决于编译器本身。内联函数和 <code>constexpr</code> 函数通常定义在头文件
中。
</p>

<div class="org-src-container">
<pre class="src src-C++"><span style="color: #00af00;">inline</span> <span style="color: #00af00;">const</span> <span style="color: #18b2b2;">string</span> &amp;
<span style="color: #ef2929;">shorterString</span><span style="color: #cc0000; font-weight: bold;">(</span><span style="color: #00af00;">const</span> <span style="color: #18b2b2;">string</span> &amp;<span style="color: #ff8700;">s1</span>, <span style="color: #00af00;">const</span> <span style="color: #18b2b2;">string</span> &amp;<span style="color: #ff8700;">s2</span><span style="color: #cc0000; font-weight: bold;">)</span> <span style="color: #cc0000; font-weight: bold;">{</span>
  <span style="color: #00af00;">return</span> s1.size<span style="color: #1f5bff; font-weight: bold;">()</span> &lt;= s2.size<span style="color: #1f5bff; font-weight: bold;">()</span>? s1: s2;
<span style="color: #cc0000; font-weight: bold;">}</span>
</pre>
</div>

<p>
<code>constexpr</code> 函数是指能用于常量表达式的函数，函数的返回值和所有形参都必须是字面值类
型，函数体中必须有且只有一条 return 语句
</p>

<div class="org-src-container">
<pre class="src src-C++"><span style="color: #00af00;">constexpr</span> <span style="color: #18b2b2;">int</span> <span style="color: #ef2929;">new_sz</span><span style="color: #cc0000; font-weight: bold;">()</span> <span style="color: #cc0000; font-weight: bold;">{</span> <span style="color: #00af00;">return</span> 42; <span style="color: #cc0000; font-weight: bold;">}</span>
<span style="color: #00af00;">constexpr</span> <span style="color: #18b2b2;">int</span> <span style="color: #ff8700;">foo</span> = new_sz<span style="color: #cc0000; font-weight: bold;">()</span>;  <span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">&#27491;&#30830;&#65306;foo &#26159;&#19968;&#20010;&#24120;&#37327;&#34920;&#36798;&#24335;</span>
</pre>
</div>

<p>
在执行初始化过程中，编译器把对 <code>constexpr</code> 函数的调用替换成其结果值，为能在编译过
程中随时展开， <code>constexpr</code> 函数被隐式地指定为内联函数。
</p>

<div class="org-src-container">
<pre class="src src-C++"><span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">&#22914;&#26524; arg &#26159;&#24120;&#37327;&#34920;&#36798;&#24335;&#65292;&#21017; scale(arg) &#20063;&#26159;&#24120;&#37327;&#34920;&#36798;&#24335;</span>
<span style="color: #00af00;">constexpr</span> <span style="color: #18b2b2;">size_t</span> <span style="color: #ef2929;">scale</span><span style="color: #cc0000; font-weight: bold;">(</span><span style="color: #18b2b2;">size_t</span> <span style="color: #ff8700;">cnt</span><span style="color: #cc0000; font-weight: bold;">)</span> <span style="color: #cc0000; font-weight: bold;">{</span> <span style="color: #00af00;">return</span> new_sz<span style="color: #1f5bff; font-weight: bold;">()</span> * cnt; <span style="color: #cc0000; font-weight: bold;">}</span>

<span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">&#24403; scale &#30340;&#23454;&#21442;&#26159;&#24120;&#37327;&#34920;&#36798;&#24335;&#26102;&#65292;&#23427;&#30340;&#36820;&#22238;&#20540;&#20063;&#26159;&#24120;&#37327;&#34920;&#36798;&#24335;&#65292;&#21453;&#20043;&#21017;&#19981;&#28982;</span>
<span style="color: #18b2b2;">int</span> <span style="color: #ff8700;">arr</span><span style="color: #cc0000; font-weight: bold;">[</span>scale<span style="color: #1f5bff; font-weight: bold;">(</span>2<span style="color: #1f5bff; font-weight: bold;">)</span><span style="color: #cc0000; font-weight: bold;">]</span>;   <span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">&#27491;&#30830;&#65306;scale(2) &#26159;&#24120;&#37327;&#34920;&#36798;&#24335;</span>
<span style="color: #18b2b2;">int</span> <span style="color: #ff8700;">i</span> = 2;           <span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">i &#19981;&#26159;&#24120;&#37327;&#34920;&#36798;&#24335;</span>
<span style="color: #18b2b2;">int</span> <span style="color: #ff8700;">arr2</span><span style="color: #cc0000; font-weight: bold;">[</span>scale<span style="color: #1f5bff; font-weight: bold;">(</span>i<span style="color: #1f5bff; font-weight: bold;">)</span><span style="color: #cc0000; font-weight: bold;">]</span>;  <span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">&#38169;&#35823;&#65306;scale(i) &#19981;&#26159;&#24120;&#37327;&#34920;&#36798;&#24335;</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-orgb10d352" class="outline-3">
<h3 id="orgb10d352"><span class="section-number-3">6.5</span> <span class="todo TODO">TODO</span> 函数匹配</h3>
<div class="outline-text-3" id="text-6-5">
<p>
该部分内容还未总结
</p>
</div>
</div>
</div>
<div id="outline-container-org9f221b6" class="outline-2">
<h2 id="org9f221b6"><span class="section-number-2">7</span> 类</h2>
<div class="outline-text-2" id="text-7">
<p>
类的基本思想是数据抽象和封装。数据抽象是一种依赖于接口和实现分离的编程技术。类的
接口包括用户所能执行的操作；类的实现则包括类的数据成员、负责接口实现的函数体以及
定义类所需的各种私有函数
</p>
</div>

<div id="outline-container-orgd84f798" class="outline-3">
<h3 id="orgd84f798"><span class="section-number-3">7.1</span> 定义抽象数据类型</h3>
<div class="outline-text-3" id="text-7-1">
</div>
<div id="outline-container-orgec10260" class="outline-4">
<h4 id="orgec10260"><span class="section-number-4">7.1.1</span> 使用 <code>Sales_data</code> 类的接口</h4>
<div class="outline-text-4" id="text-7-1-1">
<div class="org-src-container">
<pre class="src src-C++"><span style="color: #18b2b2;">Sales_data</span> <span style="color: #ff8700;">total</span>;                      <span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">&#20445;&#23384;&#24403;&#21069;&#27714;&#21644;&#32467;&#26524;&#30340;&#21464;&#37327;</span>
<span style="color: #00af00;">if</span> <span style="color: #cc0000; font-weight: bold;">(</span>read<span style="color: #1f5bff; font-weight: bold;">(</span>cin, total<span style="color: #1f5bff; font-weight: bold;">)</span><span style="color: #cc0000; font-weight: bold;">)</span> <span style="color: #cc0000; font-weight: bold;">{</span>                <span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">&#35835;&#20837;&#19968;&#31508;&#20132;&#26131;</span>
  <span style="color: #18b2b2;">Sales_data</span> <span style="color: #ff8700;">trans</span>;                    <span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">&#20445;&#23384;&#19979;&#19968;&#26465;&#20132;&#26131;&#25968;&#25454;&#30340;&#21464;&#37327;</span>
  <span style="color: #00af00;">while</span> <span style="color: #1f5bff; font-weight: bold;">(</span>read<span style="color: #00af00; font-weight: bold;">(</span>cin, trans<span style="color: #00af00; font-weight: bold;">)</span><span style="color: #1f5bff; font-weight: bold;">)</span> <span style="color: #1f5bff; font-weight: bold;">{</span>           <span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">&#35835;&#20837;&#21097;&#20313;&#30340;&#20132;&#26131;</span>
    <span style="color: #00af00;">if</span> <span style="color: #00af00; font-weight: bold;">(</span>total.isbn<span style="color: #ff4ea3; font-weight: bold;">()</span> == trans.isbn<span style="color: #ff4ea3; font-weight: bold;">()</span><span style="color: #00af00; font-weight: bold;">)</span>  <span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">&#26816;&#26597; isbn</span>
      total.combine<span style="color: #00af00; font-weight: bold;">(</span>trans<span style="color: #00af00; font-weight: bold;">)</span>;            <span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">&#21512;&#24182;&#20837; total</span>
    <span style="color: #00af00;">else</span> <span style="color: #00af00; font-weight: bold;">{</span>
      print<span style="color: #ff4ea3; font-weight: bold;">(</span>cout, total<span style="color: #ff4ea3; font-weight: bold;">)</span> &lt;&lt; endl;      <span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">&#36755;&#20986;&#32467;&#26524;</span>
      total = trans;                   <span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">&#22788;&#29702;&#19979;&#19968;&#26412;&#20070;</span>
    <span style="color: #00af00; font-weight: bold;">}</span>
  <span style="color: #1f5bff; font-weight: bold;">}</span>
  print<span style="color: #1f5bff; font-weight: bold;">(</span>cout, total<span style="color: #1f5bff; font-weight: bold;">)</span> &lt;&lt; endl;          <span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">&#36755;&#20986;&#26368;&#21518;&#19968;&#26465;&#20132;&#26131;</span>
 <span style="color: #cc0000; font-weight: bold;">}</span> <span style="color: #00af00;">else</span> <span style="color: #cc0000; font-weight: bold;">{</span>
  cerr &lt;&lt; <span style="color: #ff1f8b;">"No data!"</span> &lt;&lt; endl;
<span style="color: #cc0000; font-weight: bold;">}</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org039d9e6" class="outline-4">
<h4 id="org039d9e6"><span class="section-number-4">7.1.2</span> 改进 <code>Sales_data</code> 类</h4>
<div class="outline-text-4" id="text-7-1-2">
<div class="org-src-container">
<pre class="src src-C++"><span style="color: #b218b2;">#include</span> <span style="color: #cc0000; font-weight: bold;">&lt;</span><span style="color: #ff1f8b;">string</span><span style="color: #cc0000; font-weight: bold;">&gt;</span>

<span style="color: #00af00;">struct</span> <span style="color: #18b2b2;">Sales_data</span> <span style="color: #cc0000; font-weight: bold;">{</span>
  <span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">Sales_data &#30340;&#25104;&#21592;&#20989;&#25968;&#65306;&#36820;&#22238; book_no</span>
  <span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">&#23450;&#20041;&#22312;&#31867;&#20869;&#37096;&#30340;&#20989;&#25968;&#26159;&#38544;&#24335;&#30340; inline &#20989;&#25968;</span>
  <span style="color: #1f5bff;">std</span>::<span style="color: #18b2b2;">string</span> <span style="color: #ef2929;">isbn</span><span style="color: #1f5bff; font-weight: bold;">()</span> <span style="color: #00af00;">const</span> <span style="color: #1f5bff; font-weight: bold;">{</span> <span style="color: #00af00;">return</span> book_no; <span style="color: #1f5bff; font-weight: bold;">}</span>
  <span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">Sales_data &#30340;&#25104;&#21592;&#20989;&#25968;&#65306;&#21512;&#24182;&#25968;&#25454;</span>
  <span style="color: #18b2b2;">Sales_data</span>&amp; <span style="color: #ef2929;">combine</span><span style="color: #1f5bff; font-weight: bold;">(</span><span style="color: #00af00;">const</span> <span style="color: #18b2b2;">Sales_data</span>&amp;<span style="color: #1f5bff; font-weight: bold;">)</span>;
  <span style="color: #18b2b2;">double</span> <span style="color: #ef2929;">avg_price</span><span style="color: #1f5bff; font-weight: bold;">()</span> <span style="color: #00af00;">const</span>;

  <span style="color: #1f5bff;">std</span>::<span style="color: #18b2b2;">string</span> <span style="color: #ff8700;">book_no</span>;
  <span style="color: #18b2b2;">unsigned</span> <span style="color: #ff8700;">units_sold</span> = 0;
  <span style="color: #18b2b2;">double</span> <span style="color: #ff8700;">revenue</span> = 0.0;
<span style="color: #cc0000; font-weight: bold;">}</span>;

<span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">Sales_data &#30340;&#38750;&#25104;&#21592;&#25509;&#21475;&#20989;&#25968;</span>
<span style="color: #18b2b2;">Sales_data</span> <span style="color: #ef2929;">add</span><span style="color: #cc0000; font-weight: bold;">(</span><span style="color: #00af00;">const</span> <span style="color: #18b2b2;">Sales_data</span>&amp;, <span style="color: #00af00;">const</span> <span style="color: #18b2b2;">Sales_data</span>&amp;<span style="color: #cc0000; font-weight: bold;">)</span>;
<span style="color: #1f5bff;">std</span>::<span style="color: #18b2b2;">ostream</span> &amp;<span style="color: #ef2929;">print</span><span style="color: #cc0000; font-weight: bold;">(</span><span style="color: #1f5bff;">std</span>::<span style="color: #18b2b2;">ostream</span>&amp;, <span style="color: #00af00;">const</span> <span style="color: #18b2b2;">Sales_data</span>&amp;<span style="color: #cc0000; font-weight: bold;">)</span>;
<span style="color: #1f5bff;">std</span>::<span style="color: #18b2b2;">istream</span> &amp;<span style="color: #ef2929;">read</span><span style="color: #cc0000; font-weight: bold;">(</span><span style="color: #1f5bff;">std</span>::<span style="color: #18b2b2;">istream</span>&amp;, <span style="color: #18b2b2;">Sales_data</span>&amp;<span style="color: #cc0000; font-weight: bold;">)</span>;
</pre>
</div>

<p>
在 C++ 中对于成员函数的调用，可以认为编译器将该调用重写为了
</p>

<div class="org-src-container">
<pre class="src src-C++"><span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">&#20266;&#20195;&#30721;</span>
<span style="color: #1f5bff;">Sales_data</span>::isbn<span style="color: #cc0000; font-weight: bold;">(</span>&amp;total<span style="color: #cc0000; font-weight: bold;">)</span>;
</pre>
</div>

<p>
调用 <code>isbn</code> 方法时传入了 <code>total</code> 的地址，与 Python 的对象方法的机制一致。在 Python
中使用对象的成员变量使用 <code>self</code> ，在 C++ 中可以使用 <code>this</code> 隐式指针，不同之处在于
<code>this</code> 指针在形参中无需写出，在使用变量时可写可不写。因此 <code>isbn</code> 方法也可写为
</p>

<div class="org-src-container">
<pre class="src src-C++"><span style="color: #1f5bff;">std</span>::<span style="color: #18b2b2;">string</span> <span style="color: #ef2929;">isbn</span><span style="color: #cc0000; font-weight: bold;">()</span> <span style="color: #00af00;">const</span> <span style="color: #cc0000; font-weight: bold;">{</span> <span style="color: #00af00;">return</span> <span style="color: #00af00;">this</span>-&gt;book_no; <span style="color: #cc0000; font-weight: bold;">}</span>
</pre>
</div>

<p>
另一个特殊之处是 <code>isbn</code> 方法声明中的 <code>const</code> ，此处的 <code>const</code> 其实修饰的是 <code>isbn</code> 的
<code>this</code> 指针。默认情况下， <code>this</code> 的类型为 <code>Sales_data *const</code> 是一个指针常量，在 <code>isbn</code>
方法中，我们并不会通过 <code>this</code> 指针对对象的成员进行修改，因此将 <code>this</code> 声明为 <code>const
Sales_data *const</code> 可提高适用范围，因此上述声明可以想象为
</p>

<div class="org-src-container">
<pre class="src src-C++"><span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">&#20266;&#20195;&#30721;</span>
<span style="color: #1f5bff;">std</span>::<span style="color: #18b2b2;">string</span> <span style="color: #1f5bff;">Sales_data</span>::<span style="color: #ef2929;">isbn</span><span style="color: #cc0000; font-weight: bold;">(</span><span style="color: #00af00;">const</span> <span style="color: #18b2b2;">Sales_data</span> *<span style="color: #00af00;">const</span> <span style="color: #00af00;">this</span><span style="color: #cc0000; font-weight: bold;">)</span> <span style="color: #cc0000; font-weight: bold;">{</span> <span style="color: #00af00;">return</span> <span style="color: #00af00;">this</span>-&gt;book_no; <span style="color: #cc0000; font-weight: bold;">}</span>
</pre>
</div>


<p>
下一步我们可以在类的外部定义成员函数，返回类型、参数列表和函数名都要与类内声明一
致
</p>

<div class="org-src-container">
<pre class="src src-C++"><span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">&#27492;&#22788; :: &#35828;&#26126; avg_price &#26159;&#22768;&#26126;&#22312;&#31867; Sales_data &#30340;&#20316;&#29992;&#22495;&#20869;</span>
<span style="color: #18b2b2;">double</span> <span style="color: #1f5bff;">Sales_data</span>::<span style="color: #ef2929;">avg_price</span><span style="color: #cc0000; font-weight: bold;">()</span> <span style="color: #00af00;">const</span> <span style="color: #cc0000; font-weight: bold;">{</span>
  <span style="color: #00af00;">return</span> units_sold? revenue / units_sold: 0;
<span style="color: #cc0000; font-weight: bold;">}</span>
</pre>
</div>

<p>
在学习运算符重载之前，我们处理两个 <code>Sales_data</code> 对象相加定义了一个 <code>combine</code> 函数。
我们希望该函数能将调用函数的对象与作为参数传入的对象相加并返回前面的对象，因此此
处返回 <code>this</code> 对象
</p>

<div class="org-src-container">
<pre class="src src-C++"><span style="color: #18b2b2;">Sales_data</span> &amp;<span style="color: #1f5bff;">Sales_data</span>::<span style="color: #ef2929;">combine</span><span style="color: #cc0000; font-weight: bold;">(</span><span style="color: #00af00;">const</span> <span style="color: #18b2b2;">Sales_data</span> &amp;<span style="color: #ff8700;">rhs</span><span style="color: #cc0000; font-weight: bold;">)</span> <span style="color: #cc0000; font-weight: bold;">{</span>
  units_sold += rhs.units_sold;
  revenue += rhs.revenue;
  <span style="color: #00af00;">return</span> *<span style="color: #00af00;">this</span>;            <span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">&#36820;&#22238;&#35843;&#29992;&#35813;&#20989;&#25968;&#30340;&#23545;&#35937;</span>
<span style="color: #cc0000; font-weight: bold;">}</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-org60c6577" class="outline-4">
<h4 id="org60c6577"><span class="section-number-4">7.1.3</span> 定义类相关的非成员函数</h4>
<div class="outline-text-4" id="text-7-1-3">
<p>
此处定义了一些类的辅助函数，它们与类密切相关。从操作上来说这些函数属于类的接口的
组成部分，但并不属于类本身。
</p>

<div class="org-src-container">
<pre class="src src-C++"><span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">&#36755;&#20837;&#30340;&#20132;&#26131;&#20449;&#24687;&#21253;&#25324; ISBN&#12289;&#21806;&#20986;&#24635;&#25968;&#21644;&#21806;&#20986;&#20215;&#26684;</span>
<span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">&#27492;&#22788; iostream &#23545;&#35937;&#20351;&#29992;&#30340;&#37117;&#26159;&#24341;&#29992;&#65292;&#22240;&#20026; iostream &#23545;&#35937;&#23646;&#20110;&#19981;&#33021;&#25335;&#36125;&#30340;&#23545;&#35937;</span>
<span style="color: #18b2b2;">istream</span> &amp;<span style="color: #ef2929;">read</span><span style="color: #cc0000; font-weight: bold;">(</span><span style="color: #18b2b2;">istream</span> &amp;<span style="color: #ff8700;">is</span>, <span style="color: #18b2b2;">Sales_data</span> &amp;<span style="color: #ff8700;">item</span><span style="color: #cc0000; font-weight: bold;">)</span> <span style="color: #cc0000; font-weight: bold;">{</span>
  <span style="color: #18b2b2;">double</span> <span style="color: #ff8700;">price</span> = 0;
  is &gt;&gt; item.book_no &gt;&gt; item.units_sold &gt;&gt; price;
  item.revenue = price * item.units_sold;
  <span style="color: #00af00;">return</span> is;
<span style="color: #cc0000; font-weight: bold;">}</span>

<span style="color: #18b2b2;">ostream</span> &amp;<span style="color: #ef2929;">print</span><span style="color: #cc0000; font-weight: bold;">(</span><span style="color: #18b2b2;">ostream</span> &amp;<span style="color: #ff8700;">os</span>, <span style="color: #00af00;">const</span> <span style="color: #18b2b2;">Sales_data</span> &amp;<span style="color: #ff8700;">item</span><span style="color: #cc0000; font-weight: bold;">)</span> <span style="color: #cc0000; font-weight: bold;">{</span>
  os &lt;&lt; item.isbn<span style="color: #1f5bff; font-weight: bold;">()</span> &lt;&lt; <span style="color: #ff1f8b;">" "</span> &lt;&lt; item.units_sold &lt;&lt; <span style="color: #ff1f8b;">" "</span>
     &lt;&lt; item.revenue &lt;&lt; <span style="color: #ff1f8b;">" "</span> &lt;&lt; item.avg_price<span style="color: #1f5bff; font-weight: bold;">()</span>;
  <span style="color: #00af00;">return</span> os;
<span style="color: #cc0000; font-weight: bold;">}</span>

<span style="color: #18b2b2;">Sales_data</span> <span style="color: #ef2929;">add</span><span style="color: #cc0000; font-weight: bold;">(</span><span style="color: #00af00;">const</span> <span style="color: #18b2b2;">Sales_data</span> &amp;<span style="color: #ff8700;">lhs</span>, <span style="color: #00af00;">const</span> <span style="color: #18b2b2;">Sales_data</span> &amp;<span style="color: #ff8700;">rhs</span><span style="color: #cc0000; font-weight: bold;">)</span> <span style="color: #cc0000; font-weight: bold;">{</span>
  <span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">&#25335;&#36125; lhs &#30340;&#21103;&#26412;</span>
  <span style="color: #18b2b2;">Sales_data</span> <span style="color: #ff8700;">sum</span> = lhs;
  sum.combine<span style="color: #1f5bff; font-weight: bold;">(</span>rhs<span style="color: #1f5bff; font-weight: bold;">)</span>;
  <span style="color: #00af00;">return</span> sum;
<span style="color: #cc0000; font-weight: bold;">}</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org9e1093a" class="outline-4">
<h4 id="org9e1093a"><span class="section-number-4">7.1.4</span> 构造函数</h4>
<div class="outline-text-4" id="text-7-1-4">
<p>
类通过一个或几个特殊的成员函数来控制对象的初始化过程，这些函数被称为构造函数。无
论何时只要类的对象被创建就会执行构造函数。
</p>

<p>
若无显式地声明定义构造函数，编译器会为我们合成一个 <code>默认构造函数</code> 。若已经定义了一
个初始化函数，则编译器不会再为我们合成 <code>默认构造函数</code> 。这句话隐含的意思就是，如果
你定义了一个初始化函数，你就要全权负责初始化过程。默认构造函数的规则为：
</p>
<ul class="org-ul">
<li>若存在类内初始值，则用它来初始化成员</li>
<li>否则默认初始化该成员</li>
</ul>

<div class="org-src-container">
<pre class="src src-C++"><span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">book_no &#25191;&#34892;&#40664;&#35748;&#21021;&#22987;&#21270;&#20026;&#31354;&#23383;&#31526;&#20018;</span>
<span style="color: #1f5bff;">std</span>::<span style="color: #18b2b2;">string</span> <span style="color: #ff8700;">book_no</span>;
<span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">units_sold &#21021;&#22987;&#21270;&#20026; 0</span>
<span style="color: #18b2b2;">unsigned</span> <span style="color: #ff8700;">units_sold</span> = 0;
<span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">revenue &#21021;&#22987;&#21270;&#20026; 0.0</span>
<span style="color: #18b2b2;">double</span> <span style="color: #ff8700;">revenue</span> = 0.0;
</pre>
</div>

<p>
接下来为 <code>Sales_data</code> 类添加构造函数
</p>

<div class="org-src-container">
<pre class="src src-C++"><span style="color: #00af00;">class</span> <span style="color: #18b2b2;">Sales_data</span> <span style="color: #cc0000; font-weight: bold;">{</span>
  <span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">&#26032;&#22686;&#30340;&#26500;&#36896;&#20989;&#25968;</span>
  <span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">&#20351;&#29992; default &#35201;&#27714;&#32534;&#35793;&#22120;&#29983;&#25104;&#40664;&#35748;&#26500;&#36896;&#20989;&#25968;</span>
  <span style="color: #ef2929;">Sales_data</span><span style="color: #1f5bff; font-weight: bold;">()</span> = <span style="color: #00af00;">default</span>;
  <span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">&#20882;&#21495;&#20043;&#21518;&#33457;&#25324;&#21495;&#20043;&#21069;&#30340;&#37096;&#20998;&#34987;&#31216;&#20026; =&#26500;&#36896;&#20989;&#25968;&#21021;&#22987;&#20540;&#21015;&#34920;=</span>
  <span style="color: #ef2929;">Sales_data</span><span style="color: #1f5bff; font-weight: bold;">(</span><span style="color: #00af00;">const</span> <span style="color: #1f5bff;">std</span>::<span style="color: #18b2b2;">string</span> &amp;<span style="color: #ff8700;">s</span><span style="color: #1f5bff; font-weight: bold;">)</span>: <span style="color: #ef2929;">book_no</span><span style="color: #1f5bff; font-weight: bold;">(</span>s<span style="color: #1f5bff; font-weight: bold;">)</span> <span style="color: #1f5bff; font-weight: bold;">{</span> <span style="color: #1f5bff; font-weight: bold;">}</span>
  <span style="color: #ef2929;">Sales_data</span><span style="color: #1f5bff; font-weight: bold;">(</span><span style="color: #00af00;">const</span> <span style="color: #1f5bff;">std</span>::<span style="color: #18b2b2;">string</span> &amp;<span style="color: #ff8700;">s</span>, <span style="color: #18b2b2;">unsigned</span> <span style="color: #ff8700;">n</span>, <span style="color: #18b2b2;">double</span> <span style="color: #ff8700;">p</span><span style="color: #1f5bff; font-weight: bold;">)</span>:
    book_no<span style="color: #1f5bff; font-weight: bold;">(</span>s<span style="color: #1f5bff; font-weight: bold;">)</span>, units_sold<span style="color: #1f5bff; font-weight: bold;">(</span>n<span style="color: #1f5bff; font-weight: bold;">)</span>, revenue<span style="color: #1f5bff; font-weight: bold;">(</span>p*n<span style="color: #1f5bff; font-weight: bold;">)</span> <span style="color: #1f5bff; font-weight: bold;">{</span> <span style="color: #1f5bff; font-weight: bold;">}</span>
  <span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">&#20043;&#21069;&#24050;&#26377;&#30340;&#25104;&#21592;</span>
  <span style="color: #1f5bff;">std</span>::<span style="color: #18b2b2;">string</span> <span style="color: #ef2929;">isbn</span><span style="color: #1f5bff; font-weight: bold;">()</span> <span style="color: #00af00;">const</span> <span style="color: #1f5bff; font-weight: bold;">{</span> <span style="color: #00af00;">return</span> book_no; <span style="color: #1f5bff; font-weight: bold;">}</span>
  <span style="color: #18b2b2;">Sales_data</span>&amp; <span style="color: #ef2929;">combine</span><span style="color: #1f5bff; font-weight: bold;">(</span><span style="color: #00af00;">const</span> <span style="color: #18b2b2;">Sales_data</span>&amp;<span style="color: #1f5bff; font-weight: bold;">)</span>;
  <span style="color: #18b2b2;">double</span> <span style="color: #ef2929;">avg_price</span><span style="color: #1f5bff; font-weight: bold;">()</span> <span style="color: #00af00;">const</span>;
  <span style="color: #1f5bff;">std</span>::<span style="color: #18b2b2;">string</span> <span style="color: #ff8700;">book_no</span>;
  <span style="color: #18b2b2;">unsigned</span> <span style="color: #ff8700;">units_sold</span> = 0;
  <span style="color: #18b2b2;">double</span> <span style="color: #ff8700;">revenue</span> = 0.0;
<span style="color: #cc0000; font-weight: bold;">}</span>;
</pre>
</div>

<p>
也可以在类外进行构造函数的定义，但此时必须指明构造函数是哪个类的成员
</p>

<div class="org-src-container">
<pre class="src src-C++"><span style="color: #1f5bff;">Sales_data</span>::<span style="color: #ef2929;">Sales_data</span><span style="color: #cc0000; font-weight: bold;">(</span><span style="color: #1f5bff;">std</span>::<span style="color: #18b2b2;">istream</span> &amp;<span style="color: #ff8700;">is</span><span style="color: #cc0000; font-weight: bold;">)</span> <span style="color: #cc0000; font-weight: bold;">{</span>
  read<span style="color: #1f5bff; font-weight: bold;">(</span>is, *<span style="color: #00af00;">this</span><span style="color: #1f5bff; font-weight: bold;">)</span>;    <span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">read &#20989;&#25968;&#20174; is &#20013;&#35835;&#21462;&#19968;&#26465;&#20132;&#26131;&#24182;&#23384;&#20837; this &#23545;&#35937;</span>
<span style="color: #cc0000; font-weight: bold;">}</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgad77641" class="outline-4">
<h4 id="orgad77641"><span class="section-number-4">7.1.5</span> 拷贝、赋值和析构</h4>
<div class="outline-text-4" id="text-7-1-5">
<p>
与构造函数类似，拷贝对象的函数也会自动合成。一般来说，编译器生成的版本将对对象的
每个成员执行拷贝、赋值和销毁操作
</p>

<div class="org-src-container">
<pre class="src src-C++"><span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">total = trans;  &#31561;&#20215;&#20110;</span>
total.book_no = trans.book_no;
total.units_sold = trans.units_sold;
total.revenue = trans.revenue;
</pre>
</div>

<p>
当类需要分配类对象之外的资源时，合成的版本常常会失效，管理动态内存的类通常不能依
赖合成版本
</p>
</div>
</div>
</div>

<div id="outline-container-org37aa083" class="outline-3">
<h3 id="org37aa083"><span class="section-number-3">7.2</span> 访问控制与封装</h3>
<div class="outline-text-3" id="text-7-2">
</div>
<div id="outline-container-org3a0891d" class="outline-4">
<h4 id="org3a0891d"><span class="section-number-4">7.2.1</span> 访问说明符</h4>
<div class="outline-text-4" id="text-7-2-1">
<p>
<b>访问说明符</b>
</p>
<ul class="org-ul">
<li><code>public</code> 说明符之后的成员在整个程序可被访问，=public= 成员定义类的接口</li>
<li><code>private</code> 说明符之后的成员可以被类的成员函数访问，但是不能被使用该类的代码访问，
<code>private</code> 部分封装了类的实现细节</li>
</ul>

<p>
再一次定义 <code>Sales_data</code> 类
</p>

<div class="org-src-container">
<pre class="src src-C++"><span style="color: #00af00;">class</span> <span style="color: #18b2b2;">Sales_data</span> <span style="color: #cc0000; font-weight: bold;">{</span>
<span style="color: #00af00;">public</span>:       <span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">&#25509;&#21475;</span>
  <span style="color: #ef2929;">Sales_data</span><span style="color: #1f5bff; font-weight: bold;">()</span> = <span style="color: #00af00;">default</span>;
  <span style="color: #ef2929;">Sales_data</span><span style="color: #1f5bff; font-weight: bold;">(</span><span style="color: #00af00;">const</span> <span style="color: #1f5bff;">std</span>::<span style="color: #18b2b2;">string</span> &amp;<span style="color: #ff8700;">s</span><span style="color: #1f5bff; font-weight: bold;">)</span>: <span style="color: #ef2929;">book_no</span><span style="color: #1f5bff; font-weight: bold;">(</span>s<span style="color: #1f5bff; font-weight: bold;">)</span> <span style="color: #1f5bff; font-weight: bold;">{</span> <span style="color: #1f5bff; font-weight: bold;">}</span>
  <span style="color: #ef2929;">Sales_data</span><span style="color: #1f5bff; font-weight: bold;">(</span><span style="color: #00af00;">const</span> <span style="color: #1f5bff;">std</span>::<span style="color: #18b2b2;">string</span> &amp;<span style="color: #ff8700;">s</span>, <span style="color: #18b2b2;">unsigned</span> <span style="color: #ff8700;">n</span>, <span style="color: #18b2b2;">double</span> <span style="color: #ff8700;">p</span><span style="color: #1f5bff; font-weight: bold;">)</span>:
    book_no<span style="color: #1f5bff; font-weight: bold;">(</span>s<span style="color: #1f5bff; font-weight: bold;">)</span>, units_sold<span style="color: #1f5bff; font-weight: bold;">(</span>n<span style="color: #1f5bff; font-weight: bold;">)</span>, revenue<span style="color: #1f5bff; font-weight: bold;">(</span>p*n<span style="color: #1f5bff; font-weight: bold;">)</span> <span style="color: #1f5bff; font-weight: bold;">{</span> <span style="color: #1f5bff; font-weight: bold;">}</span>

  <span style="color: #1f5bff;">std</span>::<span style="color: #18b2b2;">string</span> <span style="color: #ef2929;">isbn</span><span style="color: #1f5bff; font-weight: bold;">()</span> <span style="color: #00af00;">const</span> <span style="color: #1f5bff; font-weight: bold;">{</span> <span style="color: #00af00;">return</span> book_no; <span style="color: #1f5bff; font-weight: bold;">}</span>
  <span style="color: #18b2b2;">Sales_data</span>&amp; <span style="color: #ef2929;">combine</span><span style="color: #1f5bff; font-weight: bold;">(</span><span style="color: #00af00;">const</span> <span style="color: #18b2b2;">Sales_data</span>&amp;<span style="color: #1f5bff; font-weight: bold;">)</span>;

<span style="color: #00af00;">private</span>:
  <span style="color: #18b2b2;">double</span> <span style="color: #ef2929;">avg_price</span><span style="color: #1f5bff; font-weight: bold;">()</span> <span style="color: #00af00;">const</span>
  <span style="color: #1f5bff; font-weight: bold;">{</span> <span style="color: #00af00;">return</span> units_sold? revenue / units_sold: 0; <span style="color: #1f5bff; font-weight: bold;">}</span>
  <span style="color: #1f5bff;">std</span>::<span style="color: #18b2b2;">string</span> <span style="color: #ff8700;">book_no</span>;
  <span style="color: #18b2b2;">unsigned</span> <span style="color: #ff8700;">units_sold</span> = 0;
  <span style="color: #18b2b2;">double</span> <span style="color: #ff8700;">revenue</span> = 0.0;
<span style="color: #cc0000; font-weight: bold;">}</span>;
</pre>
</div>

<p>
此处与前面例子的另一个区别是由 <code>struct</code> 改为了 <code>class</code> ，使用 <code>struct</code> 和 <code>class</code> 都可以
定义类，区别在于访问权限的控制， <code>class</code> 定义的类中第一个访问说明符之前的成员默认
是 <code>private</code> 的，而 <code>struct</code> 定义的类中第一个访问说明符之前的成员默认是 <code>public</code> 的
</p>
</div>
</div>

<div id="outline-container-orgc6fbe03" class="outline-4">
<h4 id="orgc6fbe03"><span class="section-number-4">7.2.2</span> 友元</h4>
<div class="outline-text-4" id="text-7-2-2">
<p>
其它函数和类无法直接访问 <code>Sales_data</code> 类中的 <code>private</code> 成员，但也有一种方法可以使其
它函数访问 <code>Sales_data</code> 类中成员，那就是使该函数成为 <code>Sales_data</code> 类的友元函数
（friend）。其中一个应用是重载针对 <code>Sales_data</code> 类的 <code>&lt;&lt;</code> 和 <code>&gt;&gt;</code> 运算符
</p>

<div class="org-src-container">
<pre class="src src-C++"><span style="color: #b218b2;">#include</span> <span style="color: #cc0000; font-weight: bold;">&lt;</span><span style="color: #ff1f8b;">iostream</span><span style="color: #cc0000; font-weight: bold;">&gt;</span>

<span style="color: #00af00;">class</span> <span style="color: #18b2b2;">Sales_data</span> <span style="color: #cc0000; font-weight: bold;">{</span>
<span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">&#23545; &lt;&lt; &#30340;&#37325;&#36733;&#20989;&#25968;&#24182;&#19981;&#26159; Sales_data &#31867;&#30340;&#25104;&#21592;&#65292;&#22240;&#27492;&#24819;&#35201;&#35775;&#38382; Sales_data &#30340;&#25104;&#21592;&#38656;</span>
<span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">&#35201;&#22768;&#26126;&#20026;&#21451;&#20803;&#12290;&#21451;&#20803;&#19981;&#26159;&#31867;&#25104;&#21592;&#22240;&#27492;&#19981;&#21463;&#31867;&#30340;&#21306;&#22495;&#35775;&#38382;&#25511;&#21046;&#30340;&#32422;&#26463;&#65292;&#21487;&#25918;&#22312;&#31867;&#30340;&#20219;&#24847;&#20301;</span>
<span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">&#32622;&#65292;&#20294;&#19968;&#33324;&#25918;&#22312;&#31867;&#30340;&#24320;&#22836;&#12290;&#21451;&#20803;&#30340;&#22768;&#26126;&#20165;&#20165;&#25351;&#23450;&#20102;&#35775;&#38382;&#30340;&#26435;&#38480;&#65292;&#32780;&#38750;&#36890;&#24120;&#24847;&#20041;&#19978;&#30340;&#20989;&#25968;</span>
<span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">&#22768;&#26126;</span>
<span style="color: #00af00;">friend</span> <span style="color: #1f5bff;">std</span>::<span style="color: #18b2b2;">ostream</span> &amp;<span style="color: #00af00;">operator</span><span style="color: #ef2929;">&lt;&lt;</span><span style="color: #1f5bff; font-weight: bold;">(</span><span style="color: #1f5bff;">std</span>::<span style="color: #18b2b2;">ostream</span> &amp;<span style="color: #ff8700;">os</span>, <span style="color: #00af00;">const</span> <span style="color: #18b2b2;">Sales_data</span> &amp;<span style="color: #ff8700;">sd</span><span style="color: #1f5bff; font-weight: bold;">)</span>;
<span style="color: #00af00;">public</span>:
  <span style="color: #ef2929;">Sales_data</span><span style="color: #1f5bff; font-weight: bold;">(</span><span style="color: #00af00;">const</span> <span style="color: #1f5bff;">std</span>::<span style="color: #18b2b2;">string</span> &amp;<span style="color: #ff8700;">s</span>, <span style="color: #18b2b2;">unsigned</span> <span style="color: #ff8700;">n</span>, <span style="color: #18b2b2;">double</span> <span style="color: #ff8700;">p</span><span style="color: #1f5bff; font-weight: bold;">)</span>:
    book_no<span style="color: #1f5bff; font-weight: bold;">(</span>s<span style="color: #1f5bff; font-weight: bold;">)</span>, units_sold<span style="color: #1f5bff; font-weight: bold;">(</span>n<span style="color: #1f5bff; font-weight: bold;">)</span>, revenue<span style="color: #1f5bff; font-weight: bold;">(</span>p*n<span style="color: #1f5bff; font-weight: bold;">)</span> <span style="color: #1f5bff; font-weight: bold;">{</span> <span style="color: #1f5bff; font-weight: bold;">}</span>
<span style="color: #00af00;">private</span>:
  <span style="color: #1f5bff;">std</span>::<span style="color: #18b2b2;">string</span> <span style="color: #ff8700;">book_no</span>;
  <span style="color: #18b2b2;">unsigned</span> <span style="color: #ff8700;">units_sold</span> = 0;
  <span style="color: #18b2b2;">double</span> <span style="color: #ff8700;">revenue</span> = 0.0;
<span style="color: #cc0000; font-weight: bold;">}</span>;

<span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">&lt;&lt; &#37325;&#36733;&#20989;&#25968;&#22312;&#31867;&#22806;&#37096;&#30340;&#22768;&#26126;&#65292;&#24517;&#39035;&#23545;&#31867;&#21487;&#35265;</span>
<span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">&#19968;&#20123;&#32534;&#35793;&#22120;&#24378;&#21046;&#35201;&#27714;&#27492;&#22768;&#26126;</span>
<span style="color: #1f5bff;">std</span>::<span style="color: #18b2b2;">ostream</span> &amp;<span style="color: #00af00;">operator</span><span style="color: #ef2929;">&lt;&lt;</span><span style="color: #cc0000; font-weight: bold;">(</span><span style="color: #1f5bff;">std</span>::<span style="color: #18b2b2;">ostream</span> &amp;<span style="color: #ff8700;">os</span>, <span style="color: #00af00;">const</span> <span style="color: #18b2b2;">Sales_data</span> &amp;<span style="color: #ff8700;">sd</span><span style="color: #cc0000; font-weight: bold;">)</span>;

<span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">&#37325;&#36733; &lt;&lt; &#36816;&#31639;&#31526;&#65292;&#20004;&#20010;&#21442;&#25968;&#20998;&#21035;&#20026; &lt;&lt; &#36816;&#31639;&#31526;&#30340; lhs &#21644; rhs &#36816;&#31639;&#25968;</span>
<span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">ostream &#21644; istream &#19981;&#33021;&#25335;&#36125;&#65292;&#21482;&#33021;&#24341;&#29992;</span>
<span style="color: #1f5bff;">std</span>::<span style="color: #18b2b2;">ostream</span> &amp;<span style="color: #00af00;">operator</span><span style="color: #ef2929;">&lt;&lt;</span><span style="color: #cc0000; font-weight: bold;">(</span><span style="color: #1f5bff;">std</span>::<span style="color: #18b2b2;">ostream</span> &amp;<span style="color: #ff8700;">os</span>, <span style="color: #00af00;">const</span> <span style="color: #18b2b2;">Sales_data</span> &amp;<span style="color: #ff8700;">sd</span><span style="color: #cc0000; font-weight: bold;">)</span> <span style="color: #cc0000; font-weight: bold;">{</span>
  <span style="color: #1f5bff;">std</span>::cout &lt;&lt; <span style="color: #ff1f8b;">"Book number is "</span> &lt;&lt; sd.book_no &lt;&lt; <span style="color: #1f5bff;">std</span>::endl;
  <span style="color: #1f5bff;">std</span>::cout &lt;&lt; <span style="color: #ff1f8b;">"Sold Amount is "</span> &lt;&lt; sd.units_sold &lt;&lt; <span style="color: #1f5bff;">std</span>::endl;
  <span style="color: #1f5bff;">std</span>::cout &lt;&lt; <span style="color: #ff1f8b;">"Revenue is "</span> &lt;&lt; sd.revenue;
  <span style="color: #00af00;">return</span> os;
<span style="color: #cc0000; font-weight: bold;">}</span>

<span style="color: #18b2b2;">int</span> <span style="color: #ef2929;">main</span><span style="color: #cc0000; font-weight: bold;">()</span> <span style="color: #cc0000; font-weight: bold;">{</span>
  <span style="color: #18b2b2;">Sales_data</span> <span style="color: #ff8700;">sd</span><span style="color: #1f5bff; font-weight: bold;">(</span><span style="color: #ff1f8b;">"214.5.1"</span>, 25, 13<span style="color: #1f5bff; font-weight: bold;">)</span>;
  <span style="color: #1f5bff;">std</span>::cout &lt;&lt; sd &lt;&lt; <span style="color: #1f5bff;">std</span>::endl;
<span style="color: #cc0000; font-weight: bold;">}</span>
</pre>
</div>

<pre class="example">
Book number is 214.5.1
Sold Amount is 25
Revenue is 325
</pre>


<p>
另一方面，前面定义的 <code>read</code> 、 <code>print</code> 和 <code>add</code> 函数也要声明为友元函数
</p>

<div class="org-src-container">
<pre class="src src-C++"><span style="color: #00af00;">class</span> <span style="color: #18b2b2;">Sales_data</span> <span style="color: #cc0000; font-weight: bold;">{</span>
  <span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">&#20026; Sales_data &#31867;&#30340;&#38750;&#25104;&#21592;&#20989;&#25968;&#25152;&#20570;&#30340;&#21451;&#20803;&#22768;&#26126;</span>
  <span style="color: #00af00;">friend</span> <span style="color: #18b2b2;">istream</span> &amp;<span style="color: #ef2929;">read</span><span style="color: #1f5bff; font-weight: bold;">(</span><span style="color: #18b2b2;">istream</span> &amp;<span style="color: #ff8700;">is</span>, <span style="color: #18b2b2;">Sales_data</span> &amp;<span style="color: #ff8700;">item</span><span style="color: #1f5bff; font-weight: bold;">)</span>;
  <span style="color: #00af00;">friend</span> <span style="color: #18b2b2;">ostream</span> &amp;<span style="color: #ef2929;">print</span><span style="color: #1f5bff; font-weight: bold;">(</span><span style="color: #18b2b2;">ostream</span> &amp;<span style="color: #ff8700;">os</span>, <span style="color: #00af00;">const</span> <span style="color: #18b2b2;">Sales_data</span> &amp;<span style="color: #ff8700;">item</span><span style="color: #1f5bff; font-weight: bold;">)</span>;
  <span style="color: #00af00;">friend</span> <span style="color: #18b2b2;">Sales_data</span> <span style="color: #ef2929;">add</span><span style="color: #1f5bff; font-weight: bold;">(</span><span style="color: #00af00;">const</span> <span style="color: #18b2b2;">Sales_data</span> &amp;<span style="color: #ff8700;">lhs</span>, <span style="color: #00af00;">const</span> <span style="color: #18b2b2;">Sales_data</span> &amp;<span style="color: #ff8700;">rhs</span><span style="color: #1f5bff; font-weight: bold;">)</span>;
<span style="color: #cc0000; font-weight: bold;">}</span>;
<span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">Sales_data &#25509;&#21475;&#30340;&#38750;&#25104;&#21592;&#32452;&#25104;&#37096;&#20998;&#30340;&#22768;&#26126;</span>
<span style="color: #18b2b2;">istream</span> &amp;<span style="color: #ef2929;">read</span><span style="color: #cc0000; font-weight: bold;">(</span><span style="color: #18b2b2;">istream</span> &amp;<span style="color: #ff8700;">is</span>, <span style="color: #18b2b2;">Sales_data</span> &amp;<span style="color: #ff8700;">item</span><span style="color: #cc0000; font-weight: bold;">)</span>;
<span style="color: #18b2b2;">ostream</span> &amp;<span style="color: #ef2929;">print</span><span style="color: #cc0000; font-weight: bold;">(</span><span style="color: #18b2b2;">ostream</span> &amp;<span style="color: #ff8700;">os</span>, <span style="color: #00af00;">const</span> <span style="color: #18b2b2;">Sales_data</span> &amp;<span style="color: #ff8700;">item</span><span style="color: #cc0000; font-weight: bold;">)</span>;
<span style="color: #18b2b2;">Sales_data</span> <span style="color: #ef2929;">add</span><span style="color: #cc0000; font-weight: bold;">(</span><span style="color: #00af00;">const</span> <span style="color: #18b2b2;">Sales_data</span> &amp;<span style="color: #ff8700;">lhs</span>, <span style="color: #00af00;">const</span> <span style="color: #18b2b2;">Sales_data</span> &amp;<span style="color: #ff8700;">rhs</span><span style="color: #cc0000; font-weight: bold;">)</span>;
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-org5e4d0c9" class="outline-3">
<h3 id="org5e4d0c9"><span class="section-number-3">7.3</span> 类的其它特性</h3>
<div class="outline-text-3" id="text-7-3">
</div>
<div id="outline-container-org0be4ab1" class="outline-4">
<h4 id="org0be4ab1"><span class="section-number-4">7.3.1</span> 类成员再探</h4>
<div class="outline-text-4" id="text-7-3-1">
<p>
我们以一个粒子类进行展示
</p>

<div class="org-src-container">
<pre class="src src-C++"><span style="color: #00af00;">class</span> <span style="color: #18b2b2;">Particle</span> <span style="color: #cc0000; font-weight: bold;">{</span>
<span style="color: #00af00;">public</span>:
  <span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">&#31867;&#22411;&#25104;&#21592;&#65292;&#23450;&#20041;&#31867;&#20869;&#21035;&#21517;&#65292;&#24182;&#19988;&#24517;&#39035;&#20986;&#29616;&#22312;&#20351;&#29992;&#22788;&#20043;&#21069;</span>
  <span style="color: #00af00;">typedef</span> <span style="color: #18b2b2;">float</span> <span style="color: #18b2b2;">pos</span>;
<span style="color: #00af00;">private</span>:
  <span style="color: #18b2b2;">pos</span> <span style="color: #ff8700;">x</span> = 0.0;
  <span style="color: #18b2b2;">pos</span> <span style="color: #ff8700;">y</span> = 0.0;
  <span style="color: #18b2b2;">pos</span> <span style="color: #ff8700;">z</span> = 0.0;
  <span style="color: #1f5bff;">std</span>::<span style="color: #18b2b2;">string</span> <span style="color: #ff8700;">name</span>;
<span style="color: #cc0000; font-weight: bold;">}</span>;
</pre>
</div>

<p>
接下来为类增加接口成员函数，注意何时成员函数会被内联
</p>

<div class="org-src-container">
<pre class="src src-C++"><span style="color: #00af00;">class</span> <span style="color: #18b2b2;">Particle</span> <span style="color: #cc0000; font-weight: bold;">{</span>
<span style="color: #00af00;">public</span>:
  <span style="color: #00af00;">typedef</span> <span style="color: #18b2b2;">float</span> <span style="color: #18b2b2;">pos</span>;
  <span style="color: #ef2929;">Particle</span><span style="color: #1f5bff; font-weight: bold;">()</span> = <span style="color: #00af00;">default</span>;              <span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">&#22240;&#33258;&#23450;&#20041;&#20102;&#26500;&#36896;&#20989;&#25968;&#65292;&#40664;&#35748;&#26500;&#36896;&#20989;&#25968;&#30340;&#22768;&#26126;&#26159;&#24517;&#39035;&#30340;</span>
  <span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">x, y, z &#34987;&#31867;&#20869;&#21021;&#22987;&#20540;&#21021;&#22987;&#21270;&#20026; 0</span>
  <span style="color: #ef2929;">Particle</span><span style="color: #1f5bff; font-weight: bold;">(</span><span style="color: #1f5bff;">std</span>::<span style="color: #18b2b2;">string</span> <span style="color: #ff8700;">t</span>, <span style="color: #1f5bff;">std</span>::<span style="color: #18b2b2;">string</span> <span style="color: #ff8700;">n</span><span style="color: #1f5bff; font-weight: bold;">)</span>:
    type<span style="color: #1f5bff; font-weight: bold;">(</span>t<span style="color: #1f5bff; font-weight: bold;">)</span>, name<span style="color: #1f5bff; font-weight: bold;">(</span>n<span style="color: #1f5bff; font-weight: bold;">)</span> <span style="color: #1f5bff; font-weight: bold;">{</span> <span style="color: #1f5bff; font-weight: bold;">}</span>
  <span style="color: #00af00;">const</span> <span style="color: #1f5bff;">std</span>::<span style="color: #18b2b2;">string</span> &amp;<span style="color: #ef2929;">get_type</span><span style="color: #1f5bff; font-weight: bold;">()</span> <span style="color: #00af00;">const</span> <span style="color: #1f5bff; font-weight: bold;">{</span> <span style="color: #00af00;">return</span> type; <span style="color: #1f5bff; font-weight: bold;">}</span> <span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">&#38544;&#24335;&#20869;&#32852;</span>
  <span style="color: #00af00;">inline</span> <span style="color: #00af00;">const</span> <span style="color: #1f5bff;">std</span>::<span style="color: #18b2b2;">string</span> &amp;<span style="color: #ef2929;">get_name</span><span style="color: #1f5bff; font-weight: bold;">()</span> <span style="color: #00af00;">const</span>;          <span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">&#26174;&#24335;&#20869;&#32852;</span>
  <span style="color: #18b2b2;">Particle</span> &amp;<span style="color: #ef2929;">move</span><span style="color: #1f5bff; font-weight: bold;">(</span><span style="color: #18b2b2;">pos</span> <span style="color: #ff8700;">x</span>, <span style="color: #18b2b2;">pos</span> <span style="color: #ff8700;">y</span>, <span style="color: #18b2b2;">pos</span> <span style="color: #ff8700;">z</span><span style="color: #1f5bff; font-weight: bold;">)</span>;                 <span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">&#33021;&#22312;&#20043;&#21518;&#34987;&#35774;&#20026;&#20869;&#32852;</span>
<span style="color: #00af00;">private</span>:
  <span style="color: #18b2b2;">pos</span> <span style="color: #ff8700;">x</span> = 0.0;        <span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">&#31890;&#23376;&#20301;&#32622;</span>
  <span style="color: #18b2b2;">pos</span> <span style="color: #ff8700;">y</span> = 0.0;
  <span style="color: #18b2b2;">pos</span> <span style="color: #ff8700;">z</span> = 0.0;
  <span style="color: #1f5bff;">std</span>::<span style="color: #18b2b2;">string</span> <span style="color: #ff8700;">type</span>;   <span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">&#31890;&#23376;&#31867;&#22411;</span>
  <span style="color: #1f5bff;">std</span>::<span style="color: #18b2b2;">string</span> <span style="color: #ff8700;">name</span>;   <span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">&#31890;&#23376;&#21517;&#23383;</span>
<span style="color: #cc0000; font-weight: bold;">}</span>;
</pre>
</div>

<p>
为成员函数添加实现
</p>

<div class="org-src-container">
<pre class="src src-C++"><span style="color: #00af00;">const</span> <span style="color: #1f5bff;">std</span>::<span style="color: #18b2b2;">string</span> &amp;<span style="color: #ef2929;">get_name</span><span style="color: #cc0000; font-weight: bold;">()</span> <span style="color: #00af00;">const</span> <span style="color: #cc0000; font-weight: bold;">{</span>   <span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">&#24050;&#22312;&#31867;&#30340;&#20869;&#37096;&#22768;&#26126;&#20026; inline</span>
  <span style="color: #00af00;">return</span> name;
<span style="color: #cc0000; font-weight: bold;">}</span>

<span style="color: #00af00;">inline</span>                                  <span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">&#21487;&#22312;&#20989;&#25968;&#23450;&#20041;&#22788;&#25351;&#23450; inline</span>
<span style="color: #18b2b2;">Particle</span> &amp;<span style="color: #ef2929;">move</span><span style="color: #cc0000; font-weight: bold;">(</span><span style="color: #18b2b2;">pos</span> <span style="color: #ff8700;">x</span>, <span style="color: #18b2b2;">pos</span> <span style="color: #ff8700;">y</span>, <span style="color: #18b2b2;">pos</span> <span style="color: #ff8700;">z</span><span style="color: #cc0000; font-weight: bold;">)</span> <span style="color: #00af00;">const</span> <span style="color: #cc0000; font-weight: bold;">{</span>
  <span style="color: #00af00;">this</span>-&gt;x = x;
  <span style="color: #00af00;">this</span>-&gt;y = y;
  <span style="color: #00af00;">this</span>-&gt;z = z;
  <span style="color: #00af00;">return</span> *<span style="color: #00af00;">this</span>;
<span style="color: #cc0000; font-weight: bold;">}</span>
</pre>
</div>

<p>
使用 <code>mutable</code> 关键字声明一个可变数据成员
</p>

<div class="org-src-container">
<pre class="src src-C++"><span style="color: #00af00;">class</span> <span style="color: #18b2b2;">Particle</span> <span style="color: #cc0000; font-weight: bold;">{</span>
<span style="color: #00af00;">public</span>:
  <span style="color: #18b2b2;">void</span> <span style="color: #ef2929;">count</span><span style="color: #1f5bff; font-weight: bold;">()</span> <span style="color: #00af00;">const</span>;
  <span style="color: #18b2b2;">size_t</span> <span style="color: #ef2929;">get_count</span><span style="color: #1f5bff; font-weight: bold;">()</span> <span style="color: #1f5bff; font-weight: bold;">{</span> <span style="color: #00af00;">return</span> access_ctr; <span style="color: #1f5bff; font-weight: bold;">}</span>
 <span style="color: #00af00;">private</span>:
  <span style="color: #00af00;">mutable</span> <span style="color: #18b2b2;">size_t</span> <span style="color: #ff8700;">access_ctr</span> = 0;    <span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">&#21363;&#20351;&#22312; const &#23545;&#35937;&#20869;&#20063;&#33021;&#34987;&#20462;&#25913;</span>
  <span style="color: #b2b2b2; font-style: italic;">/*</span>
<span style="color: #b2b2b2; font-style: italic;">   * &#20854;&#23427;&#25104;&#21592;</span>
<span style="color: #b2b2b2; font-style: italic;">   */</span>
<span style="color: #cc0000; font-weight: bold;">}</span>;

<span style="color: #00af00;">inline</span> <span style="color: #18b2b2;">void</span> <span style="color: #1f5bff;">Particle</span>::<span style="color: #ef2929;">count</span><span style="color: #cc0000; font-weight: bold;">()</span> <span style="color: #00af00;">const</span> <span style="color: #cc0000; font-weight: bold;">{</span>
  ++<span style="color: #00af00;">this</span>-&gt;access_ctr;   <span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">&#20445;&#23384;&#19968;&#20010;&#35745;&#25968;&#22120;&#65292;&#29992;&#20110;&#35760;&#24405;&#35843;&#29992;&#27425;&#25968;</span>
                        <span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">&#27492;&#22788;&#30340;&#25351;&#38024;&#26159; const &#20462;&#39280;&#30340;&#20294;&#20173;&#21487;&#20197;&#20462;&#25913;&#25104;&#21592;&#21464;&#37327;</span>
<span style="color: #cc0000; font-weight: bold;">}</span>

<span style="color: #18b2b2;">int</span> <span style="color: #ef2929;">main</span><span style="color: #cc0000; font-weight: bold;">()</span> <span style="color: #cc0000; font-weight: bold;">{</span>
  <span style="color: #18b2b2;">Particle</span> <span style="color: #ff8700;">p</span>;
  p.count<span style="color: #1f5bff; font-weight: bold;">()</span>;
  p.count<span style="color: #1f5bff; font-weight: bold;">()</span>;
  <span style="color: #1f5bff;">std</span>::cout &lt;&lt; <span style="color: #ff1f8b;">"Count is "</span> &lt;&lt; p.get_count<span style="color: #1f5bff; font-weight: bold;">()</span> &lt;&lt; <span style="color: #1f5bff;">std</span>::endl;
<span style="color: #cc0000; font-weight: bold;">}</span>
</pre>
</div>

<pre class="example">
Count is 2
</pre>


<p>
接下来声明一个 <code>Box</code> 类用来装一组 <code>Particle</code> ，这个类包含一个 <code>Particle</code> 类型的 <code>vector</code>
。默认情况下，我们希望 <code>Box</code> 类总是拥有一个默认初始化的 <code>Particle</code>
</p>

<div class="org-src-container">
<pre class="src src-C++"><span style="color: #00af00;">class</span> <span style="color: #18b2b2;">Box</span> <span style="color: #cc0000; font-weight: bold;">{</span>
<span style="color: #00af00;">private</span>:
  <span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">&#40664;&#35748;&#24773;&#20917;&#19979;&#65292;&#19968;&#20010; Box &#21253;&#21547;&#19968;&#20010;&#21407;&#28857;&#22788;&#30340; Particle</span>
  <span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">&#31867;&#20869;&#21021;&#22987;&#21270;&#24517;&#39035;&#20351;&#29992; = &#30340;&#21021;&#22987;&#21270;&#24418;&#24335;&#25110;&#33457;&#25324;&#21495;</span>
  <span style="color: #1f5bff;">std</span>::<span style="color: #18b2b2;">vector</span><span style="color: #1f5bff; font-weight: bold;">&lt;</span>Particle<span style="color: #1f5bff; font-weight: bold;">&gt;</span> <span style="color: #ff8700;">ps</span><span style="color: #1f5bff; font-weight: bold;">{</span>Particle<span style="color: #00af00; font-weight: bold;">(</span><span style="color: #ff1f8b;">"A"</span>, <span style="color: #ff1f8b;">"zero"</span><span style="color: #00af00; font-weight: bold;">)</span><span style="color: #1f5bff; font-weight: bold;">}</span>;
<span style="color: #cc0000; font-weight: bold;">}</span>;
</pre>
</div>
</div>
</div>

<div id="outline-container-org3664589" class="outline-4">
<h4 id="org3664589"><span class="section-number-4">7.3.2</span> 返回 <code>*this</code> 的成员函数</h4>
<div class="outline-text-4" id="text-7-3-2">
<p>
继续添加一些成员函数
</p>

<div class="org-src-container">
<pre class="src src-C++"><span style="color: #b218b2;">#include</span> <span style="color: #cc0000; font-weight: bold;">&lt;</span><span style="color: #ff1f8b;">string</span><span style="color: #cc0000; font-weight: bold;">&gt;</span>
<span style="color: #b218b2;">#include</span> <span style="color: #cc0000; font-weight: bold;">&lt;</span><span style="color: #ff1f8b;">iostream</span><span style="color: #cc0000; font-weight: bold;">&gt;</span>

<span style="color: #00af00;">class</span> <span style="color: #18b2b2;">Particle</span> <span style="color: #cc0000; font-weight: bold;">{</span>
<span style="color: #00af00;">public</span>:
  <span style="color: #18b2b2;">Particle</span> &amp;<span style="color: #ef2929;">set_type</span><span style="color: #1f5bff; font-weight: bold;">(</span><span style="color: #1f5bff;">std</span>::<span style="color: #18b2b2;">string</span> <span style="color: #ff8700;">t</span><span style="color: #1f5bff; font-weight: bold;">)</span>;
  <span style="color: #18b2b2;">Particle</span> &amp;<span style="color: #ef2929;">set_name</span><span style="color: #1f5bff; font-weight: bold;">(</span><span style="color: #1f5bff;">std</span>::<span style="color: #18b2b2;">string</span> <span style="color: #ff8700;">n</span><span style="color: #1f5bff; font-weight: bold;">)</span>;
  <span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">info &#20989;&#25968;&#24182;&#19981;&#25913;&#21464; Particle &#30340;&#25104;&#21592;&#65292;&#22768;&#26126;&#20026; const</span>
  <span style="color: #00af00;">const</span> <span style="color: #18b2b2;">Particle</span> &amp;<span style="color: #ef2929;">info</span><span style="color: #1f5bff; font-weight: bold;">(</span><span style="color: #1f5bff;">std</span>::<span style="color: #18b2b2;">ostream</span> &amp;<span style="color: #ff8700;">os</span><span style="color: #1f5bff; font-weight: bold;">)</span> <span style="color: #00af00;">const</span>;
<span style="color: #00af00;">private</span>:
  <span style="color: #1f5bff;">std</span>::<span style="color: #18b2b2;">string</span> <span style="color: #ff8700;">type</span>;
  <span style="color: #1f5bff;">std</span>::<span style="color: #18b2b2;">string</span> <span style="color: #ff8700;">name</span>;
<span style="color: #cc0000; font-weight: bold;">}</span>;
<span style="color: #00af00;">inline</span> <span style="color: #18b2b2;">Particle</span> &amp;<span style="color: #1f5bff;">Particle</span>::<span style="color: #ef2929;">set_type</span><span style="color: #cc0000; font-weight: bold;">(</span><span style="color: #1f5bff;">std</span>::<span style="color: #18b2b2;">string</span> <span style="color: #ff8700;">t</span><span style="color: #cc0000; font-weight: bold;">)</span> <span style="color: #cc0000; font-weight: bold;">{</span>
  type = t;
  <span style="color: #00af00;">return</span> *<span style="color: #00af00;">this</span>;    <span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">&#23558; this &#23545;&#35937;&#20316;&#20026;&#24038;&#20540;&#36820;&#22238;</span>
<span style="color: #cc0000; font-weight: bold;">}</span>
<span style="color: #00af00;">inline</span> <span style="color: #18b2b2;">Particle</span> &amp;<span style="color: #1f5bff;">Particle</span>::<span style="color: #ef2929;">set_name</span><span style="color: #cc0000; font-weight: bold;">(</span><span style="color: #1f5bff;">std</span>::<span style="color: #18b2b2;">string</span> <span style="color: #ff8700;">n</span><span style="color: #cc0000; font-weight: bold;">)</span> <span style="color: #cc0000; font-weight: bold;">{</span>
  name = n;
  <span style="color: #00af00;">return</span> *<span style="color: #00af00;">this</span>;
<span style="color: #cc0000; font-weight: bold;">}</span>
<span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">&#27880;&#24847;&#27492;&#22788;&#30340;&#20004;&#20010; const&#65292;&#22240;&#20026;&#20256;&#20837;&#30340; this &#23545;&#35937;&#26159; const &#30340;</span>
<span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">&#22240;&#27492;&#36820;&#22238;&#30340;&#23545;&#35937;&#20063;&#24212;&#35813;&#26159; const</span>
<span style="color: #00af00;">inline</span> <span style="color: #00af00;">const</span> <span style="color: #18b2b2;">Particle</span> &amp;<span style="color: #1f5bff;">Particle</span>::<span style="color: #ef2929;">info</span><span style="color: #cc0000; font-weight: bold;">(</span><span style="color: #1f5bff;">std</span>::<span style="color: #18b2b2;">ostream</span> &amp;<span style="color: #ff8700;">os</span><span style="color: #cc0000; font-weight: bold;">)</span> <span style="color: #00af00;">const</span> <span style="color: #cc0000; font-weight: bold;">{</span>
  os &lt;&lt; <span style="color: #ff1f8b;">"Particle "</span> &lt;&lt; name &lt;&lt; <span style="color: #ff1f8b;">" has type "</span> &lt;&lt; type &lt;&lt; <span style="color: #1f5bff;">std</span>::endl;
  <span style="color: #00af00;">return</span> *<span style="color: #00af00;">this</span>;
<span style="color: #cc0000; font-weight: bold;">}</span>

<span style="color: #18b2b2;">int</span> <span style="color: #ef2929;">main</span><span style="color: #cc0000; font-weight: bold;">()</span> <span style="color: #cc0000; font-weight: bold;">{</span>
  <span style="color: #18b2b2;">Particle</span> <span style="color: #ff8700;">p</span>;
  p.set_type<span style="color: #1f5bff; font-weight: bold;">(</span><span style="color: #ff1f8b;">"A"</span><span style="color: #1f5bff; font-weight: bold;">)</span>.set_name<span style="color: #1f5bff; font-weight: bold;">(</span><span style="color: #ff1f8b;">"zero"</span><span style="color: #1f5bff; font-weight: bold;">)</span>.info<span style="color: #1f5bff; font-weight: bold;">(</span><span style="color: #1f5bff;">std</span>::cout<span style="color: #1f5bff; font-weight: bold;">)</span>;     <span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">&#27492;&#26102;&#21487;&#20197;&#20351;&#29992;&#38142;&#24335;&#35843;&#29992;</span>
  <span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">&#20197;&#19979;&#35843;&#29992;&#26159;&#38169;&#35823;&#30340;&#65292;info &#36820;&#22238;&#20102; p &#30340; const &#24341;&#29992;&#65292;&#20316;&#20026; this &#25351;&#38024;&#24120;&#37327;&#23545;&#35937;&#20256;&#20837;&#20102;</span>
  <span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">set_name&#65292;&#32780; set_name &#26399;&#26395;&#19968;&#20010;&#38750;&#24120;&#37327;&#23545;&#35937;&#30340;&#25351;&#38024;</span>
  <span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">p.info(std::cout).set_name("one");</span>
<span style="color: #cc0000; font-weight: bold;">}</span>
</pre>
</div>

<pre class="example">
Particle zero has type A
</pre>


<p>
一种解决办法是对 <code>info</code> 进行重载，并都调用名为 <code>do_info</code> 的私有方法
</p>

<div class="org-src-container">
<pre class="src src-C++"><span style="color: #b218b2;">#include</span> <span style="color: #cc0000; font-weight: bold;">&lt;</span><span style="color: #ff1f8b;">string</span><span style="color: #cc0000; font-weight: bold;">&gt;</span>
<span style="color: #b218b2;">#include</span> <span style="color: #cc0000; font-weight: bold;">&lt;</span><span style="color: #ff1f8b;">iostream</span><span style="color: #cc0000; font-weight: bold;">&gt;</span>

<span style="color: #00af00;">class</span> <span style="color: #18b2b2;">Particle</span> <span style="color: #cc0000; font-weight: bold;">{</span>
<span style="color: #00af00;">public</span>:
  <span style="color: #ef2929;">Particle</span><span style="color: #1f5bff; font-weight: bold;">()</span> = <span style="color: #00af00;">default</span>;
  <span style="color: #ef2929;">Particle</span><span style="color: #1f5bff; font-weight: bold;">(</span><span style="color: #1f5bff;">std</span>::<span style="color: #18b2b2;">string</span> <span style="color: #ff8700;">t</span>, <span style="color: #1f5bff;">std</span>::<span style="color: #18b2b2;">string</span> <span style="color: #ff8700;">n</span><span style="color: #1f5bff; font-weight: bold;">)</span> <span style="color: #1f5bff; font-weight: bold;">{</span>
    type = t;
    name = n;
  <span style="color: #1f5bff; font-weight: bold;">}</span>
  <span style="color: #18b2b2;">Particle</span> &amp;<span style="color: #ef2929;">set_type</span><span style="color: #1f5bff; font-weight: bold;">(</span><span style="color: #1f5bff;">std</span>::<span style="color: #18b2b2;">string</span> <span style="color: #ff8700;">t</span><span style="color: #1f5bff; font-weight: bold;">)</span>;
  <span style="color: #18b2b2;">Particle</span> &amp;<span style="color: #ef2929;">set_name</span><span style="color: #1f5bff; font-weight: bold;">(</span><span style="color: #1f5bff;">std</span>::<span style="color: #18b2b2;">string</span> <span style="color: #ff8700;">n</span><span style="color: #1f5bff; font-weight: bold;">)</span>;
  <span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">&#37325;&#36733;&#30340;&#20004;&#20010; info &#26041;&#27861;</span>
  <span style="color: #18b2b2;">Particle</span> &amp;<span style="color: #ef2929;">info</span><span style="color: #1f5bff; font-weight: bold;">(</span><span style="color: #1f5bff;">std</span>::<span style="color: #18b2b2;">ostream</span> &amp;<span style="color: #ff8700;">os</span><span style="color: #1f5bff; font-weight: bold;">)</span>
  <span style="color: #1f5bff; font-weight: bold;">{</span> do_info<span style="color: #00af00; font-weight: bold;">(</span>os<span style="color: #00af00; font-weight: bold;">)</span>; <span style="color: #00af00;">return</span> *<span style="color: #00af00;">this</span>; <span style="color: #1f5bff; font-weight: bold;">}</span>
  <span style="color: #00af00;">const</span> <span style="color: #18b2b2;">Particle</span> &amp;<span style="color: #ef2929;">info</span><span style="color: #1f5bff; font-weight: bold;">(</span><span style="color: #1f5bff;">std</span>::<span style="color: #18b2b2;">ostream</span> &amp;<span style="color: #ff8700;">os</span><span style="color: #1f5bff; font-weight: bold;">)</span> <span style="color: #00af00;">const</span>
  <span style="color: #1f5bff; font-weight: bold;">{</span> do_info<span style="color: #00af00; font-weight: bold;">(</span>os<span style="color: #00af00; font-weight: bold;">)</span>; <span style="color: #00af00;">return</span> *<span style="color: #00af00;">this</span>; <span style="color: #1f5bff; font-weight: bold;">}</span>
<span style="color: #00af00;">private</span>:
  <span style="color: #1f5bff;">std</span>::<span style="color: #18b2b2;">string</span> <span style="color: #ff8700;">type</span>;
  <span style="color: #1f5bff;">std</span>::<span style="color: #18b2b2;">string</span> <span style="color: #ff8700;">name</span>;
  <span style="color: #18b2b2;">void</span> <span style="color: #ef2929;">do_info</span><span style="color: #1f5bff; font-weight: bold;">(</span><span style="color: #1f5bff;">std</span>::<span style="color: #18b2b2;">ostream</span> &amp;<span style="color: #ff8700;">os</span><span style="color: #1f5bff; font-weight: bold;">)</span> <span style="color: #00af00;">const</span> <span style="color: #1f5bff; font-weight: bold;">{</span>
    os &lt;&lt; <span style="color: #ff1f8b;">"Particle "</span> &lt;&lt; name &lt;&lt; <span style="color: #ff1f8b;">" has type "</span> &lt;&lt; type &lt;&lt; <span style="color: #1f5bff;">std</span>::endl;
  <span style="color: #1f5bff; font-weight: bold;">}</span>
<span style="color: #cc0000; font-weight: bold;">}</span>;
<span style="color: #00af00;">inline</span> <span style="color: #18b2b2;">Particle</span> &amp;<span style="color: #1f5bff;">Particle</span>::<span style="color: #ef2929;">set_type</span><span style="color: #cc0000; font-weight: bold;">(</span><span style="color: #1f5bff;">std</span>::<span style="color: #18b2b2;">string</span> <span style="color: #ff8700;">t</span><span style="color: #cc0000; font-weight: bold;">)</span> <span style="color: #cc0000; font-weight: bold;">{</span>
  type = t;
  <span style="color: #00af00;">return</span> *<span style="color: #00af00;">this</span>;    <span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">&#23558; this &#23545;&#35937;&#20316;&#20026;&#24038;&#20540;&#36820;&#22238;</span>
<span style="color: #cc0000; font-weight: bold;">}</span>
<span style="color: #00af00;">inline</span> <span style="color: #18b2b2;">Particle</span> &amp;<span style="color: #1f5bff;">Particle</span>::<span style="color: #ef2929;">set_name</span><span style="color: #cc0000; font-weight: bold;">(</span><span style="color: #1f5bff;">std</span>::<span style="color: #18b2b2;">string</span> <span style="color: #ff8700;">n</span><span style="color: #cc0000; font-weight: bold;">)</span> <span style="color: #cc0000; font-weight: bold;">{</span>
  name = n;
  <span style="color: #00af00;">return</span> *<span style="color: #00af00;">this</span>;
<span style="color: #cc0000; font-weight: bold;">}</span>

<span style="color: #18b2b2;">int</span> <span style="color: #ef2929;">main</span><span style="color: #cc0000; font-weight: bold;">()</span> <span style="color: #cc0000; font-weight: bold;">{</span>
  <span style="color: #18b2b2;">Particle</span> <span style="color: #ff8700;">p</span>;
  <span style="color: #00af00;">const</span> <span style="color: #18b2b2;">Particle</span> <span style="color: #ff8700;">cp</span><span style="color: #1f5bff; font-weight: bold;">(</span><span style="color: #ff1f8b;">"const"</span>, <span style="color: #ff1f8b;">"one"</span><span style="color: #1f5bff; font-weight: bold;">)</span>;
  p.set_type<span style="color: #1f5bff; font-weight: bold;">(</span><span style="color: #ff1f8b;">"normal"</span><span style="color: #1f5bff; font-weight: bold;">)</span>.set_name<span style="color: #1f5bff; font-weight: bold;">(</span><span style="color: #ff1f8b;">"zero"</span><span style="color: #1f5bff; font-weight: bold;">)</span>.info<span style="color: #1f5bff; font-weight: bold;">(</span><span style="color: #1f5bff;">std</span>::cout<span style="color: #1f5bff; font-weight: bold;">)</span>; <span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">&#35843;&#29992;&#38750;&#24120;&#37327;&#29256;&#26412;&#65292;info &#36820;&#22238;&#20102;&#38750;&#24120;&#37327;&#23545;&#35937;</span>
  cp.info<span style="color: #1f5bff; font-weight: bold;">(</span><span style="color: #1f5bff;">std</span>::cout<span style="color: #1f5bff; font-weight: bold;">)</span>;                                    <span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">&#35843;&#29992;&#24120;&#37327;&#29256;&#26412;&#65292;info &#36820;&#22238;&#20102;&#24120;&#37327;&#23545;&#35937;</span>
<span style="color: #cc0000; font-weight: bold;">}</span>
</pre>
</div>

<pre class="example">
Particle zero has type normal
Particle one has type const
</pre>
</div>
</div>

<div id="outline-container-org97dd44c" class="outline-4">
<h4 id="org97dd44c"><span class="section-number-4">7.3.3</span> 类类型</h4>
<div class="outline-text-4" id="text-7-3-3">
<p>
每个类定义了一个唯一的类型，对于两个类，即使它们的成员完全一样，这两个类也是不同
的。两个类中的同名成员因处在不同的作用域，也不是一回事。
</p>

<div class="org-src-container">
<pre class="src src-C++"><span style="color: #00af00;">struct</span> <span style="color: #18b2b2;">First</span> <span style="color: #cc0000; font-weight: bold;">{</span>
  <span style="color: #18b2b2;">int</span> <span style="color: #ff8700;">memi</span>;
  <span style="color: #18b2b2;">int</span> <span style="color: #ef2929;">getMem</span><span style="color: #1f5bff; font-weight: bold;">()</span>;
<span style="color: #cc0000; font-weight: bold;">}</span>;

<span style="color: #00af00;">struct</span> <span style="color: #18b2b2;">Second</span> <span style="color: #cc0000; font-weight: bold;">{</span>
  <span style="color: #18b2b2;">int</span> <span style="color: #ff8700;">memi</span>;
  <span style="color: #18b2b2;">int</span> <span style="color: #ef2929;">getMem</span><span style="color: #1f5bff; font-weight: bold;">()</span>;
<span style="color: #cc0000; font-weight: bold;">}</span>;

<span style="color: #18b2b2;">First</span> <span style="color: #ff8700;">obj1</span>;
<span style="color: #18b2b2;">Second</span> <span style="color: #ff8700;">obj2</span> = obj1;    <span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">&#38169;&#35823;&#65306;obj1 &#21644; obj2 &#26159;&#19981;&#21516;&#30340;&#31867;&#22411;</span>

<span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">&#23545;&#20110;&#31867;&#26469;&#35828;&#65292;&#20197;&#19979;&#19977;&#31181;&#23450;&#20041;&#26159;&#31561;&#20215;&#30340;</span>
<span style="color: #18b2b2;">First</span> <span style="color: #ff8700;">obj</span>;
<span style="color: #00af00;">class</span> <span style="color: #18b2b2;">Fisrt</span> <span style="color: #ff8700;">obj</span>;
<span style="color: #00af00;">struct</span> <span style="color: #18b2b2;">First</span> <span style="color: #ff8700;">obj</span>;
</pre>
</div>

<p>
类的声明可以与定义分离
</p>

<div class="org-src-container">
<pre class="src src-C++"><span style="color: #00af00;">class</span> <span style="color: #18b2b2;">Particle</span>;     <span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">Particle &#31867;&#30340;&#22768;&#26126;&#65292;&#20063;&#31216;&#20026;&#21069;&#21521;&#22768;&#26126;</span>

<span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">&#25105;&#20204;&#24517;&#39035;&#23436;&#25104;&#31867;&#30340;&#23450;&#20041;&#32534;&#35793;&#22120;&#25165;&#33021;&#30693;&#36947;&#31867;&#21344;&#29992;&#30340;&#31354;&#38388;&#65292;&#22240;&#27492;&#31867;&#30340;&#25104;&#21592;&#19981;&#33021;&#26159;&#33258;&#24049;</span>
<span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">&#20294;&#26377;&#19968;&#31181;&#29305;&#27530;&#24773;&#20917;&#65292;&#31867;&#20013;&#21487;&#21253;&#21547;&#33258;&#36523;&#31867;&#22411;&#30340;&#24341;&#29992;&#25110;&#25351;&#38024;&#65292;&#20063;&#23601;&#26159;&#24120;&#29992;&#30340;&#38142;&#34920;</span>
<span style="color: #00af00;">class</span> <span style="color: #18b2b2;">Link_particle</span> <span style="color: #cc0000; font-weight: bold;">{</span>
  <span style="color: #18b2b2;">Particle</span> <span style="color: #ff8700;">p</span>;
  <span style="color: #18b2b2;">Link_particle</span> *<span style="color: #ff8700;">next</span>;
  <span style="color: #18b2b2;">Link_particle</span> *<span style="color: #ff8700;">prev</span>;
<span style="color: #cc0000; font-weight: bold;">}</span>;

<span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">&#24403;&#19968;&#20010;&#31867;&#21253;&#21547;&#21478;&#19968;&#20010;&#31867;&#26102;&#27880;&#24847;&#22768;&#26126;&#39034;&#24207;</span>
<span style="color: #00af00;">class</span> <span style="color: #18b2b2;">A</span>;
<span style="color: #00af00;">class</span> <span style="color: #18b2b2;">B</span> <span style="color: #cc0000; font-weight: bold;">{</span>
  <span style="color: #00af00;">class</span> <span style="color: #18b2b2;">A</span> *<span style="color: #ff8700;">ptr</span>;
<span style="color: #cc0000; font-weight: bold;">}</span>;
<span style="color: #00af00;">class</span> <span style="color: #18b2b2;">A</span> <span style="color: #cc0000; font-weight: bold;">{</span>
  <span style="color: #00af00;">class</span> <span style="color: #18b2b2;">B</span> <span style="color: #ff8700;">b</span>;
<span style="color: #cc0000; font-weight: bold;">}</span>;
</pre>
</div>
</div>
</div>

<div id="outline-container-org63c9439" class="outline-4">
<h4 id="org63c9439"><span class="section-number-4">7.3.4</span> 友元再探</h4>
<div class="outline-text-4" id="text-7-3-4">
<p>
除函数外，也可以把一个类定义成友元，同样以前面的 <code>Particle</code> 和 <code>Box</code> 类为例
</p>

<div class="org-src-container">
<pre class="src src-C++"><span style="color: #b218b2;">#include</span> <span style="color: #cc0000; font-weight: bold;">&lt;</span><span style="color: #ff1f8b;">iostream</span><span style="color: #cc0000; font-weight: bold;">&gt;</span>
<span style="color: #b218b2;">#include</span> <span style="color: #cc0000; font-weight: bold;">&lt;</span><span style="color: #ff1f8b;">string</span><span style="color: #cc0000; font-weight: bold;">&gt;</span>
<span style="color: #b218b2;">#include</span> <span style="color: #cc0000; font-weight: bold;">&lt;</span><span style="color: #ff1f8b;">vector</span><span style="color: #cc0000; font-weight: bold;">&gt;</span>

<span style="color: #00af00;">class</span> <span style="color: #18b2b2;">Box</span>;

<span style="color: #00af00;">class</span> <span style="color: #18b2b2;">Particle</span> <span style="color: #cc0000; font-weight: bold;">{</span>
<span style="color: #00af00;">public</span>:
  <span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">&#23558; Box &#31867;&#23450;&#20041;&#20026;&#21451;&#20803;&#65292;Box &#21487;&#35775;&#38382; Particle &#23545;&#35937;&#20013;&#30340;&#31169;&#26377;&#37096;&#20998;</span>
  <span style="color: #00af00;">friend</span> <span style="color: #00af00;">class</span> <span style="color: #18b2b2;">Box</span>;
  <span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">&#23558;&#21451;&#20803;&#20989;&#25968;&#23450;&#20041;&#22312;&#31867;&#20013;&#65292;&#27492;&#26102;&#35813;&#20989;&#25968;&#20026;&#38544;&#24335;&#20869;&#32852;</span>
  <span style="color: #00af00;">friend</span> <span style="color: #1f5bff;">std</span>::<span style="color: #18b2b2;">ostream</span> &amp;<span style="color: #00af00;">operator</span><span style="color: #ef2929;">&lt;&lt;</span><span style="color: #1f5bff; font-weight: bold;">(</span><span style="color: #1f5bff;">std</span>::<span style="color: #18b2b2;">ostream</span> &amp;<span style="color: #ff8700;">os</span>, <span style="color: #00af00;">const</span> <span style="color: #18b2b2;">Particle</span> &amp;<span style="color: #ff8700;">p</span><span style="color: #1f5bff; font-weight: bold;">)</span> <span style="color: #1f5bff; font-weight: bold;">{</span>
    os &lt;&lt; <span style="color: #ff1f8b;">"Particle "</span> &lt;&lt; p.name &lt;&lt; <span style="color: #ff1f8b;">" has type "</span> &lt;&lt; p.type &lt;&lt; <span style="color: #1f5bff;">std</span>::endl;
    <span style="color: #00af00;">return</span> os;
  <span style="color: #1f5bff; font-weight: bold;">}</span>
  <span style="color: #ef2929;">Particle</span><span style="color: #1f5bff; font-weight: bold;">()</span> = <span style="color: #00af00;">default</span>;
  <span style="color: #ef2929;">Particle</span><span style="color: #1f5bff; font-weight: bold;">(</span><span style="color: #1f5bff;">std</span>::<span style="color: #18b2b2;">string</span> <span style="color: #ff8700;">t</span>, <span style="color: #1f5bff;">std</span>::<span style="color: #18b2b2;">string</span> <span style="color: #ff8700;">n</span><span style="color: #1f5bff; font-weight: bold;">)</span>
    :type<span style="color: #1f5bff; font-weight: bold;">(</span>t<span style="color: #1f5bff; font-weight: bold;">)</span>, name<span style="color: #1f5bff; font-weight: bold;">(</span>n<span style="color: #1f5bff; font-weight: bold;">)</span> <span style="color: #1f5bff; font-weight: bold;">{</span> <span style="color: #1f5bff; font-weight: bold;">}</span>
<span style="color: #00af00;">private</span>:
  <span style="color: #18b2b2;">float</span> <span style="color: #ff8700;">x</span> = 0.0;
  <span style="color: #18b2b2;">float</span> <span style="color: #ff8700;">y</span> = 0.0;
  <span style="color: #18b2b2;">float</span> <span style="color: #ff8700;">z</span> = 0.0;
  <span style="color: #1f5bff;">std</span>::<span style="color: #18b2b2;">string</span> <span style="color: #ff8700;">type</span>;
  <span style="color: #1f5bff;">std</span>::<span style="color: #18b2b2;">string</span> <span style="color: #ff8700;">name</span>;
<span style="color: #cc0000; font-weight: bold;">}</span>;

<span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">&#21451;&#20803;&#20989;&#25968;&#21487;&#20197;&#22312;&#31867;&#20869;&#23450;&#20041;&#65292;&#20294;&#19968;&#23450;&#35201;&#22312;&#31867;&#22806;&#22768;&#26126;</span>
<span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">&#22240;&#20026;&#21451;&#20803;&#30340;&#22768;&#26126;&#30340;&#20316;&#29992;&#20165;&#20165;&#26159;&#24433;&#21709;&#35775;&#38382;&#26435;&#38480;&#65292;&#24182;&#38750;&#30495;&#27491;&#24847;&#20041;&#19978;&#30340;&#22768;&#26126;</span>
<span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">&#21516;&#26102;&#21451;&#20803;&#20989;&#25968;&#20063;&#24182;&#38750;&#35813;&#31867;&#30340;&#25104;&#21592;&#65292;&#19968;&#20123;&#32534;&#35793;&#22120;&#20250;&#23545;&#27492;&#36827;&#34892;&#26816;&#26597;</span>
<span style="color: #1f5bff;">std</span>::<span style="color: #18b2b2;">ostream</span> &amp;<span style="color: #00af00;">operator</span><span style="color: #ef2929;">&lt;&lt;</span><span style="color: #cc0000; font-weight: bold;">(</span><span style="color: #1f5bff;">std</span>::<span style="color: #18b2b2;">ostream</span> &amp;<span style="color: #ff8700;">os</span>, <span style="color: #00af00;">const</span> <span style="color: #18b2b2;">Particle</span> &amp;<span style="color: #ff8700;">p</span><span style="color: #cc0000; font-weight: bold;">)</span>;

<span style="color: #00af00;">class</span> <span style="color: #18b2b2;">Box</span> <span style="color: #cc0000; font-weight: bold;">{</span>
<span style="color: #00af00;">public</span>:
  <span style="color: #00af00;">friend</span> <span style="color: #1f5bff;">std</span>::<span style="color: #18b2b2;">ostream</span> &amp;<span style="color: #00af00;">operator</span><span style="color: #ef2929;">&lt;&lt;</span><span style="color: #1f5bff; font-weight: bold;">(</span><span style="color: #1f5bff;">std</span>::<span style="color: #18b2b2;">ostream</span> &amp;<span style="color: #ff8700;">os</span>, <span style="color: #00af00;">const</span> <span style="color: #18b2b2;">Box</span> &amp;<span style="color: #ff8700;">box</span><span style="color: #1f5bff; font-weight: bold;">)</span>;
  <span style="color: #ef2929;">Box</span><span style="color: #1f5bff; font-weight: bold;">()</span> = <span style="color: #00af00;">default</span>;
  <span style="color: #ef2929;">Box</span><span style="color: #1f5bff; font-weight: bold;">(</span><span style="color: #1f5bff;">std</span>::<span style="color: #18b2b2;">vector</span><span style="color: #00af00; font-weight: bold;">&lt;</span><span style="color: #18b2b2;">Particle</span><span style="color: #00af00; font-weight: bold;">&gt;</span> <span style="color: #ff8700;">vp</span><span style="color: #1f5bff; font-weight: bold;">)</span> :particles<span style="color: #1f5bff; font-weight: bold;">(</span>vp<span style="color: #1f5bff; font-weight: bold;">)</span> <span style="color: #1f5bff; font-weight: bold;">{</span> <span style="color: #1f5bff; font-weight: bold;">}</span>
  <span style="color: #b2b2b2; font-style: italic;">// </span><span style="color: #b2b2b2; font-style: italic;">&#23558; Box &#20013;&#30340;&#25152;&#26377;&#31867;&#22411;&#20026; ori_type &#30340; Particle &#23545;&#35937;&#37117;&#35774;&#32622;&#20026; new_type</span>
  <span style="color: #18b2b2;">size_t</span> <span style="color: #ef2929;">set_type</span><span style="color: #1f5bff; font-weight: bold;">(</span><span style="color: #1f5bff;">std</span>::<span style="color: #18b2b2;">string</span> <span style="color: #ff8700;">ori_type</span>, <span style="color: #1f5bff;">std</span>::<span style="color: #18b2b2;">string</span> <span style="color: #ff8700;">new_type</span><span style="color: #1f5bff; font-weight: bold;">)</span>;
<span style="color: #00af00;">private</span>:
  <span style="color: #1f5bff;">std</span>::<span style="color: #18b2b2;">vector</span><span style="color: #1f5bff; font-weight: bold;">&lt;</span><span style="color: #18b2b2;">Particle</span><span style="color: #1f5bff; font-weight: bold;">&gt;</span> <span style="color: #ff8700;">particles</span>;
<span style="color: #cc0000; font-weight: bold;">}</span>;

<span style="color: #1f5bff;">std</span>::<span style="color: #18b2b2;">ostream</span> &amp;<span style="color: #00af00;">operator</span><span style="color: #ef2929;">&lt;&lt;</span><span style="color: #cc0000; font-weight: bold;">(</span><span style="color: #1f5bff;">std</span>::<span style="color: #18b2b2;">ostream</span> &amp;<span style="color: #ff8700;">os</span>, <span style="color: #00af00;">const</span> <span style="color: #18b2b2;">Box</span> &amp;<span style="color: #ff8700;">box</span><span style="color: #cc0000; font-weight: bold;">)</span> <span style="color: #cc0000; font-weight: bold;">{</span>
  <span style="color: #00af00;">for</span> <span style="color: #1f5bff; font-weight: bold;">(</span><span style="color: #00af00;">const</span> <span style="color: #18b2b2;">Particle</span> &amp;<span style="color: #ff8700;">p</span> : box.particles<span style="color: #1f5bff; font-weight: bold;">)</span>
    os &lt;&lt; p;
  <span style="color: #00af00;">return</span> os;
<span style="color: #cc0000; font-weight: bold;">}</span>

<span style="color: #00af00;">inline</span> <span style="color: #18b2b2;">size_t</span> <span style="color: #1f5bff;">Box</span>::<span style="color: #ef2929;">set_type</span><span style="color: #cc0000; font-weight: bold;">(</span><span style="color: #1f5bff;">std</span>::<span style="color: #18b2b2;">string</span> <span style="color: #ff8700;">ori_type</span>, <span style="color: #1f5bff;">std</span>::<span style="color: #18b2b2;">string</span> <span style="color: #ff8700;">new_type</span><span style="color: #cc0000; font-weight: bold;">)</span> <span style="color: #cc0000; font-weight: bold;">{</span>
  <span style="color: #18b2b2;">size_t</span> <span style="color: #ff8700;">count</span> = 0;
  <span style="color: #00af00;">for</span> <span style="color: #1f5bff; font-weight: bold;">(</span><span style="color: #18b2b2;">Particle</span> &amp;<span style="color: #ff8700;">p</span> : particles<span style="color: #1f5bff; font-weight: bold;">)</span> <span style="color: #1f5bff; font-weight: bold;">{</span>
    <span style="color: #00af00;">if</span> <span style="color: #00af00; font-weight: bold;">(</span>p.type == ori_type<span style="color: #00af00; font-weight: bold;">)</span> <span style="color: #00af00; font-weight: bold;">{</span>
      p.type = new_type;
      ++count;
    <span style="color: #00af00; font-weight: bold;">}</span>
  <span style="color: #1f5bff; font-weight: bold;">}</span>
  <span style="color: #00af00;">return</span> count;
<span style="color: #cc0000; font-weight: bold;">}</span>

<span style="color: #18b2b2;">int</span> <span style="color: #ef2929;">main</span><span style="color: #cc0000; font-weight: bold;">()</span> <span style="color: #cc0000; font-weight: bold;">{</span>
  <span style="color: #18b2b2;">Particle</span> <span style="color: #ff8700;">p1</span><span style="color: #1f5bff; font-weight: bold;">(</span><span style="color: #ff1f8b;">"A"</span>, <span style="color: #ff1f8b;">"zero"</span><span style="color: #1f5bff; font-weight: bold;">)</span>;
  <span style="color: #18b2b2;">Particle</span> <span style="color: #ff8700;">p2</span><span style="color: #1f5bff; font-weight: bold;">(</span><span style="color: #ff1f8b;">"A"</span>, <span style="color: #ff1f8b;">"one"</span><span style="color: #1f5bff; font-weight: bold;">)</span>;
  <span style="color: #18b2b2;">Particle</span> <span style="color: #ff8700;">p3</span><span style="color: #1f5bff; font-weight: bold;">(</span><span style="color: #ff1f8b;">"B"</span>, <span style="color: #ff1f8b;">"two"</span><span style="color: #1f5bff; font-weight: bold;">)</span>;
  <span style="color: #18b2b2;">Box</span> <span style="color: #ff8700;">box</span><span style="color: #1f5bff; font-weight: bold;">(</span><span style="color: #00af00; font-weight: bold;">{</span>p1, p2, p3<span style="color: #00af00; font-weight: bold;">}</span><span style="color: #1f5bff; font-weight: bold;">)</span>;
  <span style="color: #1f5bff;">std</span>::cout &lt;&lt; <span style="color: #ff1f8b;">"Before set type."</span> &lt;&lt; <span style="color: #1f5bff;">std</span>::endl;
  <span style="color: #1f5bff;">std</span>::cout &lt;&lt; box;

  <span style="color: #00af00;">auto</span> <span style="color: #ff8700;">count</span> = box.set_type<span style="color: #1f5bff; font-weight: bold;">(</span><span style="color: #ff1f8b;">"A"</span>, <span style="color: #ff1f8b;">"C"</span><span style="color: #1f5bff; font-weight: bold;">)</span>;
  <span style="color: #1f5bff;">std</span>::cout &lt;&lt; <span style="color: #ff1f8b;">"\nTotally "</span> &lt;&lt; count &lt;&lt; <span style="color: #ff1f8b;">" particles from type A to type C."</span> &lt;&lt; <span style="color: #1f5bff;">std</span>::endl;
  <span style="color: #1f5bff;">std</span>::cout &lt;&lt; <span style="color: #ff1f8b;">"\nAfter set type."</span> &lt;&lt; <span style="color: #1f5bff;">std</span>::endl;
  <span style="color: #1f5bff;">std</span>::cout &lt;&lt; box;
<span style="color: #cc0000; font-weight: bold;">}</span>
</pre>
</div>

<pre class="example">
Before set type.
Particle zero has type A
Particle one has type A
Particle two has type B

Totally 2 particles from type A to type C.

After set type.
Particle zero has type C
Particle one has type C
Particle two has type B
</pre>
</div>
</div>
</div>
</div>
</div>
<div id="postamble" class="status">
<div id="author-info">
      <div id="author">Author: Cycoe (cycoejoo@163.com)</div>
      <div id="date">Date: <2020-05-27 Wed 21:31></div>
      <div id="generator">Generator: <a href="https://www.gnu.org/software/emacs/">Emacs</a> 28.0.50 (<a href="https://orgmode.org">Org</a> mode 9.3)</div>
      <div id="built">Built: <2020-06-08 Mon 19:47></div>
      </div><div id="copyright">
    <img id="cc" src="/static/img/Cc-logo-128x128.png" height="14px" width="14px"/>本站文章如未特殊声明，默认采用<a href="http://creativecommons.org/licenses/by-nc-sa/2.5/cn/" target="_blank">署名-非商业性使用-相同方式共享 2.5 中国大陆</a>进行许可。
</div>
</div>
</body>
</html>
