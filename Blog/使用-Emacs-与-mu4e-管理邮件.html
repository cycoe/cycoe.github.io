<!DOCTYPE html>
<html lang="en">
<head>
<!-- 2021-05-31 Mon 18:29 -->
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>使用 Emacs 与 mu4e 管理邮件</title>
<meta name="generator" content="Org mode">
<meta name="author" content="Cycoe">
<link rel="stylesheet" type="text/css" href="/static/css/default.css" />
<link rel="shortcut icon" type="image/png" href="/static/img/favicon.png"/>
<script language="JavaScript" type="text/javascript" src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.min.js"></script>
<script language="JavaScript" type="text/javascript" src="/static/js/main.js"></script>
</head>
<body>
<div id="preamble" class="status">
<div id="top-container">
  <a id="site-name" href="/">Cycoe<span id="at-home">@Home</span></a>
  <div id="banner">Keep It Simple Stupid</div>
</div>

<div id="top-nav">
  <div id="nav-wrapper">
    <div class="nav-btn" id="toc-wrapper">
      <span class="vertical-align">Ξ</span>
      <div id="go-top">
        <a href="javascript:window.scrollTo(0,0)" style="color: black !important; border-bottom: none !important;" class="tooltip" title="Go to the top of the page">
        <span class="top">&uarr;</span>
        </a></div>
    </div>
    <div id="nav-left-wrapper">
      <a class="nav-btn" id="photo-entry" href="/Photo/index.html" title="Photo">Photo</a>
      <a class="nav-btn" id="about-entry" href="/about.html" title="About Me">About</a>
      <div id="nav-title-wrapper">
        <span id="nav-title">使用 Emacs 与 mu4e 管理邮件</span>
        <span id="nav-date">Written @<2020-02-28 Fri 23:03></span>
      </div>
    </div>
  </div>
</div>

<!-- The Modal -->
<div id="img-modal" class="modal">
  <!-- The Close Button -->
  <span class="close">&times;</span>
  <!-- Modal Content (The Image) -->
  <img class="modal-content" id="img-wrapper">
  <!-- Modal Caption (Image Text) -->
  <div id="caption"></div>
</div>
</div>
<div id="content">
<header>
<h1 class="title">使用 Emacs 与 mu4e 管理邮件</h1>
</header><nav id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#orgbcc9def">1. 邮件同步</a>
<ul>
<li><a href="#orge486f32">1.1. offlineimap 配置</a>
<ul>
<li><a href="#org632c82a">1.1.1. 安装</a></li>
<li><a href="#org5ad26cc">1.1.2. 配置</a></li>
</ul>
</li>
<li><a href="#org985ab5b">1.2. isync 配置</a>
<ul>
<li><a href="#org9251693">1.2.1. 安装</a></li>
<li><a href="#org824136a">1.2.2. 配置</a></li>
</ul>
</li>
<li><a href="#org8dad293">1.3. Unsafe login</a></li>
</ul>
</li>
<li><a href="#orgc8e372a">2. mu 邮件管理器</a>
<ul>
<li><a href="#orgb332c99">2.1. 安装</a></li>
<li><a href="#org4207d7a">2.2. 配置 mu</a></li>
</ul>
</li>
<li><a href="#org4d4de27">3. mu4e 多账户设置</a></li>
<li><a href="#orgab77f70">4. 配置 smtp 发送邮件</a></li>
<li><a href="#orgba3cc70">5. 使用 Org mode 编辑新邮件</a></li>
<li><a href="#org8f4c560">6. 将邮件加入 TODO 列表中</a></li>
</ul>
</div>
</nav>
<p>
在 Linux 下面其实有很多可以使用的邮件客户端，如 KDE 项目中的 Kmail、Gnome 项目
中的 Evolution 和 Mozilla 家族的 Thunderbird。这些客户端都只是简单地试用过，正
好最近将开发编辑器和写作环境从 Neovim 迁到了 Emacs。作为一个操作系统，不能管理
邮件怎么说的过去。可以利用 Emacs 的界面进行邮件管理，可以用 Org-mode 进行邮件写
作，甚至可以用 elisp 写一些插件，岂不美哉？趁最近放假赶紧折腾一下。
</p>

<!-- more -->

<div id="outline-container-orgbcc9def" class="outline-2">
<h2 id="orgbcc9def"><span class="section-number-2">1</span> 邮件同步</h2>
<div class="outline-text-2" id="text-1">
<p>
查看其他的博客，发现同步博客最常用的协议是 IMAP。Linux 下支持 IMAP 协议并且下载
下来的目录结构是 MailDir 结构的工具主要有两个，offlineimap 和 isync。
</p>
</div>
<div id="outline-container-orge486f32" class="outline-3">
<h3 id="orge486f32"><span class="section-number-3">1.1</span> offlineimap 配置</h3>
<div class="outline-text-3" id="text-1-1">
<p>
offlineimap 是一个由 Python 写成的 IMAP 同步工具，主要的缺点是依赖 Python2 的库，
并且同步速度不如 isync，因此仅作记录。
</p>
</div>
<div id="outline-container-org632c82a" class="outline-4">
<h4 id="org632c82a"><span class="section-number-4">1.1.1</span> 安装</h4>
<div class="outline-text-4" id="text-1-1-1">
<p>
在 Archlinux 中，可以直接从 community 仓库中安装。
</p>
<div class="org-src-container">
<pre class="src src-sh">sudo pacman -S offlineimap
</pre>
</div>
</div>
</div>
<div id="outline-container-org5ad26cc" class="outline-4">
<h4 id="org5ad26cc"><span class="section-number-4">1.1.2</span> 配置</h4>
<div class="outline-text-4" id="text-1-1-2">
<p>
安装完成，要进行配置，需要创建一个 ~/.offlineimaprc 文件进行配置。详细的配置过程如下：
</p>
<div class="org-src-container">
<pre class="src src-bash"><span style="color: #51afef;">[</span>general<span style="color: #51afef;">]</span>
<span style="color: #5B6268;"># </span><span style="color: #5B6268;">&#27492;&#22788;&#21015;&#20986;&#25152;&#26377;&#35201;&#21516;&#27493;&#30340;&#36134;&#25143;&#21517;&#65292;&#19982;&#19979;&#26041; [Account] &#33410;&#20013;&#30340;&#21517;&#23383;&#35201;&#19968;&#33268;</span>
accounts = Netease, QQ
maxsyncaccounts = 3

<span style="color: #51afef;">[</span>Account Netease<span style="color: #51afef;">]</span>
<span style="color: #5B6268;"># </span><span style="color: #5B6268;">&#32465;&#23450;&#20179;&#24211;&#65292;&#19982;&#19979;&#26041;&#30340; [Repository] &#33410;&#20013;&#30340;&#21517;&#23383;&#19968;&#33268;</span>
localrepository = NeteaseLocal
remoterepository = NeteaseRemote

<span style="color: #51afef;">[</span>Repository NeteaseLocal<span style="color: #51afef;">]</span>
<span style="color: #c678dd;">type</span> = Maildir
<span style="color: #5B6268;"># </span><span style="color: #5B6268;">&#25351;&#23450;&#26412;&#22320;&#20445;&#23384;&#30340;&#36335;&#24452;</span>
localfolders = /data/cycoe/Documents/mail/myneteasemail@163.com

<span style="color: #51afef;">[</span>Repository NeteaseRemote<span style="color: #51afef;">]</span>
<span style="color: #c678dd;">type</span> = IMAP
<span style="color: #5B6268;"># </span><span style="color: #5B6268;">&#36828;&#31243; imap &#20027;&#26426;</span>
remotehost = imap.163.com
<span style="color: #5B6268;"># </span><span style="color: #5B6268;">&#37038;&#31665;&#22320;&#22336;</span>
remoteuser = myneteasemail@163.com
<span style="color: #5B6268;"># </span><span style="color: #5B6268;">&#37038;&#31665;&#23494;&#30721;</span>
remotepass = ********
ssl = yes
<span style="color: #5B6268;"># </span><span style="color: #5B6268;">*&#38750;&#24120;&#37325;&#35201;* &#21542;&#21017;&#25552;&#31034;&#30830;&#23454; CA &#35777;&#20070;</span>
sslcacertfile = /etc/ssl/certs/ca-certificates.crt
maxconnections = 1
<span style="color: #5B6268;"># </span><span style="color: #5B6268;">&#26159;&#21542;&#20174;&#26381;&#21153;&#22120;&#19978;&#21024;&#38500;&#37038;&#20214;</span>
realdelete = no

<span style="color: #51afef;">[</span>Account QQ<span style="color: #51afef;">]</span>
localrepository = QQLocal
remoterepository = QQRemote

<span style="color: #51afef;">[</span>Repository QQLocal<span style="color: #51afef;">]</span>
<span style="color: #c678dd;">type</span> = Maildir
localfolders = /data/cycoe/Documents/mail/myqqmail@qq.com

<span style="color: #51afef;">[</span>Repository QQRemote<span style="color: #51afef;">]</span>
<span style="color: #c678dd;">type</span> = IMAP
remotehost = imap.qq.com
remoteuser = myqqmail@qq.com
remotepass = ***********
ssl = yes
sslcacertfile = /etc/ssl/certs/ca-certificates.crt
maxconnections = 1
realdelete = no
</pre>
</div>
<p>
至此，通过 <code>offlineimap -a Netease</code> 就可以同步指定的账户。
</p>
</div>
</div>
</div>
<div id="outline-container-org985ab5b" class="outline-3">
<h3 id="org985ab5b"><span class="section-number-3">1.2</span> isync 配置</h3>
<div class="outline-text-3" id="text-1-2">
<p>
isync 是一个由 C++ 写成的 IMAP 同步工具，经测试同步速度要比 offlineimap 更快，但
是同步出来的邮件数量比 offlineimap 更多不知道是怎么回事，目前主要使用这个。
</p>
</div>
<div id="outline-container-org9251693" class="outline-4">
<h4 id="org9251693"><span class="section-number-4">1.2.1</span> 安装</h4>
<div class="outline-text-4" id="text-1-2-1">
<p>
在 Archlinux 中，可以直接从 community 仓库中安装。
</p>
<div class="org-src-container">
<pre class="src src-sh">sudo pacman -S isync
</pre>
</div>
</div>
</div>
<div id="outline-container-org824136a" class="outline-4">
<h4 id="org824136a"><span class="section-number-4">1.2.2</span> 配置</h4>
<div class="outline-text-4" id="text-1-2-2">
<p>
isync 的配置方式与 offlineimap 类似，将如下配置放在 '~/.mbsyncrc' 中，并运行
`mbsync Netease` 即可更新 Netease 频道，mbsync 以频道的概念管理多个邮箱，可以通
过类似以下多个配置实现多邮箱管理。
</p>
<div class="org-src-container">
<pre class="src src-bash">IMAPAccount Netease
<span style="color: #5B6268;"># </span><span style="color: #5B6268;">Address to connect to</span>
Host imap.163.com
User myneteasemail@163.com
Pass **********
<span style="color: #5B6268;"># </span><span style="color: #5B6268;">To store the password in an encrypted file use PassCmd instead of Pass</span>
<span style="color: #5B6268;"># </span><span style="color: #5B6268;">PassCmd "gpg2 -q --for-your-eyes-only --no-tty -d ~/.mailpass.gpg"</span>
<span style="color: #5B6268;">#</span>
<span style="color: #5B6268;"># </span><span style="color: #5B6268;">Use SSL</span>
SSLType IMAPS
<span style="color: #5B6268;"># </span><span style="color: #5B6268;">The following line should work. If get certificate errors, uncomment the two following lines and read the "Troubleshooting" section.</span>
CertificateFile /etc/ssl/certs/ca-certificates.crt
<span style="color: #5B6268;">#</span><span style="color: #5B6268;">CertificateFile ~/.cert/imap.gmail.com.pem</span>
<span style="color: #5B6268;">#</span><span style="color: #5B6268;">CertificateFile ~/.cert/Equifax_Secure_CA.pem</span>

IMAPStore Netease-remote
Account Netease

MaildirStore Netease-local
Subfolders Verbatim
<span style="color: #5B6268;"># </span><span style="color: #5B6268;">The trailing "/" is important</span>
Path /data/cycoe/Documents/mail/myneteasemail@163.com/
Inbox /data/cycoe/Documents/mail/myneteasemail@163.com/INBOX

Channel Netease
Master :Netease-remote:
Slave :Netease-local:
<span style="color: #5B6268;"># </span><span style="color: #5B6268;">Exclude everything under the internal [Gmail] folder, except the interesting folders</span>
Patterns * !<span style="color: #51afef;">[</span>myneteasemail@163.com<span style="color: #51afef;">]</span>* <span style="color: #98be65;">"[myneteasemail@163.com]/INBOX"</span>
<span style="color: #5B6268;"># </span><span style="color: #5B6268;">Or include everything</span>
<span style="color: #5B6268;">#</span><span style="color: #5B6268;">Patterns *</span>
<span style="color: #5B6268;"># </span><span style="color: #5B6268;">Automatically create missing mailboxes, both locally and on the server</span>
Create Both
<span style="color: #5B6268;"># </span><span style="color: #5B6268;">Save the synchronization state files in the relevant directory</span>
SyncState *


IMAPAccount QQ
<span style="color: #5B6268;"># </span><span style="color: #5B6268;">Address to connect to</span>
Host imap.qq.com
User myqqmail@qq.com
Pass **********
<span style="color: #5B6268;"># </span><span style="color: #5B6268;">To store the password in an encrypted file use PassCmd instead of Pass</span>
<span style="color: #5B6268;"># </span><span style="color: #5B6268;">PassCmd "gpg2 -q --for-your-eyes-only --no-tty -d ~/.mailpass.gpg"</span>
<span style="color: #5B6268;">#</span>
<span style="color: #5B6268;"># </span><span style="color: #5B6268;">Use SSL</span>
SSLType IMAPS
<span style="color: #5B6268;"># </span><span style="color: #5B6268;">The following line should work. If get certificate errors, uncomment the two following lines and read the "Troubleshooting" section.</span>
CertificateFile /etc/ssl/certs/ca-certificates.crt
<span style="color: #5B6268;">#</span><span style="color: #5B6268;">CertificateFile ~/.cert/imap.gmail.com.pem</span>
<span style="color: #5B6268;">#</span><span style="color: #5B6268;">CertificateFile ~/.cert/Equifax_Secure_CA.pem</span>

IMAPStore QQ-remote
Account QQ

MaildirStore QQ-local
Subfolders Verbatim
<span style="color: #5B6268;"># </span><span style="color: #5B6268;">The trailing "/" is important</span>
Path /data/cycoe/Documents/mail/myqqmail@qq.com/
Inbox /data/cycoe/Documents/mail/myqqmail@qq.com/INBOX

Channel QQ
Master :QQ-remote:
Slave :QQ-local:
<span style="color: #5B6268;"># </span><span style="color: #5B6268;">Exclude everything under the internal [Gmail] folder, except the interesting folders</span>
Patterns * !<span style="color: #51afef;">[</span>myqqmail@qq.com<span style="color: #51afef;">]</span>* <span style="color: #98be65;">"[myqqmail@qq.com]/INBOX"</span>
<span style="color: #5B6268;"># </span><span style="color: #5B6268;">Or include everything</span>
<span style="color: #5B6268;">#</span><span style="color: #5B6268;">Patterns *</span>
<span style="color: #5B6268;"># </span><span style="color: #5B6268;">Automatically create missing mailboxes, both locally and on the server</span>
Create Both
<span style="color: #5B6268;"># </span><span style="color: #5B6268;">Save the synchronization state files in the relevant directory</span>
SyncState *
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-org8dad293" class="outline-3">
<h3 id="org8dad293"><span class="section-number-3">1.3</span> Unsafe login</h3>
<div class="outline-text-3" id="text-1-3">
<p>
使用第三方 IMAP 服务同步 163 邮箱时，会提示 Unsafe login 错误，可以通过 <a href="http://config.mail.163.com/settings/imap/index.jsp?uid=xxxxxx@163.com">网易邮箱
设置</a> 解决。
</p>
</div>
</div>
</div>

<div id="outline-container-orgc8e372a" class="outline-2">
<h2 id="orgc8e372a"><span class="section-number-2">2</span> mu 邮件管理器</h2>
<div class="outline-text-2" id="text-2">
</div>
<div id="outline-container-orgb332c99" class="outline-3">
<h3 id="orgb332c99"><span class="section-number-3">2.1</span> 安装</h3>
<div class="outline-text-3" id="text-2-1">
<div class="org-src-container">
<pre class="src src-bash"><span style="color: #5B6268;"># </span><span style="color: #5B6268;">&#20811;&#38534; mu &#20179;&#24211;</span>
git clone git://github.com/djcb/mu.git
<span style="color: #5B6268;"># </span><span style="color: #5B6268;">&#29983;&#25104;&#37197;&#32622;</span>
./autogen.sh
<span style="color: #5B6268;"># </span><span style="color: #5B6268;">&#37197;&#32622;&#32534;&#35793;&#35774;&#32622;</span>
./configure
<span style="color: #5B6268;"># </span><span style="color: #5B6268;">&#32534;&#35793;&#23433;&#35013;</span>
make -j 4 &amp;&amp; sudo make install
</pre>
</div>
</div>
</div>
<div id="outline-container-org4207d7a" class="outline-3">
<h3 id="org4207d7a"><span class="section-number-3">2.2</span> 配置 mu</h3>
<div class="outline-text-3" id="text-2-2">
<div class="org-src-container">
<pre class="src src-bash"><span style="color: #5B6268;"># </span><span style="color: #5B6268;">&#21021;&#22987;&#21270; mu &#30417;&#27979;&#30340;&#37038;&#31665;&#25991;&#20214;&#22841;</span>
mu init -m /data/cycoe/Documents/mail/
<span style="color: #5B6268;"># </span><span style="color: #5B6268;">&#24314;&#31435;&#37038;&#20214;&#32034;&#24341;</span>
mu index
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-org4d4de27" class="outline-2">
<h2 id="org4d4de27"><span class="section-number-2">3</span> mu4e 多账户设置</h2>
<div class="outline-text-2" id="text-3">
<p>
mu4e (mu for emacs) 是 mu 在 emacs 中实现的一个邮件管理模块。后端调用 mu 进行邮
件的检索和管理。在 <code>~/.config/emacs/lisp/</code> 目录下建立 <code>init-mu4e.el</code> 文件，并加入如
下配置。mu4e 目前原生支持的功能是 context（上下文切换），因此使用上下文切换来模
拟多账户管理。每次切换账户时，自动设置对应账户的变量。其中最重要的一处为 context
中的 match-fun 设置。该设置能够保证在同时删除或者归档不同 maildir 下的邮件时，邮
件能够被移动到对应的 maildir 中。
</p>
<div class="org-src-container">
<pre class="src src-elisp"><span style="color: #51afef;">(</span><span style="color: #51afef;">setq</span> mu4e-contexts
      `<span style="color: #c678dd;">(</span> ,<span style="color: #98be65;">(</span>make-mu4e-context
           <span style="color: #c678dd;">:name</span> <span style="color: #98be65;">"netease"</span>
           <span style="color: #c678dd;">:match-func</span> <span style="color: #a9a1e1;">(</span><span style="color: #51afef;">lambda</span> <span style="color: #4db5bd;">(</span>msg<span style="color: #4db5bd;">)</span>
                         <span style="color: #4db5bd;">(</span><span style="color: #51afef;">when</span> msg
                           <span style="color: #51afef;">(</span><span style="color: #c678dd;">string-match-p</span> <span style="color: #98be65;">"myneteasemail@163.com"</span> <span style="color: #c678dd;">(</span>mu4e-message-field msg <span style="color: #c678dd;">:maildir</span><span style="color: #c678dd;">)</span><span style="color: #51afef;">)</span><span style="color: #4db5bd;">)</span><span style="color: #a9a1e1;">)</span><span style="color: #98be65;">)</span><span style="color: #c678dd;">)</span><span style="color: #51afef;">)</span>
</pre>
</div>
<p>
完整配置如下：
</p>
<div class="org-src-container">
<pre class="src src-elisp"><span style="color: #5B6268;">;; </span><span style="color: #5B6268;">the exact path may different -- check it</span>
<span style="color: #51afef;">(</span><span style="color: #c678dd;">add-to-list</span> '<span style="color: #dcaeea;">load-path</span> <span style="color: #98be65;">"/usr/local/share/emacs/site-lisp/mu4e"</span><span style="color: #51afef;">)</span>

<span style="color: #5B6268;">;; </span><span style="color: #5B6268;">require the mu4e main package</span>
<span style="color: #51afef;">(</span><span style="color: #51afef;">require</span> '<span style="color: #a9a1e1;">mu4e</span><span style="color: #51afef;">)</span>
<span style="color: #5B6268;">;; </span><span style="color: #5B6268;">use smtpmail to sent mail</span>
<span style="color: #51afef;">(</span><span style="color: #51afef;">require</span> '<span style="color: #a9a1e1;">smtpmail</span><span style="color: #51afef;">)</span>
<span style="color: #5B6268;">;; </span><span style="color: #5B6268;">convert org content in mu4e to html</span>
<span style="color: #51afef;">(</span><span style="color: #51afef;">require</span> '<span style="color: #a9a1e1;">org-mime</span><span style="color: #51afef;">)</span>
<span style="color: #5B6268;">;; </span><span style="color: #5B6268;">use org-mode in mu4e-message-mode</span>
<span style="color: #51afef;">(</span><span style="color: #51afef;">require</span> '<span style="color: #a9a1e1;">org-mu4e</span><span style="color: #51afef;">)</span>

<span style="color: #5B6268;">;; </span><span style="color: #5B6268;">set default values about mu4e</span>
<span style="color: #51afef;">(</span><span style="color: #51afef;">setq</span>
 <span style="color: #5B6268;">;; </span><span style="color: #5B6268;">auto update maildir with isync and index it</span>
 mu4e-update-interval 300
 <span style="color: #5B6268;">;; </span><span style="color: #5B6268;">don't do a full cleanup check</span>
 mu4e-index-cleanup nil
 <span style="color: #5B6268;">;; </span><span style="color: #5B6268;">don't consider up-to-date dirs</span>
 mu4e-index-lazy-check <span style="color: #dcaeea;">t</span>
 <span style="color: #5B6268;">;; </span><span style="color: #5B6268;">show images in message mode</span>
 mu4e-view-show-images <span style="color: #dcaeea;">t</span>
 <span style="color: #5B6268;">;; </span><span style="color: #5B6268;">set the default download dir for attachment</span>
 mu4e-attachment-dir <span style="color: #98be65;">"/data/cycoe/downloads"</span>
 <span style="color: #5B6268;">;; </span><span style="color: #5B6268;">prefer html view</span>
 mu4e-view-prefer-html <span style="color: #dcaeea;">t</span>
 <span style="color: #5B6268;">;; </span><span style="color: #5B6268;">don't save message to sent messages, gmail/imap takes care of this</span>
 <span style="color: #5B6268;">;; </span><span style="color: #5B6268;">(see the documentation for `</span><span style="color: #a9a1e1;">mu4e-sent-messages-behavior</span><span style="color: #5B6268;">' if you have</span>
 <span style="color: #5B6268;">;; </span><span style="color: #5B6268;">additional non-gmail addresses and want assign them different</span>
 <span style="color: #5B6268;">;; </span><span style="color: #5B6268;">behavior.)</span>
 mu4e-sent-messages-behavior '<span style="color: #c678dd;">delete</span>
 <span style="color: #51afef;">)</span>

<span style="color: #5B6268;">;; </span><span style="color: #5B6268;">set default values for sending mails</span>
<span style="color: #51afef;">(</span><span style="color: #51afef;">setq</span>
 <span style="color: #5B6268;">;; </span><span style="color: #5B6268;">user agent when send mail</span>
 <span style="color: #dcaeea;">mail-user-agent</span> 'mu4e-user-agent
 <span style="color: #5B6268;">;; </span><span style="color: #5B6268;">&#35774;&#32622;&#37038;&#20214;&#21457;&#36865;&#26041;&#27861;&#20026; smtpmail</span>
 message-send-mail-function '<span style="color: #c678dd;">smtpmail-send-it</span>
 <span style="color: #5B6268;">;; </span><span style="color: #5B6268;">&#26681;&#25454; from &#37038;&#20214;&#22836;&#20351;&#29992;&#27491;&#30830;&#30340;&#36134;&#25143;&#19978;&#19979;&#25991;&#21457;&#36865; email.</span>
 message-sendmail-envelope-from 'header
 <span style="color: #5B6268;">;; </span><span style="color: #5B6268;">&#35774;&#32622;&#37038;&#31665;&#35748;&#35777;&#21152;&#23494;&#26041;&#24335;</span>
 smtpmail-stream-type 'ssl
 <span style="color: #5B6268;">;; </span><span style="color: #5B6268;">don't keep message buffers around</span>
 message-kill-buffer-on-exit <span style="color: #dcaeea;">t</span>
 <span style="color: #51afef;">)</span>

<span style="color: #5B6268;">;; </span><span style="color: #5B6268;">some information about me</span>
<span style="color: #51afef;">(</span><span style="color: #51afef;">setq</span>
 <span style="color: #c678dd;">user-full-name</span>  <span style="color: #98be65;">"Cycoe Joo"</span>
 <span style="color: #5B6268;">;; </span><span style="color: #5B6268;">set a mail address list using when reply a message</span>
 mu4e-user-mail-address-list '<span style="color: #c678dd;">(</span><span style="color: #98be65;">"myneteasemail@163.com"</span>
                               <span style="color: #98be65;">"myqqmail@qq.com"</span><span style="color: #c678dd;">)</span>
 mu4e-compose-signature
 <span style="color: #c678dd;">(</span><span style="color: #c678dd;">concat</span>
  <span style="color: #98be65;">"Cycoe\n"</span>
  <span style="color: #98be65;">"BLOG https://cycoe.cc\n"</span><span style="color: #c678dd;">)</span>
 <span style="color: #51afef;">)</span>

<span style="color: #5B6268;">;; </span><span style="color: #5B6268;">&#35813;&#20989;&#25968;&#22522;&#20110;&#24403;&#21069;&#25152;&#22312;&#30340; maildir &#26469;&#21028;&#23450;&#25152;&#36134;&#25143;&#19978;&#19979;&#25991;&#12290;</span>
<span style="color: #5B6268;">;; </span><span style="color: #5B6268;">(defun mu4e-message-maildir-matches (msg rx)</span>
<span style="color: #5B6268;">;;   </span><span style="color: #5B6268;">(when rx</span>
<span style="color: #5B6268;">;;     </span><span style="color: #5B6268;">(if (listp rx)</span>
<span style="color: #5B6268;">;;         </span><span style="color: #5B6268;">;; If rx is a list, try each one for a match</span>
<span style="color: #5B6268;">;;         </span><span style="color: #5B6268;">(or (mu4e-message-maildir-matches msg (car rx))</span>
<span style="color: #5B6268;">;;             </span><span style="color: #5B6268;">(mu4e-message-maildir-matches msg (cdr rx)))</span>
<span style="color: #5B6268;">;;       </span><span style="color: #5B6268;">;; Not a list, check rx</span>
<span style="color: #5B6268;">;;       </span><span style="color: #5B6268;">(string-match rx (mu4e-message-field msg :maildir)))))</span>

<span style="color: #5B6268;">;; </span><span style="color: #5B6268;">&#35774;&#32622; mu4e &#19978;&#19979;&#25991;</span>
<span style="color: #51afef;">(</span><span style="color: #51afef;">setq</span> mu4e-contexts
      `<span style="color: #c678dd;">(</span> ,<span style="color: #98be65;">(</span>make-mu4e-context
           <span style="color: #c678dd;">:name</span> <span style="color: #98be65;">"Netease"</span>
           <span style="color: #c678dd;">:enter-func</span> <span style="color: #a9a1e1;">(</span><span style="color: #51afef;">lambda</span> <span style="color: #4db5bd;">()</span>
                         <span style="color: #4db5bd;">(</span>mu4e-message <span style="color: #98be65;">"Entering Netease context"</span><span style="color: #4db5bd;">)</span>
                         <span style="color: #5B6268;">;; </span><span style="color: #5B6268;">update index after switch context, otherwise the</span>
                         <span style="color: #5B6268;">;; </span><span style="color: #5B6268;">counting is not updated</span>
                         <span style="color: #4db5bd;">(</span>mu4e-update-index<span style="color: #4db5bd;">)</span><span style="color: #a9a1e1;">)</span>
           <span style="color: #c678dd;">:leave-func</span> <span style="color: #a9a1e1;">(</span><span style="color: #51afef;">lambda</span> <span style="color: #4db5bd;">()</span> <span style="color: #4db5bd;">(</span>mu4e-message <span style="color: #98be65;">"Leaving Netease context"</span><span style="color: #4db5bd;">)</span><span style="color: #a9a1e1;">)</span>
           <span style="color: #5B6268;">;; </span><span style="color: #5B6268;">we match based on the contact-fields of the message</span>
           <span style="color: #c678dd;">:match-func</span> <span style="color: #a9a1e1;">(</span><span style="color: #51afef;">lambda</span> <span style="color: #4db5bd;">(</span>msg<span style="color: #4db5bd;">)</span>
                         <span style="color: #4db5bd;">(</span><span style="color: #51afef;">when</span> msg
                           <span style="color: #51afef;">(</span><span style="color: #c678dd;">string-match-p</span> <span style="color: #98be65;">"myneteasemail@163.com"</span> <span style="color: #c678dd;">(</span>mu4e-message-field msg <span style="color: #c678dd;">:maildir</span><span style="color: #c678dd;">)</span><span style="color: #51afef;">)</span><span style="color: #4db5bd;">)</span><span style="color: #a9a1e1;">)</span>

           <span style="color: #c678dd;">:vars</span> '<span style="color: #a9a1e1;">(</span><span style="color: #4db5bd;">(</span><span style="color: #dcaeea;">user-mail-address</span>             . <span style="color: #98be65;">"myneteasemail@163.com"</span><span style="color: #4db5bd;">)</span>
                   <span style="color: #4db5bd;">(</span>mu4e-sent-folder              . <span style="color: #98be65;">"/myneteasemail@163.com/Sent"</span><span style="color: #4db5bd;">)</span>
                   <span style="color: #4db5bd;">(</span>mu4e-drafts-folder            . <span style="color: #98be65;">"/myneteasemail@163.com/Drafts"</span><span style="color: #4db5bd;">)</span>
                   <span style="color: #4db5bd;">(</span>mu4e-trash-folder             . <span style="color: #98be65;">"/myneteasemail@163.com/Trash"</span><span style="color: #4db5bd;">)</span>
                   <span style="color: #4db5bd;">(</span>mu4e-refile-folder            . <span style="color: #98be65;">"/myneteasemail@163.com/Refile"</span><span style="color: #4db5bd;">)</span>
                   <span style="color: #4db5bd;">(</span>smtpmail-smtp-user            . <span style="color: #98be65;">"myneteasemail@163.com"</span><span style="color: #4db5bd;">)</span>
                   <span style="color: #4db5bd;">(</span>smtpmail-default-smtp-server  . <span style="color: #98be65;">"smtp.163.com"</span><span style="color: #4db5bd;">)</span>
                   <span style="color: #4db5bd;">(</span>smtpmail-smtp-server          . <span style="color: #98be65;">"smtp.163.com"</span><span style="color: #4db5bd;">)</span>
                   <span style="color: #4db5bd;">(</span>smtpmail-smtp-service         . 994<span style="color: #4db5bd;">)</span>
                   <span style="color: #4db5bd;">(</span>mu4e-get-mail-command         . <span style="color: #98be65;">"mbsync Netease"</span><span style="color: #4db5bd;">)</span>
                   <span style="color: #4db5bd;">(</span>mu4e-maildir-shortcuts . <span style="color: #51afef;">(</span><span style="color: #c678dd;">(</span><span style="color: #98be65;">"/myneteasemail@163.com/INBOX"</span>   . ?i<span style="color: #c678dd;">)</span>
                                              <span style="color: #c678dd;">(</span><span style="color: #98be65;">"/myneteasemail@163.com/Sent"</span>    . ?s<span style="color: #c678dd;">)</span>
                                              <span style="color: #c678dd;">(</span><span style="color: #98be65;">"/myneteasemail@163.com/Refile"</span>  . ?r<span style="color: #c678dd;">)</span>
                                              <span style="color: #c678dd;">(</span><span style="color: #98be65;">"/myneteasemail@163.com/Trash"</span>   . ?t<span style="color: #c678dd;">)</span>
                                              <span style="color: #c678dd;">(</span><span style="color: #98be65;">"/myneteasemail@163.com/Drafts"</span>  . ?d<span style="color: #c678dd;">)</span><span style="color: #51afef;">)</span><span style="color: #4db5bd;">)</span>
                   <span style="color: #4db5bd;">(</span>mu4e-bookmarks . <span style="color: #51afef;">(</span> <span style="color: #c678dd;">(</span><span style="color: #98be65;">"maildir:/myneteasemail@163.com/INBOX AND flag:unread AND NOT flag:trashed"</span>   <span style="color: #98be65;">"Unread messages"</span>        ?u<span style="color: #c678dd;">)</span>
                                       <span style="color: #c678dd;">(</span><span style="color: #98be65;">"maildir:/myneteasemail@163.com/INBOX AND date:today..now"</span>                    <span style="color: #98be65;">"Today's messages"</span>       ?t<span style="color: #c678dd;">)</span>
                                       <span style="color: #c678dd;">(</span><span style="color: #98be65;">"maildir:/myneteasemail@163.com/INBOX AND date:7d..now"</span>                       <span style="color: #98be65;">"Last 7 days"</span>            ?w<span style="color: #c678dd;">)</span>
                                       <span style="color: #c678dd;">(</span><span style="color: #98be65;">"maildir:/myneteasemail@163.com/INBOX AND date:1d..now"</span>                       <span style="color: #98be65;">"Last 1 days"</span>            ?o<span style="color: #c678dd;">)</span>
                                       <span style="color: #c678dd;">(</span><span style="color: #98be65;">"maildir:/myneteasemail@163.com/INBOX"</span>                                        <span style="color: #98be65;">"Inbox"</span>                  ?i<span style="color: #c678dd;">)</span>
                                       <span style="color: #c678dd;">(</span><span style="color: #98be65;">"maildir:/myneteasemail@163.com/Sent"</span>                                         <span style="color: #98be65;">"Sent"</span>                   ?s<span style="color: #c678dd;">)</span>
                                       <span style="color: #c678dd;">(</span><span style="color: #98be65;">"maildir:/myneteasemail@163.com/Refile"</span>                                       <span style="color: #98be65;">"Refile"</span>                 ?r<span style="color: #c678dd;">)</span>
                                       <span style="color: #c678dd;">(</span><span style="color: #98be65;">"maildir:/myneteasemail@163.com/Trash"</span>                                        <span style="color: #98be65;">"Trash"</span>                  ?t<span style="color: #c678dd;">)</span>
                                       <span style="color: #c678dd;">(</span><span style="color: #98be65;">"maildir:/myneteasemail@163.com/Drafts"</span>                                       <span style="color: #98be65;">"Drafts"</span>                 ?d<span style="color: #c678dd;">)</span>
                                       <span style="color: #c678dd;">(</span><span style="color: #98be65;">"maildir:/myneteasemail@163.com/INBOX AND mime:image/*"</span>                       <span style="color: #98be65;">"Messages with images"</span>   ?p<span style="color: #c678dd;">)</span><span style="color: #51afef;">)</span><span style="color: #4db5bd;">)</span>
                   <span style="color: #a9a1e1;">)</span><span style="color: #98be65;">)</span>

         ,<span style="color: #98be65;">(</span>make-mu4e-context
           <span style="color: #c678dd;">:name</span> <span style="color: #98be65;">"QQ"</span>
           <span style="color: #c678dd;">:enter-func</span> <span style="color: #a9a1e1;">(</span><span style="color: #51afef;">lambda</span> <span style="color: #4db5bd;">()</span>
                         <span style="color: #4db5bd;">(</span>mu4e-message <span style="color: #98be65;">"Switch to the QQ context"</span><span style="color: #4db5bd;">)</span>
                         <span style="color: #4db5bd;">(</span>mu4e-update-index<span style="color: #4db5bd;">)</span><span style="color: #a9a1e1;">)</span>
           <span style="color: #c678dd;">:match-func</span> <span style="color: #a9a1e1;">(</span><span style="color: #51afef;">lambda</span> <span style="color: #4db5bd;">(</span>msg<span style="color: #4db5bd;">)</span>
                         <span style="color: #4db5bd;">(</span><span style="color: #51afef;">when</span> msg
                           <span style="color: #51afef;">(</span><span style="color: #c678dd;">string-match-p</span> <span style="color: #98be65;">"myqqmail@qq.com"</span> <span style="color: #c678dd;">(</span>mu4e-message-field msg <span style="color: #c678dd;">:maildir</span><span style="color: #c678dd;">)</span><span style="color: #51afef;">)</span><span style="color: #4db5bd;">)</span><span style="color: #a9a1e1;">)</span>

           <span style="color: #c678dd;">:vars</span> '<span style="color: #a9a1e1;">(</span><span style="color: #4db5bd;">(</span><span style="color: #dcaeea;">user-mail-address</span>             . <span style="color: #98be65;">"myqqmail@qq.com"</span><span style="color: #4db5bd;">)</span>
                   <span style="color: #4db5bd;">(</span>mu4e-sent-folder              . <span style="color: #98be65;">"/myqqmail@qq.com/Sent"</span><span style="color: #4db5bd;">)</span>
                   <span style="color: #4db5bd;">(</span>mu4e-drafts-folder            . <span style="color: #98be65;">"/myqqmail@qq.com/Drafts"</span><span style="color: #4db5bd;">)</span>
                   <span style="color: #4db5bd;">(</span>mu4e-trash-folder             . <span style="color: #98be65;">"/myqqmail@qq.com/Trash"</span><span style="color: #4db5bd;">)</span>
                   <span style="color: #4db5bd;">(</span>mu4e-refile-folder            . <span style="color: #98be65;">"/myqqmail@qq.com/Refile"</span><span style="color: #4db5bd;">)</span>
                   <span style="color: #4db5bd;">(</span>smtpmail-smtp-user            . <span style="color: #98be65;">"myqqmail@qq.com"</span><span style="color: #4db5bd;">)</span>
                   <span style="color: #4db5bd;">(</span>smtpmail-default-smtp-server  . <span style="color: #98be65;">"smtp.qq.com"</span><span style="color: #4db5bd;">)</span>
                   <span style="color: #4db5bd;">(</span>smtpmail-smtp-server          . <span style="color: #98be65;">"smtp.qq.com"</span><span style="color: #4db5bd;">)</span>
                   <span style="color: #4db5bd;">(</span>smtpmail-smtp-service         . 465<span style="color: #4db5bd;">)</span>
                   <span style="color: #4db5bd;">(</span>mu4e-get-mail-command         . <span style="color: #98be65;">"mbsync QQ"</span><span style="color: #4db5bd;">)</span>
                   <span style="color: #4db5bd;">(</span>mu4e-maildir-shortcuts . <span style="color: #51afef;">(</span><span style="color: #c678dd;">(</span><span style="color: #98be65;">"/myqqmail@qq.com/INBOX"</span>   . ?i<span style="color: #c678dd;">)</span>
                                              <span style="color: #c678dd;">(</span><span style="color: #98be65;">"/myqqmail@qq.com/Sent"</span>    . ?s<span style="color: #c678dd;">)</span>
                                              <span style="color: #c678dd;">(</span><span style="color: #98be65;">"/myqqmail@qq.com/Refile"</span>  . ?r<span style="color: #c678dd;">)</span>
                                              <span style="color: #c678dd;">(</span><span style="color: #98be65;">"/myqqmail@qq.com/Trash"</span>   . ?t<span style="color: #c678dd;">)</span>
                                              <span style="color: #c678dd;">(</span><span style="color: #98be65;">"/myqqmail@qq.com/Drafts"</span>  . ?d<span style="color: #c678dd;">)</span><span style="color: #51afef;">)</span><span style="color: #4db5bd;">)</span>
                   <span style="color: #4db5bd;">(</span>mu4e-bookmarks . <span style="color: #51afef;">(</span> <span style="color: #c678dd;">(</span><span style="color: #98be65;">"maildir:/myqqmail@qq.com/INBOX AND flag:unread AND NOT flag:trashed"</span>   <span style="color: #98be65;">"Unread messages"</span>        ?u<span style="color: #c678dd;">)</span>
                                       <span style="color: #c678dd;">(</span><span style="color: #98be65;">"maildir:/myqqmail@qq.com/INBOX AND date:today..now"</span>                    <span style="color: #98be65;">"Today's messages"</span>       ?t<span style="color: #c678dd;">)</span>
                                       <span style="color: #c678dd;">(</span><span style="color: #98be65;">"maildir:/myqqmail@qq.com/INBOX AND date:7d..now"</span>                       <span style="color: #98be65;">"Last 7 days"</span>            ?w<span style="color: #c678dd;">)</span>
                                       <span style="color: #c678dd;">(</span><span style="color: #98be65;">"maildir:/myqqmail@qq.com/INBOX AND date:1d..now"</span>                       <span style="color: #98be65;">"Last 1 days"</span>            ?o<span style="color: #c678dd;">)</span>
                                       <span style="color: #c678dd;">(</span><span style="color: #98be65;">"maildir:/myqqmail@qq.com/INBOX"</span>                                        <span style="color: #98be65;">"Inbox"</span>                  ?i<span style="color: #c678dd;">)</span>
                                       <span style="color: #c678dd;">(</span><span style="color: #98be65;">"maildir:/myqqmail@qq.com/Sent"</span>                                         <span style="color: #98be65;">"Sent"</span>                   ?s<span style="color: #c678dd;">)</span>
                                       <span style="color: #c678dd;">(</span><span style="color: #98be65;">"maildir:/myqqmail@qq.com/Refile"</span>                                       <span style="color: #98be65;">"Refile"</span>                 ?r<span style="color: #c678dd;">)</span>
                                       <span style="color: #c678dd;">(</span><span style="color: #98be65;">"maildir:/myqqmail@qq.com/Trash"</span>                                        <span style="color: #98be65;">"Trash"</span>                  ?t<span style="color: #c678dd;">)</span>
                                       <span style="color: #c678dd;">(</span><span style="color: #98be65;">"maildir:/myqqmail@qq.com/Drafts"</span>                                       <span style="color: #98be65;">"Drafts"</span>                 ?d<span style="color: #c678dd;">)</span>
                                       <span style="color: #c678dd;">(</span><span style="color: #98be65;">"maildir:/myqqmail@qq.com/INBOX AND mime:image/*"</span>                       <span style="color: #98be65;">"Messages with images"</span>   ?p<span style="color: #c678dd;">)</span><span style="color: #51afef;">)</span><span style="color: #4db5bd;">)</span>
                   <span style="color: #a9a1e1;">)</span><span style="color: #98be65;">)</span><span style="color: #c678dd;">)</span><span style="color: #51afef;">)</span>

<span style="color: #5B6268;">;; </span><span style="color: #5B6268;">start with the first (default) context;</span>
<span style="color: #5B6268;">;; </span><span style="color: #5B6268;">default is to ask-if-none (ask when there's no context yet, and none match)</span>
<span style="color: #51afef;">(</span><span style="color: #51afef;">setq</span> mu4e-context-policy 'pick-first<span style="color: #51afef;">)</span>

<span style="color: #51afef;">(</span><span style="color: #51afef;">provide</span> '<span style="color: #a9a1e1;">init-mu4e</span><span style="color: #51afef;">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-orgab77f70" class="outline-2">
<h2 id="orgab77f70"><span class="section-number-2">4</span> 配置 smtp 发送邮件</h2>
<div class="outline-text-2" id="text-4">
<p>
emcas 可以使用 smtpmail 发送邮件，会自动读取 <code>~/.authinfo</code> 文件中的账户和密码，因
此需要在该文件中配置 smtp 相关信息。
</p>
<div class="org-src-container">
<pre class="src src-bash">machine smtp.163.com login myneteasemail@163.com password xxxxxxxxxx
machine smtp.qq.com login myqqmail@qq.com password xxxxxxxxxx
</pre>
</div>
</div>
</div>
<div id="outline-container-orgba3cc70" class="outline-2">
<h2 id="orgba3cc70"><span class="section-number-2">5</span> 使用 Org mode 编辑新邮件</h2>
<div class="outline-text-2" id="text-5">
<p>
使用 Emacs 管理邮件的一大优势就是可以借助强大的 Org-mode 来写邮件，并自动导出为
HTML 邮件。生成的邮件为 multipart 的邮件，也就是说同时有 plain 部分和 HTML 部分
可选。但在实际使用中，=(org-mime-htmlize)= 确实能够将邮件转化为 multipart 邮件，
但是不知道为什么最后发送出去的邮件只有一个部分。要实现该功能需要在
<code>~/.config/emacs/lisp/init-mu4e.el</code> 中加入如下配置。
</p>
<div class="org-src-container">
<pre class="src src-elisp"><span style="color: #5B6268;">;; </span><span style="color: #5B6268;">convert org content in mu4e to html and send</span>
<span style="color: #51afef;">(</span><span style="color: #51afef;">require</span> '<span style="color: #a9a1e1;">org-mime</span><span style="color: #51afef;">)</span>
<span style="color: #5B6268;">;; </span><span style="color: #5B6268;">convert org content in mu4e to html and send</span>
<span style="color: #51afef;">(</span><span style="color: #51afef;">require</span> '<span style="color: #a9a1e1;">org-mu4e</span><span style="color: #51afef;">)</span>

<span style="color: #5B6268;">;; </span><span style="color: #5B6268;">auto enable the org-mu4e-compose-org-mode when enter the mu4e-compose-mode</span>
<span style="color: #51afef;">(</span><span style="color: #c678dd;">add-hook</span> 'mu4e-compose-mode-hook
          <span style="color: #c678dd;">(</span><span style="color: #51afef;">defun</span> <span style="color: #c678dd;">do-compose-stuff</span> <span style="color: #98be65;">()</span>
            <span style="color: #98be65;">(</span>org-mu4e-compose-org-mode<span style="color: #98be65;">)</span><span style="color: #c678dd;">)</span><span style="color: #51afef;">)</span>

<span style="color: #51afef;">(</span><span style="color: #51afef;">defun</span> <span style="color: #c678dd;">htmlize-and-send</span> <span style="color: #c678dd;">()</span>
  <span style="color: #83898d;">"When in an org-mu4e-compose-org-mode message, htmlize and send it."</span>
  <span style="color: #c678dd;">(</span><span style="color: #51afef;">interactive</span><span style="color: #c678dd;">)</span>
  <span style="color: #c678dd;">(</span><span style="color: #51afef;">when</span> <span style="color: #98be65;">(</span><span style="color: #c678dd;">member</span> 'org~mu4e-mime-switch-headers-or-body <span style="color: #dcaeea;">post-command-hook</span><span style="color: #98be65;">)</span>
    <span style="color: #98be65;">(</span><span style="color: #c678dd;">org-mime-htmlize</span><span style="color: #98be65;">)</span>
    <span style="color: #98be65;">(</span><span style="color: #c678dd;">message-send-and-exit</span><span style="color: #98be65;">)</span><span style="color: #c678dd;">)</span><span style="color: #51afef;">)</span>

<span style="color: #51afef;">(</span><span style="color: #c678dd;">add-hook</span> '<span style="color: #dcaeea;">org-ctrl-c-ctrl-c-hook</span> 'htmlize-and-send <span style="color: #dcaeea;">t</span><span style="color: #51afef;">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-org8f4c560" class="outline-2">
<h2 id="org8f4c560"><span class="section-number-2">6</span> 将邮件加入 TODO 列表中</h2>
<div class="outline-text-2" id="text-6">
<p>
如果想要将某封邮件加入代办事项用于记录，可以将如下代码加入 <code>init-mu4e.el</code> 中
</p>
<div class="org-src-container">
<pre class="src src-elisp"><span style="color: #5B6268;">;; </span><span style="color: #5B6268;">store link to message if in header view, not to header query</span>
<span style="color: #51afef;">(</span><span style="color: #51afef;">setq</span> org-mu4e-link-query-in-headers-mode nil<span style="color: #51afef;">)</span>
<span style="color: #5B6268;">;; </span><span style="color: #5B6268;">use org-capture to add a new todo</span>
<span style="color: #51afef;">(</span><span style="color: #51afef;">setq</span> <span style="color: #dcaeea;">org-capture-templates</span>
      '<span style="color: #c678dd;">(</span><span style="color: #98be65;">(</span><span style="color: #98be65;">"t"</span> <span style="color: #98be65;">"todo"</span> entry <span style="color: #a9a1e1;">(</span>file+headline <span style="color: #98be65;">"/data/cycoe/Documents/Orgs/</span><span style="color: #cc9393;">TODO</span><span style="color: #98be65;">.org"</span> <span style="color: #98be65;">"Tasks"</span><span style="color: #a9a1e1;">)</span>
         <span style="color: #98be65;">"* </span><span style="color: #cc9393;">TODO</span><span style="color: #98be65;"> [#A] %?\nSCHEDULED: %(org-insert-time-stamp (org-read-date nil t \"+0d\"))\n%a\n"</span><span style="color: #98be65;">)</span><span style="color: #c678dd;">)</span><span style="color: #51afef;">)</span>
</pre>
</div>
<p>
至此，在 mu4e 的 header view 或者是 message view 中，输入 <code>org-capture</code> 即可自动将
邮件作为代办事项加入到 <code>/data/cycoe/Documents/Orgs/TODO.org</code> 中。
</p>
</div>
</div>
</div>
<div id="postamble" class="status">
<div id="author-info">
      <div id="author">Author: Cycoe (cycoejoo@163.com)</div>
      <div id="date">Date: <2020-02-28 Fri 23:03></div>
      <div id="generator">Generator: <a href="https://www.gnu.org/software/emacs/">Emacs</a> 28.0.50 (<a href="https://orgmode.org">Org</a> mode 9.4.4)</div>
      <div id="built">Built: <2021-05-31 Mon 18:29></div>
      </div><div id="copyright">
    <img id="cc" src="/static/img/Cc-logo-128x128.png" height="14px" width="14px"/>本站文章如未特殊声明，默认采用<a href="http://creativecommons.org/licenses/by-nc-sa/2.5/cn/" target="_blank">署名-非商业性使用-相同方式共享 2.5 中国大陆</a>进行许可。
</div>
</div>
</body>
</html>
